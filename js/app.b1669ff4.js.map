{"version":3,"file":"js/app.b1669ff4.js","mappings":"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","sources":["webpack://my-vue3-app/./src/App.vue","webpack://my-vue3-app/./src/App.vue?7ccd","webpack://my-vue3-app/./src/views/Page1.vue","webpack://my-vue3-app/./src/visualizations/stackBarChart.js","webpack://my-vue3-app/./src/services/DataService.js","webpack://my-vue3-app/./src/views/Page1.vue?0076","webpack://my-vue3-app/./src/views/Page2.vue","webpack://my-vue3-app/./src/services/colorMapping.js","webpack://my-vue3-app/./src/services/StringMapping.js","webpack://my-vue3-app/./src/services/sizeMapping.js","webpack://my-vue3-app/./src/visualizations/eventSequence.js","webpack://my-vue3-app/./src/visualizations/mappingLegend.js","webpack://my-vue3-app/./src/components/TransactionSimilarity.vue","webpack://my-vue3-app/./src/services/sequenceSimilarity.js","webpack://my-vue3-app/./src/components/YearView.vue","webpack://my-vue3-app/./src/components/YearView.vue?7512","webpack://my-vue3-app/./src/components/MonthView.vue","webpack://my-vue3-app/./src/components/MonthView.vue?2a99","webpack://my-vue3-app/./src/components/TransactionSimilarity.vue?115f","webpack://my-vue3-app/./src/components/KMeans.vue","webpack://my-vue3-app/./src/components/KMeans.vue?59fb","webpack://my-vue3-app/./src/components/topSimilarList.vue","webpack://my-vue3-app/./src/components/topSimilarList.vue?40ed","webpack://my-vue3-app/./src/components/AlgorithmProcess.vue","webpack://my-vue3-app/./src/components/AlgorithmProcess.vue?906a","webpack://my-vue3-app/./src/components/CategoryDistribution.vue","webpack://my-vue3-app/./src/components/CategoryDistribution.vue?2da5","webpack://my-vue3-app/./src/components/AmountDistribution.vue","webpack://my-vue3-app/./src/components/AmountDistribution.vue?7b79","webpack://my-vue3-app/./src/components/TimeDistribution.vue","webpack://my-vue3-app/./src/components/TimeDistribution.vue?ddb9","webpack://my-vue3-app/./src/components/AverageDay.vue","webpack://my-vue3-app/./src/components/AverageDay.vue?b1eb","webpack://my-vue3-app/./src/views/Page2.vue?94a5","webpack://my-vue3-app/./src/views/Page3.vue","webpack://my-vue3-app/./src/services/extractColors.js","webpack://my-vue3-app/./src/views/Page3.vue?15c4","webpack://my-vue3-app/./src/views/Page4.vue","webpack://my-vue3-app/./src/views/Page4.vue?96b5","webpack://my-vue3-app/./src/router/index.js","webpack://my-vue3-app/./src/main.js","webpack://my-vue3-app/webpack/bootstrap","webpack://my-vue3-app/webpack/runtime/chunk loaded","webpack://my-vue3-app/webpack/runtime/define property getters","webpack://my-vue3-app/webpack/runtime/global","webpack://my-vue3-app/webpack/runtime/hasOwnProperty shorthand","webpack://my-vue3-app/webpack/runtime/make namespace object","webpack://my-vue3-app/webpack/runtime/jsonp chunk loading","webpack://my-vue3-app/webpack/startup"],"sourcesContent":["<template>\n  <el-container>\n<!--    <el-aside :width=\"sidebarVisible ? '200px' : '0px'\">-->\n<!--        <div class=\"toggle-button\" @click=\"toggleSidebar\">-->\n<!--          <span v-html=\"sidebarVisible ? '&lt;' : '&gt;'\"></span>-->\n<!--        </div>-->\n\n<!--        <div :class=\"['sidebar', { hidden: !sidebarVisible }]\">-->\n<!--          <router-link to=\"/page1\" class=\"tab-link\" active-class=\"active\">Recreate Fig 1</router-link>-->\n<!--          <router-link to=\"/page2\" class=\"tab-link\" active-class=\"active\">Event Sequence 1</router-link>-->\n<!--          <router-link to=\"/page3\" class=\"tab-link\" active-class=\"active\">(color wheel)</router-link>-->\n<!--          <router-link to=\"/page4\" class=\"tab-link\" active-class=\"active\">Page 4</router-link>-->\n<!--        </div>-->\n\n<!--    </el-aside>-->\n\n    <router-link to=\"/page2\" class=\"tab-link\" active-class=\"active\">11</router-link>\n<!--    <router-link to=\"/page2\" class=\"tab-link\" active-class=\"active\"></router-link>-->\n\n\n    <el-container>\n      <router-view></router-view>\n    </el-container>\n\n  </el-container>\n</template>\n\n<script>\nimport { ElContainer } from 'element-plus'\n// , ElHeader, ElMain, ElAside\n\nexport default {\n  components: {\n    ElContainer,\n    // ElAside,\n    // ElHeader,\n    // ElMain,\n  },\n  data() {\n    return {\n      sidebarVisible: true\n    };\n  },\n  methods: {\n    toggleSidebar() {\n      this.sidebarVisible = !this.sidebarVisible;\n    }\n  }\n};\n</script>\n\n<style>\n@import '@/assets/global.css';\n\n.sidebar {\n  width: 200px;\n  background-color: #333;\n  overflow: auto;\n  transition: transform 0.3s ease;\n}\n\n.sidebar a {\n  display: block;\n  color: white;\n  padding: 16px;\n  text-decoration: none;\n}\n\n.sidebar a:hover {\n  background-color: #ddd;\n  color: black;\n}\n\n.sidebar a.active {\n  background-color: grey;\n  color: white;\n}\n\n.sidebar.hidden {\n  transform: translateX(-200px);\n}\n\n.sidebar.hidden ~ .toggle-button {\n  left: 0; /* 导航栏隐藏时，按钮保持在视野内 */\n}\n\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=46db73a3\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=46db73a3&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <el-container>\r\n    <el-header>\r\n      <h1>Recreate Figure 1</h1>\r\n    </el-header>\r\n    <el-main>\r\n      <div id=\"page1\">\r\n        <div id=\"chart\"></div>\r\n      </div>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from 'vue';\r\nimport { StackBarChart } from '@/visualizations/stackBarChart';\r\nimport { loadData } from '@/services/DataService';\r\nimport '@/assets/global.css';\r\nimport { ElContainer, ElHeader, ElMain } from 'element-plus';\r\n\r\nexport default {\r\n  name: 'Page1',\r\n  components: {\r\n    ElContainer,\r\n    // ElAside,\r\n    ElHeader,\r\n    ElMain,\r\n  },\r\n  setup() {\r\n    onMounted(async () => {\r\n      const { jsonData } = await loadData();\r\n      StackBarChart(jsonData);\r\n    });\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","// import * as d3 from 'd3';\r\n// import { excelDateToJSDate } from '@/services/dateUtils';\r\n\r\nexport function StackBarChart(data) {\r\n  console.log(\"Row Data:\", data);\r\n  // // 解析数据，提取年份和Transaction Type\r\n  // const parsedData = data.map(d => {\r\n  //   // console.log(\"Row Data:\", d);\r\n  //   let dateStr = d[\"Transaction Date\"];\r\n  //   if (typeof dateStr === 'number') {\r\n  //     // 如果是Excel日期序列，转换为JS日期\r\n  //     dateStr = excelDateToJSDate(dateStr);\r\n  //     dateStr = `${dateStr.getDate().toString().padStart(2, '0')}/${(dateStr.getMonth() + 1).toString().padStart(2, '0')}/${dateStr.getFullYear()}`;\r\n  //   }\r\n  //\r\n  //   if (typeof dateStr !== 'string') {\r\n  //     console.error(\"Invalid Transaction Date:\", dateStr);\r\n  //     return null;\r\n  //   }\r\n  //\r\n  //   const dateParts = dateStr.split('/');\r\n  //   const year = dateParts[2];\r\n  //   return {\r\n  //     year: year,\r\n  //     type: d[\"Transaction Type\"]\r\n  //   };\r\n  // }).filter(d => d !== null && d.type && d.type.trim() !== '');  // 过滤掉无效的行和没有Transaction Type的行\r\n  //\r\n  // // 调试：打印解析后的数据\r\n  // // console.log(\"Parsed Data:\", parsedData);\r\n  //\r\n  // // 按年份和Transaction Type聚合数据\r\n  // const nestedData = d3.rollup(\r\n  //   parsedData,\r\n  //   v => v.length,\r\n  //   d => d.year,\r\n  //   d => d.type\r\n  // );\r\n  //\r\n  // // console.log(\"Nested Data:\", nestedData);\r\n  //\r\n  // // 转换数据为堆积条形图所需格式\r\n  // let years = Array.from(new Set(parsedData.map(d => d.year)));\r\n  // years = years.sort((a, b) => a - b);  // 将年份按升序排列\r\n  // let types = Array.from(new Set(parsedData.map(d => d.type)));\r\n  // types.sort((a, b) => a.localeCompare(b));   // 按照首字母降序排序\r\n  //\r\n  // // console.log(\"Years:\", years);\r\n  // // console.log(\"Types:\", types);\r\n  //\r\n  // const stackData = years.map(year => {\r\n  //   const yearData = { year: year };\r\n  //   types.forEach(type => {\r\n  //     const yearEntry = nestedData.get(year);\r\n  //     const typeData = yearEntry ? yearEntry.get(type) : null;\r\n  //     yearData[type] = typeData ? typeData : 0;\r\n  //   });\r\n  //   return yearData;\r\n  // });\r\n  //\r\n  // // 移除旧的SVG\r\n  // d3.select(\"#chart\").selectAll(\"*\").remove();\r\n  //\r\n  // console.log(\"Stack Data:\", stackData);\r\n  //\r\n  // const margin = { top: 20, right: 150, bottom: 60, left: 60 };\r\n  // const containerWidth = document.getElementById('chart').clientWidth;\r\n  // const containerHeight = document.getElementById('chart').clientHeight;\r\n  // const width = containerWidth - margin.left - margin.right;\r\n  // const height = containerHeight - margin.top - margin.bottom;\r\n  //\r\n  // const svg = d3.select(\"#page1 #chart\")\r\n  //   .append(\"svg\")\r\n  //   .attr(\"width\", containerWidth)\r\n  //   .attr(\"height\", containerHeight)\r\n  //   .append(\"g\")\r\n  //   .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n  //\r\n  // const x = d3.scaleBand()\r\n  //   .domain(years)\r\n  //   .range([0, width])\r\n  //   .padding(0.2);\r\n  //\r\n  // const y = d3.scaleLinear()\r\n  //   .range([height, 0]);\r\n  //\r\n  // // 添加x轴标题\r\n  // svg.append(\"text\")\r\n  //   .attr(\"class\", \"x-axis-label\")\r\n  //   .attr(\"text-anchor\", \"middle\")\r\n  //   .attr(\"x\", width / 2)\r\n  //   .attr(\"y\", height + margin.bottom - 20)\r\n  //   .text(\"Year\");\r\n  //\r\n  // // 添加y轴标题\r\n  // svg.append(\"text\")\r\n  //   .attr(\"class\", \"y-axis-label\")\r\n  //   .attr(\"text-anchor\", \"middle\")\r\n  //   .attr(\"transform\", \"rotate(-90)\")\r\n  //   .attr(\"x\", -height / 2)\r\n  //   .attr(\"y\", -margin.left + 20)\r\n  //   .text(\"Number of Transactions per Year\");\r\n  //\r\n  // //颜色比例尺\r\n  // const color = d3.scaleOrdinal()\r\n  //   .domain(types)\r\n  //   .range(d3.schemeCategory10.slice(0, types.length)); // 确保颜色数量与类型数量匹配\r\n  //\r\n  //\r\n  // const stack = d3.stack()\r\n  //   .keys(types);\r\n  //\r\n  // const series = stack(stackData);\r\n  //\r\n  // // 调试：打印堆积条形图系列数据\r\n  // console.log(\"Series Data:\", series);\r\n  //\r\n  // y.domain([0, d3.max(series, s => d3.max(s, d => d[1]))]);\r\n  //\r\n  // // 获取所有Y轴刻度值\r\n  // const yTicks = y.ticks();\r\n  //\r\n  // // 绘制水平横线\r\n  // svg.selectAll(\"line.horizontalGrid\").data(yTicks).enter()\r\n  //   .append(\"line\")\r\n  //   .attr(\"class\", \"horizontalGrid\")\r\n  //   .attr(\"x1\", 0)\r\n  //   .attr(\"x2\", width)\r\n  //   .attr(\"y1\", d => y(d))\r\n  //   .attr(\"y2\", d => y(d))\r\n  //   .attr(\"stroke\", \"#cccccc\")\r\n  //   .attr(\"stroke-width\", 1)\r\n  //   .style(\"opacity\", 0.7);\r\n  //\r\n  // // 绘制X轴\r\n  // svg.append(\"g\")\r\n  //   .attr(\"class\", \"x-axis\")\r\n  //   .attr(\"transform\", `translate(0,${height})`)\r\n  //   .call(d3.axisBottom(x));\r\n  //\r\n  // // 绘制Y轴\r\n  // svg.append(\"g\")\r\n  //   .attr(\"class\", \"y-axis\")\r\n  //   .call(d3.axisLeft(y))\r\n  //   .selectAll(\"path\")\r\n  //   .style(\"display\", \"none\");\r\n  //\r\n  // // Tooltip\r\n  // const tooltip = d3.select(\"body\").append(\"div\")\r\n  //   .attr(\"class\", \"tooltip\")\r\n  //   .style(\"position\", \"absolute\")\r\n  //   .style(\"background\", \"#f9f9f9\")\r\n  //   .style(\"padding\", \"5px 10px\")\r\n  //   .style(\"border\", \"1px solid #d3d3d3\")\r\n  //   .style(\"border-radius\", \"5px\")\r\n  //   .style(\"pointer-events\", \"none\")\r\n  //   .style(\"opacity\", 0);\r\n  //\r\n  // // 绘制堆积条形图\r\n  // const seriesGroup = svg.selectAll(\".serie\")\r\n  //   .data(series)\r\n  //   .enter().append(\"g\")\r\n  //   .attr(\"class\", \"serie\")\r\n  //   .attr(\"fill\", d => color(d.key));\r\n  //\r\n  // seriesGroup.selectAll(\"rect\")\r\n  //   .data(d => d.map(v => ({...v, key: d.key})))\r\n  //   .enter().append(\"rect\")\r\n  //   .attr(\"x\", d => x(d.data.year))\r\n  //   .attr(\"y\", d => y(d[1]))\r\n  //   .attr(\"height\", d => y(d[0]) - y(d[1]))\r\n  //   .attr(\"width\", x.bandwidth())\r\n  //   .on(\"mouseover\", (event, d) => {\r\n  //     tooltip.transition().duration(200).style(\"opacity\", .9);\r\n  //     tooltip.html(`Year: ${d.data.year}<br>Type: ${d.key}<br>Count: ${d[1] - d[0]}`)\r\n  //       .style(\"left\", (event.pageX + 5) + \"px\")\r\n  //       .style(\"top\", (event.pageY - 28) + \"px\");\r\n  //\r\n  //     // 高亮当前的Transaction Type\r\n  //     svg.selectAll(\".serie\")\r\n  //       .style(\"opacity\", 0.2);\r\n  //     d3.select(event.target.parentNode)\r\n  //       .style(\"opacity\", 1);\r\n  //   })\r\n  //   .on(\"mouseout\", () => {\r\n  //     tooltip.transition().duration(500).style(\"opacity\", 0);\r\n  //\r\n  //     // 恢复所有Transaction Types的样式\r\n  //     svg.selectAll(\".serie\")\r\n  //       .style(\"opacity\", 1);\r\n  //   });\r\n  //\r\n  // // 添加图例\r\n  // const legendRectSize = Math.min(containerWidth, containerHeight) * 0.02;\r\n  // const legendSpacing = legendRectSize * 0.5;\r\n  //\r\n  // const legend = svg.selectAll(\".legend\")\r\n  //   .data(types.filter(type => {\r\n  //     return stackData.some(d => d[type] > 0);\r\n  //   }).reverse())  // 颠倒图例顺序\r\n  //   .enter().append(\"g\")\r\n  //   .attr(\"class\", \"legend\")\r\n  //   .attr(\"transform\", (d, i) => `translate(0,${i * (legendRectSize + legendSpacing)})`);\r\n  //\r\n  // legend.append(\"rect\")\r\n  //   .attr(\"x\", width + 20)\r\n  //   .attr(\"width\", legendRectSize)\r\n  //   .attr(\"height\", legendRectSize)\r\n  //   .style(\"fill\", color);\r\n  //\r\n  // legend.append(\"text\")\r\n  //   .attr(\"x\", width + 20 + legendRectSize + legendSpacing)\r\n  //   .attr(\"y\", legendRectSize / 2)\r\n  //   .attr(\"dy\", \".35em\")\r\n  //   .style(\"text-anchor\", \"start\")\r\n  //   .style(\"font-size\", `${legendRectSize * 0.75}px`)\r\n  //   .text(d => d);\r\n}\r\n","import * as XLSX from 'xlsx';\r\n\r\nexport async function loadData() {\r\n  const response = await fetch('/Open Bank Transaction Data.xlsx');\r\n  const arrayBuffer = await response.arrayBuffer();\r\n  const data = new Uint8Array(arrayBuffer);\r\n  const workbook = XLSX.read(data, { type: 'array' });\r\n  const firstSheetName = workbook.SheetNames[1];\r\n  const worksheet = workbook.Sheets[firstSheetName];\r\n  const jsonData = XLSX.utils.sheet_to_json(worksheet);\r\n\r\n  return { jsonData, worksheet };\r\n}\r\n","import { render } from \"./Page1.vue?vue&type=template&id=0b5a247a\"\nimport script from \"./Page1.vue?vue&type=script&lang=js\"\nexport * from \"./Page1.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <el-container direction=\"vertical\">\r\n    <el-main class=\"up-half-page\">\r\n      <el-tree\r\n        ref=\"legendTree\"\r\n        class=\"custom-tree\"\r\n        :data=\"legendData\"\r\n        show-checkbox\r\n        node-key=\"id\"\r\n        default-expand-all\r\n        :props=\"defaultProps\"\r\n        @check=\"handleCheck\"\r\n        :render-content=\"renderContent\"\r\n      />\r\n      <el-scrollbar ref=\"containerRef\">\r\n        <div id=\"event-sequence\" style=\"overflow-y: auto;\" @click=\"showDetail\"></div>\r\n        <div class=\"switch-fixed\">\r\n          <el-switch\r\n            v-model=\"showAllDates\"\r\n            class=\"ml-2\"\r\n            inline-prompt\r\n            style=\"--el-switch-on-color: #13ce66; --el-switch-off-color: #ff4949\"\r\n            active-text=\"All Dates\"\r\n            inactive-text=\"Less Dates\"\r\n          />\r\n          <div class=\"radio-container\">\r\n            <el-radio-group v-model=\"selectedMapping\" class=\"radio-group-vertical\">\r\n              <el-radio value=\"none\">No Amount Mapping</el-radio>\r\n              <el-radio value=\"height\">Amount Map to Height</el-radio>\r\n              <el-radio value=\"width\">Amount Map to Width</el-radio>\r\n              <el-radio value=\"area\">Amount Map to Area</el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n          <el-dropdown @command=\"handleDropdownCommand\" style=\"margin-top: 10px\">\r\n            <span class=\"el-dropdown-link\">\r\n              Find Average Day\r\n              <el-icon class=\"el-icon--right\"><arrow-down /></el-icon>\r\n            </span>\r\n            <template #dropdown>\r\n              <el-dropdown-menu>\r\n                <el-dropdown-item command=\"mostFrequent\">Most frequent day</el-dropdown-item>\r\n                <el-dropdown-item command=\"averageDay\">Average day info</el-dropdown-item>\r\n                <el-dropdown-item command=\"categoryDistribution\">Category distribution</el-dropdown-item>\r\n                <el-dropdown-item command=\"amountDistribution\">Amount distribution</el-dropdown-item>\r\n                <el-dropdown-item command=\"timeDistribution\">Time distribution</el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </template>\r\n          </el-dropdown>\r\n        </div>\r\n      </el-scrollbar>\r\n      <div style=\"width: 100px;\">\r\n        <el-col :span=\"6\">\r\n          <el-anchor\r\n            :container=\"containerRef\"\r\n            direction=\"vertical\"\r\n            type=\"default\"\r\n            :offset=\"30\"\r\n            @click=\"handleYearClick\"\r\n            style=\"width: 100px;\"\r\n          >\r\n            <template v-for=\"year in Object.keys(yearPositions).reverse()\" :key=\"year\">\r\n              <el-anchor-link\r\n                :href=\"`#year-${year}`\"\r\n                :title=\"`Year ${year}`\"\r\n              />\r\n            </template>\r\n          </el-anchor>\r\n        </el-col>\r\n      </div>\r\n      <div v-if=\"showMappingLegend\" class=\"mapping-legend\"></div>\r\n      <div v-else class=\"average-info\">\r\n        <div v-if=\"selectedDropdown === 'mostFrequent'\" class=\"new-content-container\">\r\n          <div id=\"algorithm-process\">\r\n            <algorithm-process\r\n              :details=\"selectedDetails\"\r\n              :similarDetails=\"selectedSimilarDetails\"\r\n              :dailySequences=\"dailySequences\"\r\n              :dailyAmounts=\"dailyAmounts\"\r\n              :selectedMapping=\"selectedMapping\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div v-if=\"selectedDropdown === 'averageDay'\" class=\"new-content-container\">\r\n          <AverageDay :parsedData=\"parsedData\" />\r\n        </div>\r\n        <div v-if=\"selectedDropdown === 'categoryDistribution' && jsonData && worksheet\" class=\"new-content-container\">\r\n          <CategoryDistribution :data=\"jsonData\" />\r\n        </div>\r\n        <div v-if=\"selectedDropdown === 'amountDistribution' && jsonData && worksheet\" class=\"new-content-container\">\r\n          <AmountDistribution :data=\"jsonData\" />\r\n        </div>\r\n        <div v-if=\"selectedDropdown === 'timeDistribution' && jsonData && worksheet\" class=\"new-content-container\">\r\n          <TimeDistribution\r\n            :parsedData=\"parsedData\"\r\n            :selectedCategories=\"selectedCategories\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </el-main>\r\n\r\n    <el-main class=\"down-half-page\">\r\n      <div id=\"user-option\">\r\n        <!--        <div>-->\r\n        <!--          <el-button @click=\"selectAll\">Select all</el-button>-->\r\n        <!--        </div>-->\r\n        <!--        <div>-->\r\n        <!--          <el-button @click=\"clearAll\">Clear</el-button>-->\r\n        <!--        </div>-->\r\n        <div>\r\n          <el-switch\r\n            v-model=\"isDarkMode\"\r\n            class=\"ml-2\"\r\n            inline-prompt\r\n            style=\"--el-switch-on-color: #DDDEE0; --el-switch-off-color: #606266\"\r\n            active-text=\"Light\"\r\n            inactive-text=\"Dark\"\r\n          >\r\n            <template #active-action>\r\n              <span class=\"custom-inactive-action\">☀️</span>\r\n            </template>\r\n            <template #inactive-action>\r\n              <span class=\"custom-active-action\">🌙</span>\r\n            </template>\r\n          </el-switch>\r\n        </div>\r\n        <div class=\"radio-group\">\r\n          <el-radio-group v-model=\"selectedOption\" class=\"radio-group-vertical\">\r\n            <el-radio value=\"category\">Category Similarity</el-radio>\r\n            <el-radio value=\"amount\">Amount Similarity</el-radio>\r\n            <el-radio value=\"combined\">Category & Amount Similarity</el-radio>\r\n          </el-radio-group>\r\n        </div>\r\n        <div class=\"algorithm_box\">\r\n          <el-select\r\n            v-model=\"selectedAlgorithm\"\r\n            placeholder=\"Select Algorithm\"\r\n            :disabled=\"selectedOption == 'amount'\"\r\n          >\r\n            <el-option label=\"Levenshtein\" value=\"levenshtein\"></el-option>\r\n            <el-option label=\"Damerau-Levenshtein\" value=\"damerau-levenshtein\"></el-option>\r\n            <el-option label=\"Hamming\" value=\"hamming\"></el-option>\r\n            <el-option label=\"Jaro-Winkler\" value=\"jaro-winkler\"></el-option>\r\n          </el-select>\r\n        </div>\r\n        <div style=\"margin-top: 10px\">\r\n          <el-button @click=\"toggleTransactionDetail\" style=\"width: 100px;\">Calendar</el-button>\r\n        </div>\r\n        <el-button @click=\"openKMeansDrawer\" style=\"width: 100px;\">Cluster</el-button>\r\n        <k-means\r\n          :parsedData=\"parsedData\"\r\n          :isDarkMode=\"isDarkMode\"\r\n          ref=\"kmeansComponent\"\r\n        />\r\n      </div>\r\n      <div id=\"similar-list\">\r\n        <top-similar-list\r\n          :topSimilarSequences=\"topSimilarSequences\"\r\n          :selectedDetails=\"selectedDetails\"\r\n          :listAmounts=\"listAmounts\"\r\n          :selectedMapping=\"selectedMapping\"\r\n          :selectedOption=\"selectedOption\"\r\n          @select-similar-sequence=\"handleSelectSimilarSequence\"\r\n        />\r\n      </div>\r\n      <div id=\"algorithm-details\">\r\n        <div id=\"algorithm-description\" v-html=\"selectedDescription\" v-if=\"selectedOption === 'category'\"></div>\r\n      </div>\r\n    </el-main>\r\n    <transaction-similarity\r\n      :visible=\"showTransactionDetail\"\r\n      :details=\"selectedDetails\"\r\n      :dailySequences=\"dailySequences\"\r\n      :dailyAmounts=\"dailyAmounts\"\r\n      :algorithm=\"selectedAlgorithm\"\r\n      :selectedOption=\"selectedOption\"\r\n      @close=\"closeDetail\"\r\n      @update-top-similar-sequences=\"handleUpdateTopSimilarSequences\"\r\n    ></transaction-similarity>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3';\r\nimport { onMounted, ref, watch } from 'vue';\r\nimport { EventSequenceChart } from '@/visualizations/eventSequence';\r\nimport { HeightLegendChart, WidthLegendChart, AreaLegendChart } from '@/visualizations/mappingLegend';\r\nimport { loadData } from '@/services/DataService';\r\nimport { colorMap } from '@/services/colorMapping';\r\nimport TransactionSimilarity from '@/components/TransactionSimilarity';\r\nimport KMeans from '@/components/KMeans.vue';\r\nimport { findTopSimilarSequences, findTopSimilarSequencesByAmount, findTopSimilarSequencesCombined } from '@/services/sequenceSimilarity';\r\nimport TopSimilarList from '@/components/topSimilarList.vue';\r\nimport AlgorithmProcess from '@/components/AlgorithmProcess.vue';\r\nimport CategoryDistribution from '@/components/CategoryDistribution.vue';\r\nimport AmountDistribution from '@/components/AmountDistribution.vue';\r\nimport TimeDistribution from '@/components/TimeDistribution.vue';\r\nimport AverageDay from '@/components/AverageDay.vue';\r\nimport '@/assets/global.css';\r\nimport { ElSwitch, ElButton, ElContainer, ElMain, ElTree, ElScrollbar, ElAnchor, ElAnchorLink,\r\n  ElCol, ElSelect, ElOption, ElRadioGroup, ElRadio,\r\n  ElDropdown, ElDropdownMenu, ElDropdownItem, ElIcon } from 'element-plus';\r\nimport { ArrowDown } from '@element-plus/icons-vue';\r\n\r\n\r\nexport default {\r\n  name: 'Page2',\r\n  components: {\r\n    ElButton,\r\n    ElSwitch,\r\n    ElContainer,\r\n    ElMain,\r\n    ElTree,\r\n    ElScrollbar,\r\n    TransactionSimilarity,\r\n    KMeans,\r\n    TopSimilarList,\r\n    AlgorithmProcess,\r\n    CategoryDistribution,\r\n    AmountDistribution,\r\n    TimeDistribution,\r\n    AverageDay,\r\n    ElAnchor,\r\n    ElAnchorLink,\r\n    ElCol,\r\n    ElSelect,\r\n    ElOption,\r\n    ElRadioGroup,\r\n    ElRadio,\r\n    ElDropdown,\r\n    ElDropdownMenu,\r\n    ElDropdownItem,\r\n    ElIcon,\r\n    ArrowDown,\r\n  },\r\n  watch: {\r\n    selectedMapping() {\r\n      this.showMappingLegend = true;  // 切换到 mapping-legend\r\n    },\r\n    selectedDropdown() {\r\n      this.showMappingLegend = false; // 切换到 average-info\r\n    }\r\n  },\r\n  methods: {\r\n    toggleTransactionDetail() {\r\n      this.showTransactionDetail = !this.showTransactionDetail;\r\n    },\r\n    openKMeansDrawer() {\r\n      this.$nextTick(() => {\r\n        if (this.$refs.kmeansComponent) {\r\n          this.$refs.kmeansComponent.openDrawer();\r\n        } else {\r\n          console.error(\"KMeans component is not loaded or ref is not set correctly.\");\r\n        }\r\n      });\r\n    },\r\n    closeDetail() {\r\n      this.showTransactionDetail = false;\r\n    },\r\n    handleDropdownCommand(command) {\r\n      this.selectedDropdown = command; // 处理下拉菜单选择\r\n    },\r\n  },\r\n  setup() {\r\n    const showAllDates = ref(false);\r\n    const isDarkMode = ref(false);\r\n    const selectedAlgorithm = ref('levenshtein');\r\n    let jsonData = ref([]);\r\n    let worksheet = ref(null);\r\n    const parsedData = ref([]);\r\n    const legendData = ref([\r\n      {\r\n        id: 1,\r\n        label: 'Transaction Category',\r\n        children: []\r\n      }\r\n    ]);\r\n    const defaultProps = {\r\n      children: 'children',\r\n      label: 'label'\r\n    };\r\n\r\n    const selectedCategories = ref(new Set());\r\n    const selectedKeys = ref([]);\r\n    const legendTree = ref(null);\r\n    const containerRef = ref(null);\r\n    const selectedMapping = ref('none');\r\n    const showTransactionDetail = ref(false);\r\n    const selectedDropdown = ref(null);\r\n    const showMappingLegend = ref(true);\r\n\r\n    const detailVisible = ref(false);\r\n    const selectedDetails = ref({\r\n      date: '',\r\n      category: '',\r\n      subCategory: '',\r\n      debitAmount: '',\r\n      creditAmount: '',\r\n      sequence: '',\r\n    });\r\n    const selectedSimilarDetails = ref({\r\n      date: '',\r\n      sequence: '',\r\n      debitAmounts: [],\r\n      creditAmounts: []\r\n    });\r\n    const dailySequences = ref({});\r\n    const dailyAmounts = ref({});\r\n    const topSimilarSequences = ref([]);\r\n    const listAmounts = ref({});\r\n    const yearPositions = ref({});\r\n    const selectedOption = ref('category');\r\n\r\n    const algorithmDescriptions = {\r\n      'levenshtein': '<strong>Levenshtein Distance</strong>: Measures how many single-character edits (<span class = \"key-words\">insertions</span>, <span class = \"key-words\">deletions</span>, or <span class = \"key-words\">substitutions</span>) are needed to change one string into another.',\r\n      'damerau-levenshtein': '<strong>Damerau-Levenshtein Distance</strong>: Measures the number of single-character edits (<span class = \"key-words\">insertions</span>, <span class = \"key-words\">deletions</span>, <span class = \"key-words\">substitutions</span>, or <span class = \"key-words\">transpositions of two adjacent characters</span>) needed to change one string into another',\r\n      'hamming': '<strong>Hamming Distance</strong>: Counts the number of positions at which two strings of <span class = \"key-words\">equal length</span> have different characters.',\r\n      'jaro-winkler': '<strong>Jaro-Winkler Distance</strong>: Measures the similarity between two strings based on the <span class = \"key-words\">number and order</span> of matching characters. <span class = \"key-words\">Common prefixes</span> increase the similarity score.'\r\n    };\r\n\r\n    const selectedDescription = ref(algorithmDescriptions[selectedAlgorithm.value]);\r\n\r\n    watch(selectedAlgorithm, (newAlgorithm) => {\r\n      selectedDescription.value = algorithmDescriptions[newAlgorithm];\r\n      // console.log('algorithmDescriptions:', selectedDescription.value);\r\n\r\n      // 每次用户切换算法时，清空之前选择的相似序列\r\n      selectedSimilarDetails.value = null;\r\n    });\r\n\r\n    const fetchData = async (showAllDatesValue) => {\r\n      const selectedKeysBackup = [...selectedKeys.value]; // 备份选中状态\r\n      const data = await loadData();\r\n      jsonData.value = data.jsonData;\r\n      worksheet.value = data.worksheet;\r\n      const result = EventSequenceChart(jsonData.value, worksheet.value, showAllDatesValue, selectedCategories.value, selectedMapping.value);\r\n      parsedData.value = result.parsedData;\r\n      dailySequences.value = result.dailySequences;\r\n      dailyAmounts.value = result.dailyAmounts;\r\n      // console.log(\"dailyAmounts:\", dailyAmounts);\r\n\r\n      yearPositions.value = Object.fromEntries(\r\n        Object.entries(result.yearPositions).sort((a, b) => b[0] - a[0])\r\n      );\r\n\r\n      populateLegendData();\r\n      legendTree.value.setCheckedKeys(selectedKeysBackup); // 恢复选中状态\r\n    };\r\n\r\n    const updateTopSimilarSequences = () => {\r\n      if (selectedDetails.value && selectedDetails.value.date && selectedDetails.value.sequence) {\r\n        const selectedSequenceDate = selectedDetails.value.date;\r\n        const selectedSequence = selectedDetails.value.sequence;\r\n\r\n        // console.log(\"Selected Date:\", selectedSequenceDate);\r\n        // console.log(\"Selected Sequence:\", selectedSequence);\r\n\r\n        if (selectedSequence) {\r\n          const targetSequence = {\r\n            date: selectedSequenceDate,\r\n            sequence: selectedSequence,\r\n            debitAmounts: dailyAmounts.value[selectedSequenceDate].debitAmounts,\r\n            creditAmounts: dailyAmounts.value[selectedSequenceDate].creditAmounts\r\n          };\r\n\r\n          const allSequences = Object.keys(dailySequences.value)\r\n            .filter(date => date !== selectedSequenceDate) // 排除所选序列的日期\r\n            .map(date => ({\r\n              date,\r\n              sequence: dailySequences.value[date],\r\n              debitAmounts: dailyAmounts.value[date].debitAmounts,\r\n              creditAmounts: dailyAmounts.value[date].creditAmounts\r\n            }));\r\n\r\n          // console.log(\"All Sequences for Comparison:\", allSequences);\r\n\r\n          if (selectedOption.value === 'category') {\r\n            topSimilarSequences.value = findTopSimilarSequences(targetSequence, allSequences, selectedAlgorithm.value);\r\n            // console.log(\"Top Similar Sequences:\", topSimilarSequences.value);\r\n            // 这里取到的topSimilarSequences不是真的最相似序列list的信息，只是取了数据集中最晚的10个日期\r\n            // 在后面的handleUpdateTopSimilarSequences中才取到了真正的topSimilarSequences\r\n          } else if (selectedOption.value === 'amount') {\r\n            topSimilarSequences.value = findTopSimilarSequencesByAmount(targetSequence, allSequences);\r\n          } else if (selectedOption.value === 'combined') {\r\n            topSimilarSequences.value = findTopSimilarSequencesCombined(targetSequence, allSequences, selectedAlgorithm.value);\r\n          }\r\n\r\n          // console.log(\"Top Similar Sequences:\", topSimilarSequences.value);\r\n        }\r\n      } else {\r\n        console.error(\"Selected Details do not have the expected structure:\", selectedDetails.value);\r\n      }\r\n    };\r\n\r\n    watch(selectedOption, () => {\r\n      if (selectedDetails.value && selectedDetails.value.date && selectedDetails.value.sequence) {\r\n        updateTopSimilarSequences();\r\n        // console.log('Top Similar Sequences:', topSimilarSequences.value);\r\n      }\r\n    });\r\n\r\n    watch(selectedDetails, () => {\r\n      // console.log(\"selectedDetails changed:\", selectedDetails.value);\r\n      updateTopSimilarSequences();\r\n    });\r\n\r\n    const handleUpdateTopSimilarSequences = (newTopSimilarSequences) => {\r\n      topSimilarSequences.value = newTopSimilarSequences;\r\n      // console.log('Top Similar Sequences:', topSimilarSequences.value);\r\n      // 这里取到的topSimilarSequences才是真正最相似序列list的信息，已经经过排序过滤\r\n    };\r\n\r\n    watch(topSimilarSequences, (newVal) => {\r\n      if (newVal && dailyAmounts.value) {\r\n        const newListAmounts = {};\r\n        newVal.forEach(seq => {\r\n          if (dailyAmounts.value[seq.date]) {\r\n            newListAmounts[seq.date] = {\r\n              debitAmounts: dailyAmounts.value[seq.date].debitAmounts,\r\n              creditAmounts: dailyAmounts.value[seq.date].creditAmounts\r\n            };\r\n          }\r\n        });\r\n        listAmounts.value = newListAmounts;\r\n        // console.log(\"listAmounts:\", listAmounts.value);\r\n      }\r\n    });\r\n\r\n    const handleSelectSimilarSequence = (sequenceDetails) => {\r\n      selectedSimilarDetails.value = sequenceDetails;\r\n      // console.log(\"selectedSimilarDetails:\", selectedSimilarDetails.value);\r\n    };\r\n\r\n    const categoryMapping = {\r\n      'Daily expenses and consumption': 'Daily expenses & consumption',\r\n      'Financial management and transfers': 'Financial management & transfers',\r\n      'Housing and facilities': 'Housing & facilities',\r\n      'Income and investments': 'Income & investments',\r\n      'Insurance and Health': 'Insurance & Health',\r\n    };\r\n\r\n    const populateLegendData = () => {\r\n      const categories = [...Array.from(new Set(jsonData.value.map(d => d.Category ? d.Category.trim() : 'Null').filter(c => c !== 'Null'))).sort((a, b) => a.localeCompare(b))];\r\n\r\n      legendData.value[0].children = categories.map(category => ({\r\n        id: category,\r\n        label: categoryMapping[category] || category,\r\n        children: jsonData.value\r\n          .filter(d => d.Category === category)\r\n          .map(d => d.subCategory ? d.subCategory.trim() : 'Null')\r\n          .filter((value, index, self) => self.indexOf(value) === index)\r\n          .map(subCategory => ({\r\n            id: `${category}-${subCategory}`,\r\n            label: subCategory,\r\n            color: colorMap[subCategory] || 'transparent'\r\n          }))\r\n      }));\r\n    };\r\n\r\n    const handleCheck = (node, { checkedNodes, checkedKeys }) => {\r\n      selectedKeys.value = checkedKeys;\r\n      const selected = new Set(checkedNodes.filter(node => node.children == null).map(node => node.label));\r\n      selectedCategories.value = selected;\r\n      // console.log('selectedCategories', selectedCategories.value);\r\n\r\n      legendTree.value.setCheckedKeys(selectedKeys.value); // 恢复之前的选中状态\r\n      EventSequenceChart(jsonData.value, worksheet.value, showAllDates.value, selectedCategories.value, selectedMapping.value);\r\n    };\r\n\r\n    const showDetail = (event) => {\r\n      if (event.target.classList.contains('event-rect')) {\r\n        const transactionDate = event.target.__data__.date;\r\n        const category = event.target.__data__.category;\r\n        const subCategory = event.target.__data__.subCategory;\r\n        const debitAmount = event.target.__data__.debitAmount;\r\n        const creditAmount = event.target.__data__.creditAmount;\r\n        const sequence = dailySequences.value[transactionDate];\r\n\r\n        selectedDetails.value = {\r\n          date: transactionDate,\r\n          category: category,\r\n          subCategory: subCategory,\r\n          debitAmount: debitAmount,\r\n          creditAmount: creditAmount,\r\n          sequence: sequence,\r\n          debitAmounts: dailyAmounts.value[transactionDate].debitAmounts,\r\n          creditAmounts: dailyAmounts.value[transactionDate].creditAmounts\r\n        };\r\n\r\n        detailVisible.value = true;\r\n      }\r\n    };\r\n\r\n    watch(selectedMapping, (newMapping) => {\r\n      fetchData(showAllDates.value).then(() => {\r\n        legendTree.value.setCheckedKeys(selectedKeys.value); // 恢复之前的选中状态\r\n\r\n        // 清空旧图例\r\n        d3.select('.mapping-legend').selectAll('*').remove();\r\n\r\n        if (newMapping === 'height') {\r\n          HeightLegendChart('.mapping-legend');\r\n        } else if (newMapping === 'width') {\r\n          WidthLegendChart('.mapping-legend');\r\n        } else if (newMapping === 'area') {\r\n          AreaLegendChart('.mapping-legend');\r\n        } else {\r\n          // console.log('did not select amount mapping mode');\r\n        }\r\n\r\n      });\r\n\r\n      showMappingLegend.value = true;  // 切换到 mapping-legend\r\n    });\r\n\r\n    watch(selectedDropdown, () => {\r\n      showMappingLegend.value = false; // 切换到 average-info\r\n    });\r\n\r\n    onMounted(() => {\r\n      fetchData(showAllDates.value).then(() => {\r\n        const allKeys = legendData.value[0].children.flatMap(child => child.children.map(subChild => subChild.id));\r\n        const allLabels = legendData.value[0].children.flatMap(child => child.children.map(subChild => subChild.label));\r\n\r\n        legendTree.value.setCheckedKeys(allKeys);\r\n        selectedCategories.value = new Set(allLabels);\r\n        // console.log('selectedCategories11', selectedCategories);\r\n        selectedKeys.value = allKeys; // 初始状态下保存所有键值\r\n\r\n        legendTree.value.setCheckedKeys(selectedKeys.value); // 恢复之前的选中状态\r\n        const result = EventSequenceChart(jsonData.value, worksheet.value, showAllDates.value, selectedCategories.value, selectedMapping.value);\r\n        dailySequences.value = result.dailySequences;\r\n        yearPositions.value = result.yearPositions;\r\n        // console.log(\"dailySequences in onMounted:\", dailySequences.value);\r\n\r\n        // 绘制初始图例（如果映射选择为“height”）\r\n        if (selectedMapping.value === 'height') {\r\n          HeightLegendChart('.mapping-legend'); // 传入图例的容器选择器\r\n        } else if (selectedMapping.value === 'width') {\r\n          WidthLegendChart('.mapping-legend');\r\n        } else if (selectedMapping.value === 'area') {\r\n          AreaLegendChart('.mapping-legend');\r\n        }\r\n\r\n      });\r\n    });\r\n\r\n    const renderContent = (h, { node, data }) => {\r\n      return h('span', [\r\n        h('span', {\r\n          style: { backgroundColor: data.color || 'transparent', marginRight: '5px', width: '14px', height: '14px', display: 'inline-block', borderRadius: '50%' }\r\n        }),\r\n        h('span', { class: 'tree-node-text' }, node.label)\r\n      ]);\r\n    };\r\n\r\n    watch(showAllDates, (newVal) => {\r\n      fetchData(newVal).then(() => {\r\n        legendTree.value.setCheckedKeys(selectedKeys.value); // 恢复之前的选中状态\r\n        EventSequenceChart(jsonData.value, worksheet.value, showAllDates.value, selectedCategories.value, selectedMapping.value);\r\n      });\r\n    });\r\n\r\n    watch(selectedAlgorithm, () => {\r\n      if (detailVisible.value) {\r\n        updateTopSimilarSequences();\r\n      }\r\n      // findMostSimilarSequence(dailySequences, dailyAmounts, selectedOption.value, selectedAlgorithm.value)\r\n\r\n    });\r\n\r\n    watch(isDarkMode, (newVal) => {\r\n      const root = document.documentElement;\r\n      if (newVal) { //白天模式\r\n        root.style.setProperty('--text-color', '#606266');\r\n        root.style.setProperty('--bg-color', '#ffffff');\r\n        root.style.setProperty('--scrollbar-color', '#CDCDCD');\r\n        root.style.setProperty('--scrollbar-hover-color', '#C7C9CC');\r\n        root.style.setProperty('--month-header-color', '#F5F7FA');\r\n      } else {  //黑夜模式\r\n        root.style.setProperty('--text-color', '#CFD3DC');\r\n        root.style.setProperty('--bg-color', '#141414');\r\n        root.style.setProperty('--scrollbar-color', '#A3A6AD');\r\n        root.style.setProperty('--scrollbar-hover-color', '#E5EAF3');\r\n        root.style.setProperty('--month-header-color', '#555555');\r\n      }\r\n    });\r\n\r\n    const selectAll = () => {\r\n      const allKeys = legendData.value[0].children.flatMap(child => child.children.map(subChild => subChild.id));\r\n      selectedCategories.value = new Set(legendData.value[0].children.flatMap(child => child.children.map(subChild => subChild.label)));\r\n      legendTree.value.setCheckedKeys(allKeys);\r\n      selectedKeys.value = allKeys; // 更新所有选中的键值\r\n      EventSequenceChart(jsonData.value, worksheet.value, showAllDates.value, selectedCategories.value, selectedMapping.value);\r\n    };\r\n\r\n    const clearAll = () => {\r\n      selectedCategories.value = new Set();\r\n      legendTree.value.setCheckedKeys([]);\r\n      selectedKeys.value = []; // 清空选中的键值\r\n      EventSequenceChart(jsonData.value, worksheet.value, showAllDates.value, selectedCategories.value, selectedMapping.value);\r\n    };\r\n\r\n    const handleYearClick = (event) => {\r\n      event.preventDefault();\r\n      const target = event.target;\r\n      const href = target.getAttribute('href');\r\n      if (href && containerRef.value) {\r\n        const year = href.replace('#year-', '');\r\n        const position = yearPositions.value[year];\r\n        if (position !== undefined) {\r\n          containerRef.value.scrollTo({ top: position, behavior: 'smooth' });\r\n        }\r\n      }\r\n    };\r\n    // console.log(\"dailySequences:\", dailySequences);\r\n    // console.log(\"dailyAmounts:\", dailyAmounts);\r\n\r\n    return {\r\n      jsonData,\r\n      worksheet,\r\n      parsedData,\r\n      showAllDates,\r\n      isDarkMode,\r\n      selectedAlgorithm,\r\n      selectedMapping,\r\n      selectedOption,\r\n      selectedCategories,\r\n      updateTopSimilarSequences,\r\n      selectAll,\r\n      clearAll,\r\n      legendData,\r\n      defaultProps,\r\n      handleCheck,\r\n      legendTree,\r\n      renderContent,\r\n      dailySequences,\r\n      fetchData,\r\n      selectedDetails,\r\n      showDetail,\r\n      handleUpdateTopSimilarSequences,\r\n      topSimilarSequences,\r\n      yearPositions,\r\n      containerRef,\r\n      handleYearClick,\r\n      selectedDescription,\r\n      dailyAmounts,\r\n      listAmounts,\r\n      selectedSimilarDetails,\r\n      handleSelectSimilarSequence,\r\n      showTransactionDetail,\r\n      selectedDropdown,\r\n      showMappingLegend,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.custom-tree {\r\n  max-width: 600px;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  width: 280px;\r\n  /*padding-right: 30px;*/\r\n  border-right: 2px solid #E4E4E4;\r\n  background-color: inherit;  /* 继承父容器的背景色 */\r\n}\r\n\r\n.custom-tree >>> .el-tree-node__content {\r\n  height: 16px; /* 每个树节点内容的高度 */\r\n  font-size: 12px;\r\n}\r\n\r\n#user-option{\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  /*align-items: center;*/\r\n  gap: 10px;\r\n  height: 100%;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.up-half-page {\r\n  height: 65%;\r\n}\r\n\r\n.down-half-page {\r\n  height: 35%;\r\n  border: 2px solid #E4E4E4;\r\n  border-radius: 8px;\r\n}\r\n\r\n.up-half-page, .down-half-page{\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: left;\r\n  padding: 10px;\r\n}\r\n\r\n.el-switch {\r\n  display: inline-flex;\r\n  /*align-items: center;*/\r\n  justify-content: center;\r\n  width: 100px;\r\n  height: 25px;\r\n}\r\n\r\n.el-switch >>> .el-switch__core {\r\n  height: 100% !important;\r\n  width: 100% !important;\r\n  border-radius: 20px;\r\n}\r\n\r\n</style>\r\n","// //Daily expenses and consumption\r\n// const color1 = \"#FFF3C9\";\r\n// const color2 = \"#FEE895\";\r\n// const color3 = \"#FFDE5D\";\r\n// const color4 = \"#FFD601\";\r\n// const color5 = \"#D4B004\";\r\n// const color6 = \"#A98C00\";\r\n// const color7 = \"#957D01\";\r\n// const color8 = \"#F3F6CB\";\r\n//\r\n// //Financial management and transfers\r\n// const color9 = \"#C5E4D4\";\r\n// const color10 = \"#91D2B2\";\r\n// const color11 = \"#59BE92\";\r\n// const color12 = \"#07B173\";\r\n//\r\n// //Housing and facilities\r\n// const color13 = \"#BEC4E3\";\r\n// const color14 = \"#8A9ACE\";\r\n// const color15 = \"#5576BC\";\r\n// const color16 = \"#0F5CAC\";\r\n// const color17 = \"#114B94\";\r\n//\r\n// //Income and investments\r\n// const color18 = \"#FDCDBF\";\r\n// const color19 = \"#F9A688\";\r\n// const color20 = \"#F47C5A\";\r\n// const color21 = \"#F14D31\";\r\n// const color22= \"#C74029\";\r\n// const color23 = \"#9F3118\";\r\n// const color24 = \"#902711\";\r\n//\r\n// //Insurance and Health\r\n// const color25 = \"#CEBFDE\";\r\n// const color26 = \"#AE89BF\";\r\n//\r\n// //Other miscellaneous\r\n// const color27 = \"#FEDCBC\";\r\n// const color28 = \"#FDC38C\";\r\n// const color29 = \"#F9A757\";\r\n// const color30 = \"#F69520\";\r\n\r\n\r\n//Daily expenses and consumption\r\nconst color1 = \"#B8ECB8\";\r\nconst color2 = \"#8CDC8C\";\r\nconst color3 = \"#5CC45C\";\r\nconst color4 = \"#39A939\";\r\nconst color5 = \"#1F911F\";\r\nconst color6 = \"#0A730A\";\r\nconst color7 = \"#005500\";\r\nconst color8 = \"#003400\";\r\n\r\n//Financial management and transfers\r\nconst color9 = \"#F5F573\";\r\nconst color10 = \"#D3D347\";\r\nconst color11 = \"#B5B526\";\r\nconst color12 = \"#8F8F0D\";\r\n\r\n//Housing and facilities\r\nconst color13 = \"#FFE1A4\";\r\nconst color14 = \"#FFCF70\";\r\nconst color15 = \"#FFAA00\";\r\nconst color16 = \"#D99100\";\r\nconst color17 = \"#A76F00\";\r\n\r\n//Income and investments\r\nconst color18 = \"#FFC6C6\";\r\nconst color19 = \"#FFA3A3\";\r\nconst color20 = \"#F57373\";\r\nconst color21 = \"#D34747\";\r\nconst color22= \"#B52626\";\r\nconst color23 = \"#8F0D0D\";\r\nconst color24 = \"#6A0000\";\r\n\r\n//Insurance and Health\r\nconst color25 = \"#BB80DC\";\r\nconst color26 = \"#843AAD\";\r\n\r\n//Other miscellaneous\r\nconst color27 = \"#85A0DD\";\r\nconst color28 = \"#5F7EC6\";\r\nconst color29 = \"#4061AD\";\r\nconst color30 = \"#264A9C\";\r\n\r\n\r\n//24色轮(红/紫交换)\r\nexport const colorMap = {\r\n  //Daily expenses and consumption\r\n  \"Groceries\": color1,\r\n  \"Entertainment\": color2,\r\n  \"Amazon\": color3,\r\n  \"Dine Out\": color4,\r\n  \"Travel\": color5,\r\n  \"Fitness\": color6,\r\n  \"Food Shopping\": color7,\r\n  \"Clothes\": color8,\r\n  //Financial management and transfers\r\n  \"Savings\": color9,\r\n  \"Bills\": color10,\r\n  \"Cash\": color11,\r\n  \"Account transfer\": color12,\r\n  //Housing and facilities\r\n  \"Home Improvement\": color13,\r\n  \"Hotels\": color14,\r\n  \"Services/Home Improvement\": color15,\r\n  \"Mortgage\": color16,\r\n  \"Rent\": color17,\r\n  //Income and investments\r\n  \"Investment\": color18,\r\n  \"Supplementary Income\": color19,\r\n  \"Travel Reimbursement\": color20,\r\n  \"Safety Deposit Return\": color21,\r\n  \"Interest\": color22,\r\n  \"Paycheck\": color23,\r\n  \"Purchase of uk.eg.org\": color24,\r\n  //Insurance and Health\r\n  \"Insurance\": color25,\r\n  \"Health\": color26,\r\n  //Other miscellaneous\r\n  \"Others\": color27,\r\n  \"Null\": color28,\r\n  \"Services\": color29,\r\n  \"Other Shopping\": color30,\r\n};\r\n\r\nexport const colorMappingNew = {\r\n  //Daily expenses and consumption\r\n  \"A\": color1,\r\n  \"B\": color2,\r\n  \"C\": color3,\r\n  \"D\": color4,\r\n  \"E\": color5,\r\n  \"F\": color6,\r\n  \"G\": color7,\r\n  \"H\": color8,\r\n  //Financial management and transfers\r\n  \"I\": color9,\r\n  \"J\": color10,\r\n  \"K\": color11,\r\n  \"L\": color12,\r\n  //Housing and facilities\r\n  \"M\": color13,\r\n  \"N\": color14,\r\n  \"O\": color15,\r\n  \"P\": color16,\r\n  \"Q\": color17,\r\n  //Income and investments\r\n  \"R\": color18,\r\n  \"S\": color19,\r\n  \"T\": color20,\r\n  \"U\": color21,\r\n  \"V\": color22,\r\n  \"W\": color23,\r\n  \"X\": color24,\r\n  //Insurance and Health\r\n  \"Y\": color25,\r\n  \"Z\": color26,\r\n  //Other miscellaneous\r\n  \"1\": color27,\r\n  \"2\": color28,\r\n  \"3\": color29,\r\n  \"4\": color30,\r\n};\r\n","// export const categoryMapping = {\r\n//   'Daily expenses and consumption': '5',\r\n//   'Financial management and transfers': '6',\r\n//   'Housing and facilities': '7',\r\n//   'Income and investments': '8',\r\n//   'Insurance and Health': '9',\r\n//   'Other miscellaneous': '0'\r\n// };\r\n\r\nexport const subCategoryMapping = {\r\n  'Groceries': 'A',\r\n  'Entertainment': 'B',\r\n  'Amazon': 'C',\r\n  'Dine Out': 'D',\r\n  'Travel': 'E',\r\n  'Fitness': 'F',\r\n  'Food Shopping': 'G',\r\n  'Clothes': 'H',\r\n  'Savings': 'I',\r\n  'Bills': 'J',\r\n  'Cash': 'K',\r\n  'Account transfer': 'L',\r\n  'Home Improvement': 'M',\r\n  'Hotels': 'N',\r\n  'Services/Home Improvement': 'O',\r\n  'Mortgage': 'P',\r\n  'Rent': 'Q',\r\n  'Investment': 'R',\r\n  'Supplementary Income': 'S',\r\n  'Travel Reimbursement': 'T',\r\n  'Safety Deposit Return': 'U',\r\n  'Interest': 'V',\r\n  'Paycheck': 'W',\r\n  'Purchase of uk.eg.org': 'X',\r\n  'Insurance': 'Y',\r\n  'Health': 'Z',\r\n  'Others': '1',\r\n  'Null': '2',\r\n  'Services': '3',\r\n  'Other Shopping': '4'\r\n};\r\n\r\n//将字符映射回subCategory\r\nexport const charToSubCategory = Object.fromEntries(Object.entries(subCategoryMapping).map(([key, value]) => [value, key]));\r\n","// import * as d3 from 'd3';\r\n\r\n// 每个区间在图中对应的高度（共46个值）\r\nexport const segmentHeights =\r\n  [5, 15, 25, 35, 45, 55, 65, 75, 85, 95, 105, 115,\r\n  125, 135, 145, 155, 165, 175, 185, 195, 205,\r\n  215, 225, 235, 245, 255, 265, 275, 285, 295,\r\n  305, 315, 325, 335, 345, 355, 365, 375, 385,\r\n  395, 405, 415, 425, 435, 445, 455];\r\n\r\n// 金额区间的上限值（共46个值）\r\nexport const segments =\r\n  [1, 10, 50, 100, 200, 300, 400, 500, 600, 700, 800, 900,\r\n  1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000,\r\n  5500 , 6000,  6500,  7000,  7500,  8000,  8500,  9000,  9500,\r\n  10000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000,\r\n  55000, 60000, 65000, 70000, 75000, 80000, 85000];\r\n\r\nexport function mapHeight(parsedData) {\r\n  parsedData.forEach(d => {\r\n    const amount = d.debitAmount + d.creditAmount;\r\n    // 找到金额所对应的分段，并获取相应的高度\r\n    const segmentIndex = segments.findIndex(limit => amount <= limit);\r\n    d.mappedHeight = segmentIndex !== -1 ? segmentHeights[segmentIndex] : segmentHeights[segmentHeights.length - 1];\r\n  });\r\n\r\n  return parsedData;\r\n}\r\n\r\n\r\n// 每个区间在图中对应的宽度（共46个值）\r\nexport const segmentWidths = [\r\n  5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60,\r\n  65, 70, 75, 80, 85, 90, 95, 100, 105,\r\n  110, 115, 120, 125, 130, 135, 140, 145, 150,\r\n  155, 160, 165, 170, 175, 180, 185, 190, 195,\r\n  200, 205, 210, 215, 220, 225, 230\r\n];\r\n\r\n// 金额区间的上限值（共46个值）\r\nexport const widthSegments = [\r\n  1, 10, 50, 100, 200, 300, 400, 500, 600, 700, 800, 900,\r\n  1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000,\r\n  5500, 6000, 6500, 7000, 7500, 8000, 8500, 9000, 9500,\r\n  10000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000,\r\n  55000, 60000, 65000, 70000, 75000, 80000, 85000\r\n];\r\n\r\nexport function mapWidth(parsedData) {\r\n  parsedData.forEach(d => {\r\n    const amount = d.debitAmount + d.creditAmount;\r\n    // 找到金额所对应的分段，并获取相应的宽度\r\n    const segmentIndex = widthSegments.findIndex(limit => amount <= limit);\r\n    d.mappedWidth = segmentIndex !== -1 ? segmentWidths[segmentIndex] : segmentWidths[segmentWidths.length - 1];\r\n  });\r\n\r\n  return parsedData;\r\n}\r\n\r\n\r\n// 映射区间的面积大小（单位：平方像素），共46个值\r\nexport const areaSizes = [\r\n  50, 100, 200, 300, 400, 500, 600, 700, 800, 900,\r\n  1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000, 5500,\r\n  6000, 6500, 7000, 7500, 8000, 8500, 9000, 9500, 10000, 10500,\r\n  11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000, 20000,\r\n  21000, 22000, 23000, 24000, 25000, 26000\r\n];\r\n\r\n// 金额区间的上限值（共46个值）\r\nexport const areaSegments = [\r\n  1, 10, 50, 100, 200, 300, 400, 500, 600, 700, 800, 900,\r\n  1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000,\r\n  5500, 6000, 6500, 7000, 7500, 8000, 8500, 9000, 9500,\r\n  10000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000,\r\n  55000, 60000, 65000, 70000, 75000, 80000, 85000\r\n];\r\n\r\n\r\nexport function mapArea(parsedData) {\r\n  // 更新每个交易的面积、宽度和高度\r\n  parsedData.forEach(d => {\r\n    const amount = d.debitAmount + d.creditAmount;\r\n    // 找到金额所对应的分段，并获取相应的面积大小\r\n    const segmentIndex = areaSegments.findIndex(limit => amount <= limit);\r\n    const area = segmentIndex !== -1 ? areaSizes[segmentIndex] : areaSizes[areaSizes.length - 1];\r\n\r\n    // 设置宽度和高度为面积的平方根\r\n    d.mappedHeight = Math.sqrt(area); // 高度为面积的平方根\r\n    d.mappedWidth = Math.sqrt(area); // 宽度为面积的平方根\r\n  });\r\n\r\n  return parsedData;\r\n}\r\n","import * as d3 from 'd3';\r\nimport d3Tip from 'd3-tip';\r\nimport { colorMap } from '@/services/colorMapping';\r\nimport { subCategoryMapping } from '@/services/StringMapping';\r\nimport { mapHeight, mapWidth, mapArea } from '@/services/sizeMapping';\r\n\r\nexport function EventSequenceChart(data, worksheet, showAllDates = false, selectedCategories = new Set(), selectedMapping = 'none') {\r\n  //console.log(\"EventSequenceChart data:\", data);\r\n  // console.log(\"EventSequenceChart selectedMapping:\", selectedMapping);\r\n\r\n  let parsedData = data.map((d, index) => {\r\n    let cellAddress = `B${index + 2}`;\r\n    let cell = worksheet[cellAddress];\r\n    let dateStr = d[\"Transaction Date\"];\r\n    let formattedDate;\r\n\r\n    if (cell && cell.t === 'n') {\r\n      const date = new Date((cell.v - 25569) * 86400 * 1000);\r\n      let month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n      let day = date.getDate().toString().padStart(2, '0');\r\n      let year = date.getFullYear();\r\n      formattedDate = `${year}-${day}-${month}`;\r\n    } else if (cell && cell.z === 'mm/dd/yyyy') {\r\n      let dateParts = dateStr.split(\"/\");\r\n      if (dateParts.length === 3) {\r\n        let month = dateParts[0].padStart(2, '0');\r\n        let day = dateParts[1].padStart(2, '0');\r\n        let year = dateParts[2];\r\n        formattedDate = `${year}-${month}-${day}`;\r\n      } else {\r\n        formattedDate = dateStr;\r\n      }\r\n    } else {\r\n      dateStr = dateStr.toString();\r\n      let dateParts = dateStr.split(\"/\");\r\n      if (dateParts.length === 3) {\r\n        let day = dateParts[0].padStart(2, '0');\r\n        let month = dateParts[1].padStart(2, '0');\r\n        let year = dateParts[2];\r\n        formattedDate = `${year}-${month}-${day}`;\r\n      } else {\r\n        formattedDate = dateStr;\r\n      }\r\n    }\r\n\r\n    const category = d[\"Category\"] ? d[\"Category\"].trim() : 'Null';\r\n    const subCategory = d[\"subCategory\"] ? d[\"subCategory\"].trim() : 'Null';\r\n    const debitAmount = d[\"Debit Amount\"] ? d[\"Debit Amount\"] : 0;\r\n    const creditAmount = d[\"Credit Amount\"] ? d[\"Credit Amount\"] : 0;\r\n    const transactionNumber = d[\"Transaction Number\"] ? d[\"Transaction Number\"] : 0;\r\n\r\n    return {\r\n      date: formattedDate,\r\n      category: category,\r\n      subCategory: subCategory,\r\n      debitAmount: debitAmount,\r\n      creditAmount: creditAmount,\r\n      transactionNumber: transactionNumber\r\n    };\r\n  }).filter(d => d.date);\r\n\r\n  // console.log('parsedData', parsedData);\r\n\r\n  if (selectedMapping === 'height') {\r\n    parsedData = mapHeight(parsedData);\r\n  } else if (selectedMapping === 'width') {\r\n    parsedData = mapWidth(parsedData);\r\n  } else if (selectedMapping === 'area') {\r\n    parsedData = mapArea(parsedData);\r\n  }\r\n\r\n  const nestedData = d3.group(parsedData, d => d.date);\r\n  const allDateArray = Array.from(nestedData.keys()).sort((a, b) => new Date(b) - new Date(a));\r\n  const startDate = new Date(allDateArray[allDateArray.length - 1]);\r\n  const endDate = new Date(allDateArray[0]);\r\n\r\n  let allDates = [];\r\n  for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {\r\n    allDates.push(new Date(d).toISOString().split('T')[0]);\r\n  }\r\n  allDates.push(endDate.toISOString().split('T')[0]);\r\n  allDates.sort((a, b) => new Date(b) - new Date(a));\r\n\r\n  const subCategories = Array.from(new Set(parsedData.map(d => d.subCategory))).sort((a, b) => a.localeCompare(b));\r\n\r\n  const color = d3.scaleOrdinal()\r\n    .domain(subCategories)\r\n    .range(subCategories.map(subCategory => colorMap[subCategory] || \"#000000\")); // 默认颜色为黑色\r\n\r\n  d3.select(\"#event-sequence-header .legend-container\").remove();\r\n\r\n  function updateCellsVisibility() {\r\n    d3.selectAll('.event-rect')\r\n      .style('opacity', d => selectedCategories.has(d.subCategory) ? 1 : 0.1);\r\n  }\r\n\r\n  const margin = { top: 20, right: 320, bottom: 20, left: 200 };\r\n  // const containerWidth = document.getElementById('event-sequence').clientWidth  || 700;\r\n  const dayHeight = 20;\r\n  const cellWidth = 15;\r\n\r\n  let useDates = showAllDates ? allDates : Array.from(nestedData.keys());\r\n\r\n  const containerHeight = Math.max((useDates.length + 300) * (dayHeight + 25) + margin.top + margin.bottom, 800);\r\n  // console.log(\"useDates length:\", useDates.length);\r\n  // console.log(\"Calculated containerHeight:\", containerHeight);\r\n\r\n  // 初始化 d3-tip\r\n  const tip = d3Tip()\r\n    .attr('class', 'd3-tip')\r\n    .offset([-10, 0])\r\n    .html(d => {\r\n      let tooltipContent = `\r\n      <span>Date:</span> <span>${d.date}</span><br>\r\n      <span>Category:</span> <span>${d.category}</span><br>\r\n      <span>SubCategory:</span> <span>${d.subCategory}</span><br>\r\n    `;\r\n\r\n      // Debit Amount 和 Credit Amount 为 0 时不显示\r\n      if (d.debitAmount !== 0) {\r\n        tooltipContent += `<span>Debit Amount:</span> <span>${d.debitAmount}</span><br>`;\r\n      }\r\n\r\n      if (d.creditAmount !== 0) {\r\n        tooltipContent += `<span>Credit Amount:</span> <span>${d.creditAmount}</span>`;\r\n      }\r\n\r\n      return tooltipContent;\r\n    });\r\n\r\n  d3.select(\"#event-sequence svg\").remove();\r\n\r\n  const svg = d3.select(\"#event-sequence\")\r\n    .append(\"svg\")\r\n    .attr(\"width\", 750)\r\n    .attr(\"height\", containerHeight)\r\n    .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`)\r\n    .call(tip);\r\n\r\n  let index = 0;\r\n  const existingDates = new Set(nestedData.keys());\r\n\r\n  const dailySequences = {};\r\n  const dailyAmounts = {};\r\n  let previousYear = null;\r\n  const yearPositions = {};\r\n\r\n  useDates.forEach(date => {\r\n    const year = new Date(date).getFullYear();\r\n\r\n    if (year !== previousYear) {\r\n      if (index != 0) {\r\n        index += dayHeight;  //给每一年起始位置来一行间隔\r\n      }\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0, ${index})`)\r\n        .append(\"text\")\r\n        .attr(\"class\", \"year-label\")\r\n        .attr(\"id\", `year-${year}`) // 添加锚点ID\r\n        .attr(\"x\", -135)\r\n        .attr(\"y\", dayHeight / 2)\r\n        .attr(\"dy\", \"0.35em\")\r\n        .attr(\"text-anchor\", \"start\")\r\n        .text(`${year}`);\r\n\r\n      yearPositions[year] = index;\r\n      previousYear = year;\r\n      index += dayHeight; // 增加 index 以确保年份文本占据整行\r\n    }\r\n    const dayOfWeek = new Date(date).toLocaleDateString('en-US', { weekday: 'long' }).substring(0, 2);\r\n\r\n    const transactions = nestedData.get(date) || [];\r\n    const maxRectHeight = (selectedMapping === 'height' || selectedMapping === 'area') ? d3.max(transactions, d => d.mappedHeight) || dayHeight : dayHeight;\r\n    const rowHeight = (selectedMapping === 'height' || selectedMapping === 'area') ? maxRectHeight + 2 : dayHeight; // 增加一些间隔\r\n\r\n    const g = svg.append(\"g\")\r\n      .attr(\"transform\", `translate(0, ${index})`);\r\n\r\n    if (existingDates.has(date)) {\r\n      transactions.sort((b, a) => a.transactionNumber - b.transactionNumber);\r\n\r\n      // 将每个交易的子类别拼接成字符串\r\n      let sequence = transactions.map(t => {\r\n        const subCategoryCode = subCategoryMapping[t.subCategory] || '0';\r\n        return `${subCategoryCode}`;\r\n      }).join(\"\");\r\n\r\n      dailySequences[date] = sequence;\r\n      dailyAmounts[date] = {\r\n        debitAmounts: transactions.map(t => t.debitAmount),\r\n        creditAmounts: transactions.map(t => t.creditAmount)\r\n      };\r\n\r\n      g.selectAll(\"rect\")\r\n        .data(transactions)\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"x\", (d, i) => {\r\n          if (selectedMapping === 'width' || selectedMapping === 'area') {\r\n            const widths = transactions.slice(0, i).map(t => t.mappedWidth || cellWidth);\r\n            return widths.reduce((acc, w) => acc + w, -80);\r\n          } else {\r\n            return i * cellWidth - 80;\r\n          }\r\n        })\r\n        .attr(\"y\", d => {\r\n          if (selectedMapping === 'height') {\r\n            return maxRectHeight - d.mappedHeight; // 底部对齐\r\n          } else if (selectedMapping === 'area') {\r\n            return (maxRectHeight - d.mappedHeight) / 2; // 中心对齐\r\n          } else {\r\n            return 0; // 顶部对齐\r\n          }\r\n        })\r\n        .attr(\"width\", d => selectedMapping === 'width' || selectedMapping === 'area' ? d.mappedWidth : cellWidth)\r\n        .attr(\"height\", d => selectedMapping === 'height' || selectedMapping === 'area' ? d.mappedHeight : dayHeight - 2)\r\n        .attr(\"class\", \"event-rect\")\r\n        .attr(\"fill\", d => color(d.subCategory))\r\n        .on('mouseover', function(event, d) {\r\n          tip.show(d, this);\r\n        })\r\n        .on('mouseout', function(event, d) {\r\n          tip.hide(d, this);\r\n        });\r\n    }\r\n\r\n    const textYOffset = (selectedMapping === 'height')\r\n      ? maxRectHeight\r\n      : (selectedMapping === 'area' ? maxRectHeight / 2 : dayHeight / 2);\r\n\r\n    g.append(\"text\")\r\n      .attr(\"class\", \"text-style\")\r\n      .attr(\"x\", -135)\r\n      .attr(\"y\", textYOffset)\r\n      .attr(\"dy\", selectedMapping === 'height' ? null : \"0.35em\")\r\n      .attr(\"text-anchor\", \"start\")\r\n      .text(date.slice(5)); // 只输出 \"MM-DD\"\r\n\r\n    g.append(\"rect\")\r\n      .attr(\"x\", -185)\r\n      .attr(\"y\", textYOffset - 10)\r\n      .attr(\"width\", 60)\r\n      .attr(\"height\", 20)\r\n      .attr(\"fill\", \"none\");\r\n\r\n    g.append(\"text\")\r\n      .attr(\"class\", \"text-style\")\r\n      .attr(\"x\", -160)\r\n      .attr(\"y\", textYOffset)\r\n      .attr(\"dy\", selectedMapping === 'height' ? null : \"0.35em\")\r\n      .attr(\"text-anchor\", \"middle\")  // 中心对齐\r\n      .text(dayOfWeek);\r\n\r\n    index += rowHeight; // 根据当前行的高度调整 index\r\n  });\r\n\r\n  // console.log(\"Final index value:\", index);\r\n\r\n  updateCellsVisibility();\r\n\r\n  d3.select(\"#select-all\").on(\"click\", () => {\r\n    selectedCategories = new Set(subCategories);\r\n    updateCellsVisibility();\r\n  });\r\n\r\n  d3.select(\"#clear-all\").on(\"click\", () => {\r\n    selectedCategories = new Set();\r\n    updateCellsVisibility();\r\n  });\r\n\r\n  // 计算交易序列的频率\r\n  //const sequenceFrequencies = calculateSequenceFrequency(dailySequences);\r\n  //console.log(\"sequenceFrequencies:\", sequenceFrequencies);\r\n\r\n  // 找出相似的交易序列\r\n  //const similarSequences = findSimilarSequences(sequenceFrequencies);\r\n  //console.log(\"similarSequences:\", similarSequences);\r\n\r\n  // console.log(\"dailySequences:\", dailySequences);\r\n  // console.log(\"dailyAmounts:\", dailyAmounts);\r\n  return { dailySequences, dailyAmounts, yearPositions, parsedData };\r\n}\r\n","import * as d3 from 'd3';\r\nimport '@/assets/global.css';\r\nimport { segmentHeights, segments, segmentWidths, widthSegments, areaSizes, areaSegments } from '@/services/sizeMapping';\r\n\r\nexport function HeightLegendChart(containerSelector) {\r\n  const width = 330;\r\n  const height = 455; // 这个高度必须和映射高度区间的最大值完全一致\r\n  const margin = { top: 40, right: 20, bottom: 60, left: 80 }; // 增加顶部和底部间距为轴标题留出空间\r\n\r\n  // 创建 SVG 元素\r\n  const svg = d3.select(containerSelector)\r\n    .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n    .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n  // 定义层数\r\n  const numLayers = 5;\r\n  const barsPerLayer = Math.ceil(segmentHeights.length / numLayers); // 每层的条形图数量\r\n\r\n  // 将数据分层\r\n  const layers = Array.from({ length: numLayers }, (_, layerIndex) => {\r\n    return {\r\n      heights: segmentHeights.slice(layerIndex * barsPerLayer, (layerIndex + 1) * barsPerLayer),\r\n      segments: segments.slice(layerIndex * barsPerLayer, (layerIndex + 1) * barsPerLayer),\r\n      indices: Array.from({ length: barsPerLayer }, (_, i) => i + 1)\r\n    };\r\n  });\r\n\r\n  // 定义横轴和纵轴的比例尺\r\n  const x = d3.scaleBand()\r\n    .domain(layers[0].indices) // 使用索引作为分类\r\n    .range([0, width])\r\n    .padding(0.1);\r\n\r\n  const y = d3.scaleLinear()\r\n    .domain([0, d3.max(segmentHeights)])\r\n    .range([height, 0]);\r\n\r\n  // 创建横轴和纵轴\r\n  const xAxis = d3.axisBottom(x)\r\n    .tickFormat(() => \"\");  // 初始化时不显示任何文字\r\n\r\n  const yAxis = d3.axisLeft(y);\r\n\r\n  // 添加纵轴到 SVG\r\n  svg.append(\"g\")\r\n    .attr(\"class\", \"y-axis\")\r\n    .call(yAxis);\r\n\r\n  // 添加 y 轴标题作为 SVG 的一部分\r\n  svg.append(\"text\")\r\n    .attr(\"class\", \"y-axis-title\")\r\n    .attr(\"x\", -margin.left / 2) // 使标题位于 y 轴上方居中\r\n    .attr(\"y\", -20) // 位置调整\r\n    .style(\"text-anchor\", \"start\")\r\n    .style(\"font-size\", \"12px\")\r\n    .text(\"Mapping height (unit: px)\");\r\n\r\n  // 添加横轴到 SVG\r\n  const xAxisGroup = svg.append(\"g\")\r\n    .attr(\"class\", \"x-axis\")\r\n    .attr(\"transform\", `translate(0,${height})`)\r\n    .call(xAxis);\r\n\r\n  // 添加 x 轴标题作为 SVG 的一部分\r\n  svg.append(\"text\")\r\n    .attr(\"class\", \"x-axis-title\")\r\n    .attr(\"x\", width / 2)\r\n    .attr(\"y\", height + margin.bottom - 20)\r\n    .style(\"text-anchor\", \"middle\")\r\n    .style(\"font-size\", \"12px\")\r\n    .text(\"Transaction amount (unit: BGP)\");\r\n\r\n  // 按从后到前的顺序绘制每层的条形图\r\n  layers.reverse().forEach((layer, layerIndex) => {\r\n    svg.selectAll(`.bar-layer-${layerIndex}`)\r\n      .data(layer.heights)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"class\", `bar-layer-${layerIndex}`)\r\n      .attr(\"x\", (d, i) => x(i + 1))  // 使用相同的 x 位置\r\n      .attr(\"y\", d => y(d))\r\n      .attr(\"width\", x.bandwidth())\r\n      .attr(\"height\", d => height - y(d))\r\n      .attr(\"fill\", () => {\r\n        switch (layerIndex) {\r\n          // 注意是倒着画的，先画最后一层，最后画第1层\r\n          case 0: return \"#8F5E0D\"; // 第5层颜色\r\n          case 1: return \"#B57F26\"; // 第4层颜色\r\n          case 2: return \"#D39E47\"; // 第3层颜色\r\n          case 3: return \"#F5C473\"; // 第2层颜色\r\n          case 4: return \"#FFDCA3\"; // 第1层颜色\r\n          default: return \"#cccccc\"; // 默认颜色（不会用到）\r\n        }\r\n      })\r\n      .attr(\"opacity\", 1) // 适当设置透明度使其可见叠加效果\r\n      .on(\"mouseover\", function() {\r\n        // 鼠标悬浮时降低其他层的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 0);\r\n        d3.selectAll(`.bar-layer-${layerIndex}`)\r\n          .attr(\"opacity\", 1); // 高亮当前层\r\n\r\n        // 更新 X 轴的刻度显示为当前层对应的 segments\r\n        xAxis.tickFormat((d, i) => {\r\n          const segmentIndex = (numLayers - layerIndex - 1) * barsPerLayer + i;\r\n          return segmentIndex < segments.length ? `${segments[segmentIndex]}` : '';\r\n        });\r\n        xAxisGroup.call(xAxis);\r\n      })\r\n      .on(\"mouseout\", function() {\r\n        // 鼠标移出时恢复所有层的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 1);\r\n\r\n        // 清除 X 轴的刻度显示\r\n        xAxis.tickFormat(() => \"\");\r\n        xAxisGroup.call(xAxis);\r\n      });\r\n\r\n    // 按相同的顺序为每个柱子添加文本\r\n    svg.selectAll(`.label-layer-${layerIndex}`)\r\n      .data(layer.heights)\r\n      .enter()\r\n      .append(\"text\")\r\n      .attr(\"class\", `label-layer-${layerIndex}`)\r\n      .attr(\"x\", (d, i) => x(i + 1) + x.bandwidth() / 2)\r\n      .attr(\"y\", d => y(d) - 10)\r\n      .attr(\"dy\", \".75em\")\r\n      .text((d, i) => {\r\n        const segmentIndex = (numLayers - layerIndex - 1) * barsPerLayer + i;\r\n        return segmentIndex < segments.length ? segments[segmentIndex] : '';\r\n      })\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"font-size\", \"10px\")\r\n      .on(\"mouseover\", function() {\r\n        // 同步高亮文本所在的层\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 0);\r\n        d3.selectAll(`.bar-layer-${layerIndex}`)\r\n          .attr(\"opacity\", 1);\r\n\r\n        // 更新 X 轴的刻度显示为当前层对应的 segments\r\n        xAxis.tickFormat((d, i) => {\r\n          const segmentIndex = (numLayers - layerIndex - 1) * barsPerLayer + i;\r\n          return segmentIndex < segments.length ? `${segments[segmentIndex]}` : '';\r\n        });\r\n        xAxisGroup.call(xAxis);\r\n      })\r\n      .on(\"mouseout\", function() {\r\n        // 鼠标移出时恢复所有层的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 1);\r\n\r\n        // 清除 X 轴的刻度显示\r\n        xAxis.tickFormat(() => \"\");\r\n        xAxisGroup.call(xAxis);\r\n      });\r\n  });\r\n}\r\n\r\nexport function WidthLegendChart(containerSelector) {\r\n  const width = 230; // 这个宽度必须和映射宽度区间的最大值完全一致\r\n  const height = 300;\r\n  const margin = { top: 50, right: 20, bottom: 50, left: 70 };\r\n\r\n  // 创建SVG元素\r\n  const svg = d3.select(containerSelector)\r\n    .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n    .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n  // 定义层数\r\n  const numLayers = 5;\r\n  const barsPerLayer = Math.ceil(segmentWidths.length / numLayers); // 每层的条形图数量\r\n\r\n  // 将数据分层\r\n  const layers = Array.from({ length: numLayers }, (_, layerIndex) => {\r\n    return {\r\n      widths: segmentWidths.slice(layerIndex * barsPerLayer, (layerIndex + 1) * barsPerLayer),\r\n      segments: widthSegments.slice(layerIndex * barsPerLayer, (layerIndex + 1) * barsPerLayer),\r\n      indices: Array.from({ length: barsPerLayer }, (_, i) => i + 1)\r\n    };\r\n  });\r\n\r\n  // 定义横轴和纵轴的比例尺\r\n  const x = d3.scaleLinear()\r\n    .domain([0, d3.max(segmentWidths)])\r\n    .range([0, width]);\r\n\r\n  const y = d3.scaleBand()\r\n    .domain(layers[0].indices) // 使用索引作为分类\r\n    .range([0, height])\r\n    .padding(0.1);\r\n\r\n  // 创建横轴和纵轴\r\n  const xAxis = d3.axisBottom(x);\r\n  const yAxis = d3.axisLeft(y)\r\n    .tickFormat(() => \"\"); // 初始化时不显示任何文字\r\n\r\n  // 添加横轴到 SVG\r\n  svg.append(\"g\")\r\n    .attr(\"class\", \"x-axis\")\r\n    .attr(\"transform\", `translate(0,${height})`)\r\n    .call(xAxis);\r\n\r\n  // 添加纵轴到 SVG\r\n  const yAxisGroup = svg.append(\"g\")\r\n    .attr(\"class\", \"y-axis\")\r\n    .call(yAxis);\r\n\r\n  // 按从后到前的顺序绘制每层的条形图\r\n  layers.reverse().forEach((layer, layerIndex) => {\r\n    svg.selectAll(`.bar-layer-${layerIndex}`)\r\n      .data(layer.widths)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"class\", `bar-layer-${layerIndex}`)\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", (d, i) => y(i + 1))  // 使用相同的 y 位置\r\n      .attr(\"width\", d => x(d))\r\n      .attr(\"height\", y.bandwidth())\r\n      .attr(\"fill\", () => {\r\n        switch (layerIndex) {\r\n          // 注意是倒着画的，先画最后一层，最后画第1层\r\n          case 0: return \"#8F5E0D\"; // 第5层颜色\r\n          case 1: return \"#B57F26\"; // 第4层颜色\r\n          case 2: return \"#D39E47\"; // 第3层颜色\r\n          case 3: return \"#F5C473\"; // 第2层颜色\r\n          case 4: return \"#FFDCA3\"; // 第1层颜色\r\n          default: return \"#cccccc\"; // 默认颜色（不会用到）\r\n        }\r\n      })\r\n      .attr(\"opacity\", 1) // 适当设置透明度使其可见叠加效果\r\n      .on(\"mouseover\", function() {\r\n        // 鼠标悬浮时降低其他层的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 0);\r\n        d3.selectAll(`.bar-layer-${layerIndex}`)\r\n          .attr(\"opacity\", 1); // 高亮当前层\r\n\r\n        // 更新 Y 轴的刻度显示为当前层对应的 segments\r\n        yAxis.tickFormat((d, i) => {\r\n          const segmentIndex = (numLayers - layerIndex - 1) * barsPerLayer + i;\r\n          return segmentIndex < widthSegments.length ? `${widthSegments[segmentIndex]}` : '';\r\n        });\r\n        yAxisGroup.call(yAxis);\r\n      })\r\n      .on(\"mouseout\", function() {\r\n        // 鼠标移出时恢复所有层的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 1);\r\n\r\n        // 清除 Y 轴的刻度显示\r\n        yAxis.tickFormat(() => \"\");\r\n        yAxisGroup.call(yAxis);\r\n      });\r\n\r\n    // 按相同的顺序为每个柱子添加文本\r\n    svg.selectAll(`.label-layer-${layerIndex}`)\r\n      .data(layer.widths)\r\n      .enter()\r\n      .append(\"text\")\r\n      .attr(\"class\", `label-layer-${layerIndex}`)\r\n      .attr(\"x\", d => x(d) + 5) // 在条形图的末尾添加文本\r\n      .attr(\"y\", (d, i) => y(i + 1) + y.bandwidth() / 2)\r\n      .attr(\"dy\", \".35em\")\r\n      .text((d, i) => {\r\n        const segmentIndex = (numLayers - layerIndex - 1) * barsPerLayer + i;\r\n        return segmentIndex < widthSegments.length ? widthSegments[segmentIndex] : '';\r\n      })\r\n      .style(\"text-anchor\", \"start\")\r\n      .style(\"font-size\", \"10px\")\r\n      .on(\"mouseover\", function() {\r\n        // 同步高亮文本所在的层\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 0);\r\n        d3.selectAll(`.bar-layer-${layerIndex}`)\r\n          .attr(\"opacity\", 1);\r\n\r\n        // 更新 Y 轴的刻度显示为当前层对应的 segments\r\n        yAxis.tickFormat((d, i) => {\r\n          const segmentIndex = (numLayers - layerIndex - 1) * barsPerLayer + i;\r\n          return segmentIndex < widthSegments.length ? `${widthSegments[segmentIndex]}` : '';\r\n        });\r\n        yAxisGroup.call(yAxis);\r\n      })\r\n      .on(\"mouseout\", function() {\r\n        // 鼠标移出时恢复所有层的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 1);\r\n\r\n        // 清除 Y 轴的刻度显示\r\n        yAxis.tickFormat(() => \"\");\r\n        yAxisGroup.call(yAxis);\r\n      });\r\n  });\r\n\r\n  // 添加X轴标题\r\n  svg.append(\"text\")\r\n    .attr(\"class\", \"x-axis-title\")\r\n    .attr(\"x\", width / 2)\r\n    .attr(\"y\", height + margin.bottom - 10)\r\n    .style(\"text-anchor\", \"middle\")\r\n    .style(\"font-size\", \"12px\")\r\n    .text(\"Mapping width (unit: px)\");\r\n\r\n  // 添加Y轴标题\r\n  svg.append(\"text\")\r\n    .attr(\"class\", \"y-axis-title\")\r\n    .attr(\"x\", -50)\r\n    .attr(\"y\", -margin.left / 2 + 15)\r\n    .style(\"text-anchor\", \"letf\")\r\n    .style(\"font-size\", \"12px\")\r\n    .text(\"Transaction amount (unit: BGP)\");\r\n}\r\n\r\nexport function AreaLegendChart(containerSelector) {\r\n  const width = 340; // 画布宽度\r\n  const height = 400; // 画布高度\r\n  const margin = { top: 40, right: 0, bottom: 50, left: 60 };\r\n\r\n  // 创建 SVG 元素\r\n  const svg = d3.select(containerSelector)\r\n    .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n    .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n  // 定义比例尺，直接映射像素值\r\n  const x = d3.scaleLinear()\r\n    .domain([0, width])\r\n    .range([0, width]);\r\n\r\n  const y = d3.scaleLinear()\r\n    .domain([0, height])\r\n    .range([height, 0]);\r\n\r\n  // 创建横轴和纵轴\r\n  const xAxis = d3.axisBottom(x).ticks(5).tickFormat(d => `${d}`);\r\n  const yAxis = d3.axisLeft(y).ticks(5).tickFormat(d => `${d}`);\r\n\r\n  // 添加横轴到 SVG\r\n  svg.append(\"g\")\r\n    .attr(\"class\", \"x-axis\")\r\n    .attr(\"transform\", `translate(0,${height})`)\r\n    .call(xAxis);\r\n\r\n  // 添加 y 轴到 SVG\r\n  svg.append(\"g\")\r\n    .attr(\"class\", \"y-axis\")\r\n    .call(yAxis);\r\n\r\n  // 添加 x 轴标题\r\n  svg.append(\"text\")\r\n    .attr(\"x\", width / 2)\r\n    .attr(\"y\", height + margin.bottom - 10)\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .style(\"font-size\", \"14px\")\r\n    .text(\"Width (px)\");\r\n\r\n  // 添加 y 轴标题\r\n  svg.append(\"text\")\r\n    .attr(\"x\", -height / 2)\r\n    .attr(\"y\", -margin.left + 20)\r\n    .attr(\"transform\", \"rotate(-90)\")\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .style(\"font-size\", \"14px\")\r\n    .text(\"Height (px)\");\r\n\r\n  // 每三个面积中只展示第一个面积\r\n  const filteredAreaSizes = areaSizes.filter((_, index) => index % 3 === 0);\r\n  const filteredAreaSegments = areaSegments.filter((_, index) => index % 3 === 0);\r\n\r\n  // 计算每个正方形的边长\r\n  const squares = filteredAreaSizes.map((size, index) => ({\r\n    size,\r\n    segment: filteredAreaSegments[index],\r\n    side: Math.sqrt(size)\r\n  }));\r\n\r\n  // 按面积从大到小排序正方形，以确保小方块在顶部\r\n  squares.sort((a, b) => b.side - a.side);\r\n\r\n  // 初始偏移量\r\n  let xOffset = 0;\r\n  let yOffset = 0;\r\n  const padding = 20; // 方块之间的间距\r\n\r\n  // 绘制正方形\r\n  squares.forEach((square, index) => {\r\n    // 计算方块的位置\r\n    if (index > 0) {\r\n      xOffset += padding;  // 右移\r\n      yOffset += padding;  // 上移\r\n    }\r\n\r\n    // 确保不超过画布边界\r\n    if (xOffset + square.side > width) {\r\n      xOffset = 0;  // 如果超过宽度，则重置 x 偏移\r\n      yOffset += padding + square.side;  // 新行\r\n    }\r\n\r\n    if (yOffset + square.side > height) {\r\n      yOffset = 0;  // 如果超过高度，则重置 y 偏移\r\n    }\r\n\r\n    // 添加一个分组元素以包裹每个方块和其文字\r\n    const group = svg.append(\"g\")\r\n      .attr(\"transform\", `translate(${xOffset}, ${height - yOffset - square.side})`);\r\n\r\n    // 绘制方块\r\n    group.append(\"rect\")\r\n      .attr(\"width\", square.side)\r\n      .attr(\"height\", square.side)\r\n      .attr(\"fill\", \"#8F5E0D\")\r\n      .attr(\"opacity\", 0.9)\r\n      .on(\"mouseover\", function () {\r\n        // 鼠标悬浮时降低其他方块的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 0.2);\r\n        d3.select(this)\r\n          .attr(\"opacity\", 1); // 高亮当前方块\r\n\r\n        // 显示文字\r\n        group.select(\"text\")\r\n          .attr(\"opacity\", 1);\r\n      })\r\n      .on(\"mouseout\", function () {\r\n        // 鼠标移出时恢复所有方块的透明度\r\n        svg.selectAll(\"rect\")\r\n          .attr(\"opacity\", 0.9);\r\n\r\n        // 隐藏文字\r\n        group.select(\"text\")\r\n          .attr(\"opacity\", 0);\r\n      });\r\n\r\n    // 在方块中间添加文本，显示 areaSegments，初始状态设为隐藏\r\n    group.append(\"text\")\r\n      .attr(\"x\", square.side / 2)\r\n      .attr(\"y\", square.side / 2)\r\n      .attr(\"dy\", \".35em\")\r\n      .text(`Amount <= ${square.segment}`)\r\n      .style(\"text-anchor\", \"middle\")\r\n      .style(\"font-size\", \"10px\")\r\n      .style(\"fill\", \"white\")\r\n      .attr(\"opacity\", 0); // 默认隐藏文字\r\n  });\r\n}\r\n","<template>\r\n  <div v-if=\"visible\" class=\"transaction-detail\">\r\n    <el-tabs type=\"border-card\" class=\"custom-tabs\">\r\n      <div class=\"header\">\r\n        <!--        <p class=\"text-style\">{{ details }}</p>-->\r\n        <el-button @click=\"close\" class=\"close-button\">Close</el-button>\r\n      </div>\r\n      <el-tab-pane label=\"Month View\" class=\"text-style\">\r\n        <month-view\r\n          :highlightDates=\"similarDates\"\r\n          :topSimilarSequences=\"topSimilarSequences\"\r\n          :selectedOption=\"selectedOption\"\r\n        />\r\n        <el-backtop :right=\"100\" :bottom=\"100\" target=\".custom-tabs\" />\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"Year View\" class=\"text-style\">\r\n        <div v-for=\"year in years\" :key=\"year\" class=\"year-container\">\r\n          <year-view :year=\"year\" :highlight-dates=\"similarDates\" />\r\n        </div>\r\n        <el-backtop :right=\"100\" :bottom=\"100\" target=\".custom-tabs\" />\r\n      </el-tab-pane>\r\n<!--      <el-tab-pane label=\"Timeline\" class=\"text-style\">-->\r\n<!--        <h2>Timeline</h2>-->\r\n<!--        <el-backtop :right=\"100\" :bottom=\"100\" target=\".custom-tabs\" />-->\r\n<!--      </el-tab-pane>-->\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, nextTick } from 'vue';\r\nimport { ElTabs, ElTabPane, ElButton, ElBacktop } from 'element-plus';\r\nimport { findTopSimilarSequences, findTopSimilarSequencesByAmount, findTopSimilarSequencesCombined } from '@/services/sequenceSimilarity';\r\nimport YearView from './YearView.vue';\r\nimport MonthView from './MonthView.vue';\r\nimport '@/assets/global.css';\r\n\r\nexport default {\r\n  name: 'TransactionSimilarity',\r\n  components: {\r\n    ElTabs,\r\n    ElTabPane,\r\n    ElButton,\r\n    ElBacktop,\r\n    YearView,\r\n    MonthView\r\n  },\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    details: {\r\n      type: Object,\r\n      required: false\r\n    },\r\n    dailySequences: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    dailyAmounts: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    algorithm: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    selectedOption: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  setup(props, { emit }) {\r\n    const currentDate = ref(new Date());\r\n    const selectedDate = ref(new Date());\r\n    const topSimilarSequences = ref([]);\r\n    const similarDates = ref([]);\r\n    const years = ref([2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022]);\r\n\r\n    const formatDate = (date) => {\r\n      const d = new Date(date);\r\n      const year = d.getFullYear();\r\n      const month = (d.getMonth() + 1).toString().padStart(2, '0');\r\n      const day = d.getDate().toString().padStart(2, '0');\r\n      return `${year}-${month}-${day}`;\r\n    };\r\n\r\n    const clearHighlight = () => {\r\n      const cells = document.querySelectorAll('.el-calendar-table__row .el-calendar-day span.highlight');\r\n      cells.forEach(cell => {\r\n        cell.classList.remove('highlight');\r\n        cell.style.backgroundColor = '';\r\n        cell.style.borderRadius = '';\r\n        cell.style.fontWeight = '';\r\n        cell.style.color = '';\r\n\r\n        const similarityText = cell.parentNode.querySelector('.similarity-text');\r\n        if (similarityText) {\r\n          cell.parentNode.removeChild(similarityText);\r\n        }\r\n      });\r\n    };\r\n\r\n    const highlightDates = () => {\r\n      nextTick(() => {\r\n        clearHighlight();\r\n        const dates = similarDates.value;\r\n        const cells = document.querySelectorAll('.el-calendar-table__row .el-calendar-day');\r\n        const currentMonth = currentDate.value.getMonth();\r\n        const currentYear = currentDate.value.getFullYear();\r\n\r\n        cells.forEach(cell => {\r\n          const span = cell.querySelector('span');\r\n          if (!span) return;\r\n\r\n          const cellDateText = span.textContent.trim();\r\n          const cellDate = new Date(currentYear, currentMonth, parseInt(cellDateText));\r\n          const formattedCellDate = formatDate(cellDate);\r\n\r\n          if (dates.includes(formattedCellDate) && cellDate.getMonth() === currentMonth) {\r\n            span.classList.add('highlight');\r\n            span.style.backgroundColor = '#ffecb3';\r\n            span.style.borderRadius = '50%';\r\n            span.style.fontWeight = 'bold';\r\n            span.style.color = 'red';\r\n\r\n            const similarity = topSimilarSequences.value.find(seq => seq.date === formattedCellDate).similarity.toFixed(2);\r\n            const similarityText = document.createElement('div');\r\n            similarityText.className = 'similarity-text';\r\n            similarityText.innerText = `${similarity}%`;\r\n            similarityText.style.fontSize = '10px';\r\n            similarityText.style.color = 'blue';\r\n            similarityText.style.textAlign = 'center';\r\n            similarityText.style.position = 'absolute';\r\n            similarityText.style.bottom = '2px';\r\n            similarityText.style.width = '100%';\r\n            similarityText.style.pointerEvents = 'none'; // 确保不会影响用户交互\r\n            cell.style.position = 'relative'; // 确保父容器正确定位\r\n            cell.appendChild(similarityText); // 确保相似度文本在单元格中\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n    const updateSimilarSequences = () => {\r\n      if (props.details && props.details.date) {\r\n        const dateMatch = props.details.date; // 获取日期\r\n        const selectedSequence = props.dailySequences[dateMatch];\r\n\r\n        if (selectedSequence) {\r\n          // 创建 targetAmountsSum 数组\r\n          const targetAmountsSum = props.dailyAmounts[dateMatch].debitAmounts.map((debit, index) => {\r\n            return debit + props.dailyAmounts[dateMatch].creditAmounts[index];\r\n          });\r\n\r\n          // console.log(\"Target Amounts Sum Array:\", targetAmountsSum);\r\n\r\n          const allSequences = Object.keys(props.dailySequences).map(date => {\r\n            const debitAmounts = props.dailyAmounts[date].debitAmounts;\r\n            const creditAmounts = props.dailyAmounts[date].creditAmounts;\r\n\r\n            // 创建 amountsSum 数组\r\n            const amountsSum = debitAmounts.map((debit, index) => {\r\n              return debit + creditAmounts[index];\r\n            });\r\n\r\n            // console.log(`Amounts Sum Array for ${date}:`, amountsSum);\r\n\r\n            return {\r\n              date,\r\n              sequence: props.dailySequences[date],\r\n              debitAmounts,  // 使用传入的 dailyAmounts\r\n              creditAmounts, // 使用传入的 dailyAmounts\r\n              amountsSum     // 新生成的 amountsSum 数组\r\n            };\r\n          });\r\n\r\n          if (props.selectedOption === 'category') {\r\n            topSimilarSequences.value = findTopSimilarSequences(selectedSequence, allSequences, props.algorithm);\r\n          } else if (props.selectedOption === 'amount') {\r\n            // 使用基于金额的相似度计算函数\r\n            const targetSequence = {\r\n              date: dateMatch,\r\n              sequence: selectedSequence,\r\n              debitAmounts: props.dailyAmounts[dateMatch].debitAmounts, // 使用传入的 dailyAmounts\r\n              creditAmounts: props.dailyAmounts[dateMatch].creditAmounts, // 使用传入的 dailyAmounts\r\n              amountsSum: targetAmountsSum // 使用新生成的 targetAmountsSum 数组\r\n            };\r\n\r\n            topSimilarSequences.value = findTopSimilarSequencesByAmount(targetSequence, allSequences);\r\n          } else if (props.selectedOption === 'combined') {\r\n            const targetSequence = {\r\n              date: dateMatch,\r\n              sequence: selectedSequence,\r\n              debitAmounts: props.dailyAmounts[dateMatch]?.debitAmounts || [], // 确保为数组\r\n              creditAmounts: props.dailyAmounts[dateMatch]?.creditAmounts || [], // 确保为数组\r\n            };\r\n\r\n            // 确保所有序列中的 debitAmounts 和 creditAmounts 为数组\r\n            const validSequences = allSequences.map(seq => ({\r\n              ...seq,\r\n              debitAmounts: seq.debitAmounts || [], // 确保为数组\r\n              creditAmounts: seq.creditAmounts || [], // 确保为数组\r\n            }));\r\n\r\n            topSimilarSequences.value = findTopSimilarSequencesCombined(targetSequence, validSequences, props.algorithm);\r\n          }\r\n\r\n          similarDates.value = topSimilarSequences.value.map(seq => seq.date);\r\n          highlightDates();\r\n          emit('update-top-similar-sequences', topSimilarSequences.value);\r\n        }\r\n      }\r\n    };\r\n\r\n\r\n\r\n    watch(() => props.details, updateSimilarSequences);\r\n    watch(() => props.algorithm, updateSimilarSequences);\r\n    watch(() => props.selectedOption, updateSimilarSequences);\r\n\r\n    // watch(() => props.algorithm, (newAlgorithm) => {\r\n    //   console.log(\"Selected Algorithm:\", newAlgorithm);\r\n    // });\r\n\r\n    // watch(topSimilarSequences, (newTopSimilarSequences) => {\r\n    //   const dates = newTopSimilarSequences.map(seq => seq.date);\r\n    //   // console.log(\"Similar Dates:\", dates);\r\n    //   similarDates.value = dates;\r\n    //   highlightDates();\r\n    // });\r\n\r\n    const close = () => {\r\n      emit('close');\r\n    };\r\n\r\n    return {\r\n      currentDate,\r\n      selectedDate,\r\n      topSimilarSequences,\r\n      similarDates,\r\n      close,\r\n      years\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.transaction-detail {\r\n  position: fixed;\r\n  right: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  width: 750px;\r\n  box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);\r\n  border: 2px solid #E4E4E4;\r\n  border-radius: 8px;\r\n  overflow-y: auto;\r\n  z-index: 1000;\r\n  background-color: inherit;  /* 继承父容器的背景色 */\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: relative;\r\n  z-index: 1; /* 确保按钮在内容上方 */\r\n}\r\n\r\n.custom-tabs {\r\n  width: 100%;\r\n  background-color: inherit;  /* 继承父容器的背景色 */\r\n  border: none;\r\n  max-height: 1000px; /* 设置合适的高度以触发滚动 */\r\n  overflow-y: auto;\r\n  position: relative;\r\n}\r\n\r\n.el-tabs__header {\r\n  display: flex;\r\n}\r\n\r\n.el-tabs__item {\r\n  flex: 1;\r\n  text-align: center;\r\n}\r\n\r\n.close-button {\r\n  margin-left: auto; /* 确保按钮在最右侧 */\r\n  z-index: 2; /* 确保按钮在内容上方 */\r\n}\r\n\r\n.el-calendar-table__row .el-calendar-day span.highlight {\r\n  background-color: #ffecb3 !important;\r\n  border-radius: 50% !important;\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  justify-content: center !important;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  box-sizing: border-box !important;\r\n  border: 2px solid #ffeb3b !important;\r\n  font-weight: bold !important;\r\n  color: red !important;\r\n}\r\n\r\n.similarity-text {\r\n  font-size: 10px;\r\n  color: blue;\r\n  text-align: center;\r\n  position: absolute;\r\n  bottom: 2px;\r\n  width: 100%;\r\n  pointer-events: none; /* 确保不会影响用户交互 */\r\n}\r\n\r\n.el-calendar {\r\n  --el-calendar-cell-width: 30px; /* 日历单元格的宽度 */\r\n  --el-calendar-cell-height: 30px; /* 日历单元格的高度 */\r\n  border: none;\r\n}\r\n\r\n.el-calendar-table__row .el-calendar-day {\r\n  width: var(--el-calendar-cell-width);\r\n  height: var(--el-calendar-cell-height);\r\n  line-height: var(--el-calendar-cell-height);\r\n}\r\n\r\n.el-calendar-table .el-calendar-day {\r\n  padding: 5px; /* 将 padding 从 8px 改为 5px */\r\n}\r\n\r\n.year-container {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n</style>\r\n","//分别找各个模式中最高频的序列（非常花时间。可能导致浏览器崩溃）\r\nexport function findMostSimilarSequence(dailySequences, dailyAmounts, selectedOption, selectedAlgorithm) {\r\n  const sequences = dailySequences.value || dailySequences;\r\n  const amountsData = dailyAmounts.value || dailyAmounts;\r\n  // console.log('amountsData', amountsData);\r\n\r\n  let maxSimilarCount = 0;\r\n  let mostSimilarSequence = null;\r\n\r\n  const sequenceKeys = Object.keys(sequences);\r\n  const sequenceLength = sequenceKeys.length;\r\n\r\n  // 对所有序列进行两两比较\r\n  for (let i = 0; i < sequenceLength; i++) {\r\n    const targetDate = sequenceKeys[i];\r\n    const targetSequence = sequences[targetDate];\r\n\r\n    // 确保目标序列有效\r\n    if (!targetSequence || typeof targetSequence !== 'string') {\r\n      continue;\r\n    }\r\n\r\n    let similarCount = 0;\r\n\r\n    for (let j = 0; j < sequenceLength; j++) {\r\n      if (i === j) continue; // 跳过自身比较\r\n\r\n      const compareDate = sequenceKeys[j];\r\n      const compareSequence = sequences[compareDate];\r\n\r\n      // 确保待比较序列有效\r\n      if (!compareSequence || typeof compareSequence !== 'string') {\r\n        continue;\r\n      }\r\n\r\n      let similarity;\r\n\r\n      if (selectedOption === 'category') {\r\n        // 根据 selectedAlgorithm 调用不同的相似度计算函数\r\n        if (selectedAlgorithm === 'jaro-winkler') {\r\n          similarity = calculateJaroWinklerSimilarity(targetSequence, compareSequence);\r\n        } else {\r\n          similarity = calculateSimilarity(targetSequence, compareSequence, selectedAlgorithm);\r\n        }\r\n\r\n        // 统计相似度在 75% 以上的序列数量\r\n        if (similarity >= 75) {\r\n          similarCount++;\r\n        }\r\n\r\n      } else if (selectedOption === 'amount') {\r\n        const targetAmounts = amountsData[targetDate];\r\n        const compareAmounts = amountsData[compareDate];\r\n\r\n        // console.log('targetAmounts', targetAmounts);\r\n        // console.log('compareAmounts', compareAmounts);\r\n\r\n        const distance = calculateEuclideanDistance(targetAmounts, compareAmounts);\r\n\r\n        // 统计距离较小的序列数量\r\n        const distanceThreshold = 10;   //假设距离小于某个阈值算为相似\r\n        if (distance <= distanceThreshold) {\r\n          similarCount++;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 更新拥有最多相似序列的序列信息\r\n    if (similarCount > maxSimilarCount) {\r\n      maxSimilarCount = similarCount;\r\n      mostSimilarSequence = {\r\n        date: targetDate,\r\n        sequence: targetSequence,\r\n        similarCount,\r\n        debitAmounts: dailyAmounts[targetDate]?.debitAmounts || [],\r\n        creditAmounts: dailyAmounts[targetDate]?.creditAmounts || [],\r\n      };\r\n    }\r\n  }\r\n\r\n  if (mostSimilarSequence) {\r\n    console.log('Most Similar Sequence:', mostSimilarSequence, 'Similar Sequence Count', maxSimilarCount);\r\n  } else {\r\n    console.log('No similar sequences found.');\r\n  }\r\n\r\n  return mostSimilarSequence;\r\n}\r\n\r\n// Levenshtein 距离\r\nfunction levenshteinDistance(a, b) {\r\n  // a = 'example';\r\n  // b = 'exampel';\r\n  // console.log(\"Using Levenshtein Distance\");\r\n  if (!a || !b) return Infinity; // 确保字符串非空\r\n\r\n  const matrix = [];\r\n\r\n  // 初始化矩阵\r\n  for (let i = 0; i <= b.length; i++) {\r\n    matrix[i] = [i];\r\n  }\r\n  for (let j = 0; j <= a.length; j++) {\r\n    matrix[0][j] = j;\r\n  }\r\n\r\n  // 填充矩阵\r\n  for (let i = 1; i <= b.length; i++) {\r\n    for (let j = 1; j <= a.length; j++) {\r\n      if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1];\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1] + 1, // 替换\r\n          matrix[i][j - 1] + 1,     // 插入\r\n          matrix[i - 1][j] + 1      // 删除\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // console.log('Levenshtein distance:', matrix[b.length][a.length]);\r\n\r\n  return matrix[b.length][a.length];\r\n}\r\n\r\n// Damerau-Levenshtein 距离\r\nfunction damerauLevenshteinDistance(a, b) {\r\n  // a = 'example';\r\n  // b = 'exampel';\r\n  // console.log(\"Using Damerau-Levenshtein Distance\");\r\n  if (!a || !b) return Infinity; // 确保字符串非空\r\n\r\n  const matrix = [];\r\n\r\n  // 初始化矩阵\r\n  for (let i = 0; i <= b.length; i++) {\r\n    matrix[i] = [i];\r\n  }\r\n  for (let j = 0; j <= a.length; j++) {\r\n    matrix[0][j] = j;\r\n  }\r\n\r\n  // 填充矩阵\r\n  for (let i = 1; i <= b.length; i++) {\r\n    for (let j = 1; j <= a.length; j++) {\r\n      if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1];\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1] + 1, // 替换\r\n          matrix[i][j - 1] + 1,     // 插入\r\n          matrix[i - 1][j] + 1      // 删除\r\n        );\r\n      }\r\n\r\n      // 换位\r\n      if (i > 1 && j > 1 && b.charAt(i - 1) === a.charAt(j - 2) && b.charAt(i - 2) === a.charAt(j - 1)) {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i][j],\r\n          matrix[i - 2][j - 2] + 1 // 换位\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // console.log('Damerau-Levenshtein distance:', matrix[b.length][a.length]);\r\n\r\n  return matrix[b.length][a.length];\r\n}\r\n\r\n// Hamming 距离\r\nfunction hammingDistance(a, b) {\r\n  // console.log(\"Using Hamming Distance\");\r\n  if (a.length !== b.length) return Infinity;\r\n\r\n  let distance = 0;\r\n  for (let i = 0; i < a.length; i++) {\r\n    if (a.charAt(i) !== b.charAt(i)) {\r\n      distance++;\r\n    }\r\n  }\r\n\r\n  return distance;\r\n}\r\n\r\n// Jaro-Winkler 距离\r\nfunction jaroWinklerDistance(s1, s2) {\r\n  // console.log(\"Using Jaro-Winkler Distance\");\r\n  if (!s1 || !s2) return Infinity;\r\n\r\n  if (s1 === s2) return 0;\r\n\r\n  const len1 = s1.length;\r\n  const len2 = s2.length;\r\n  const matchWindow = Math.floor(Math.max(len1, len2) / 2) - 1;\r\n  const matches1 = Array(len1).fill(false);\r\n  const matches2 = Array(len2).fill(false);\r\n\r\n  let matches = 0;\r\n  for (let i = 0; i < len1; i++) {\r\n    const start = Math.max(0, i - matchWindow);\r\n    const end = Math.min(i + matchWindow + 1, len2);\r\n    for (let j = start; j < end; j++) {\r\n      if (matches2[j]) continue;\r\n      if (s1.charAt(i) === s2.charAt(j)) {\r\n        matches1[i] = true;\r\n        matches2[j] = true;\r\n        matches++;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (matches === 0) return 1;\r\n\r\n  let transpositions = 0;\r\n  let k = 0;\r\n  for (let i = 0; i < len1; i++) {\r\n    if (matches1[i]) {\r\n      while (!matches2[k]) k++;\r\n      if (s1.charAt(i) !== s2.charAt(k)) transpositions++;\r\n      k++;\r\n    }\r\n  }\r\n  transpositions /= 2;\r\n\r\n  const jaro = (matches / len1 + matches / len2 + (matches - transpositions) / matches) / 3;\r\n  const prefix = s1.split('').findIndex((c, i) => c !== s2.charAt(i)) || 0;\r\n  const p = 0.1;\r\n  return 1 - (jaro + Math.min(prefix, 4) * p * (1 - jaro));\r\n}\r\n\r\n// 欧式距离\r\nexport function calculateEuclideanDistance(sequence1, sequence2) {\r\n  // 处理第一个序列，创建一个新数组，将 creditAmounts 和 debitAmounts 中的值相加\r\n  const amounts1 = sequence1.creditAmounts.map((credit, index) => {\r\n    return credit + sequence1.debitAmounts[index];\r\n  });\r\n\r\n  // 处理第二个序列，创建一个新数组，将 creditAmounts 和 debitAmounts 中的值相加\r\n  const amounts2 = sequence2.creditAmounts.map((credit, index) => {\r\n    return credit + sequence2.debitAmounts[index];\r\n  });\r\n\r\n  // 确定两个数组中较长的一个\r\n  const [longArray, shortArray] = amounts1.length >= amounts2.length\r\n    ? [amounts1, amounts2]\r\n    : [amounts2, amounts1];\r\n\r\n  const lengthDifference = longArray.length - shortArray.length;\r\n\r\n  // 找出长数组中最小值的索引位置，并在短数组对应位置插入0\r\n  const indicesToInsertZero = [];\r\n  for (let i = 0; i < lengthDifference; i++) {\r\n    let minIndex = -1;\r\n    let minValue = Infinity;\r\n\r\n    for (let j = 0; j < longArray.length; j++) {\r\n      if (!indicesToInsertZero.includes(j) && longArray[j] < minValue) {\r\n        minValue = longArray[j];\r\n        minIndex = j;\r\n      }\r\n    }\r\n    indicesToInsertZero.push(minIndex);\r\n  }\r\n\r\n  // 在短数组中插入0\r\n  const extendedShortArray = [...shortArray];\r\n  indicesToInsertZero.forEach(index => {\r\n    extendedShortArray.splice(index, 0, 0); // 在指定位置插入 0\r\n  });\r\n\r\n  // 输出插入0之后的两个数组\r\n  // console.log(\"Long Array:\", longArray);\r\n  // console.log(\"Extended Short Array:\", extendedShortArray);\r\n\r\n  // 计算欧氏距离\r\n  const distance = Math.sqrt(\r\n    longArray.reduce((sum, val, index) => {\r\n      return sum + Math.pow(val - extendedShortArray[index], 2);\r\n    }, 0)\r\n  );\r\n\r\n  // console.log('Euclidean Distance:', distance);\r\n\r\n  return distance;\r\n}\r\n\r\n//Jaro-Winkler 距离必须使用对应的Jaro-Winkler相似度\r\nfunction calculateJaroWinklerSimilarity(sequence1, sequence2) {\r\n  return (1 - jaroWinklerDistance(sequence1, sequence2))*100;\r\n}\r\n\r\n// 计算相似度百分比（基于种类）\r\nfunction calculateSimilarity(sequence1, sequence2, algorithm) {\r\n  if (!sequence1 || !sequence2) return 0; // 确保字符串非空\r\n\r\n  let distance;\r\n  if (algorithm === 'levenshtein') {\r\n    distance = levenshteinDistance(sequence1, sequence2);\r\n  } else if (algorithm === 'damerau-levenshtein') {\r\n    distance = damerauLevenshteinDistance(sequence1, sequence2);\r\n  } else if (algorithm === 'hamming') {\r\n    distance = hammingDistance(sequence1, sequence2);\r\n  } else {\r\n    throw new Error(`Unknown algorithm: ${algorithm}`);\r\n  }\r\n\r\n  // const maxLength = Math.max(sequence1.length, sequence2.length);\r\n  // return (1 - distance / maxLength) * 100;\r\n  const length = sequence1.length;\r\n  // console.log('original sequence length:', length);\r\n  // console.log('original sequence:', sequence1);\r\n  return (1-distance/length)*100;\r\n}\r\n\r\n// 找出与指定序列最相似的十个序列（基于分类）\r\nexport function findTopSimilarSequences(targetSequence, allSequences, algorithm = 'levenshtein', topN = 10) {\r\n  const similarities = allSequences\r\n    // .filter(seq => seq.date !== targetSequence.date) // 过滤掉自身序列\r\n    .map(seq => {\r\n      const similarity = algorithm === 'jaro-winkler'\r\n        ? calculateJaroWinklerSimilarity(targetSequence, seq.sequence)\r\n        : calculateSimilarity(targetSequence, seq.sequence, algorithm);\r\n      return {\r\n        date: seq.date,\r\n        sequence: seq.sequence,\r\n        similarity\r\n      };\r\n    });\r\n\r\n  similarities.sort((a, b) => b.similarity - a.similarity);\r\n\r\n  return similarities.slice(0, topN);\r\n}\r\n\r\n// 找出与指定序列最相似的十个序列（基于金额）\r\nexport function findTopSimilarSequencesByAmount(targetSequence, allSequences, topN = 10) {\r\n  // 遍历所有待比较的序列，计算与 targetSequence 的欧氏距离\r\n  const similarities = allSequences.map(seq => {\r\n    // 调用 calculateEuclideanDistance 函数计算欧氏距离\r\n    const distance = calculateEuclideanDistance({\r\n      creditAmounts: seq.creditAmounts,\r\n      debitAmounts: seq.debitAmounts\r\n    }, {\r\n      creditAmounts: targetSequence.creditAmounts,\r\n      debitAmounts: targetSequence.debitAmounts\r\n    });\r\n\r\n    return {\r\n      date: seq.date, // 保留日期信息以便于后续处理\r\n      sequence: seq.sequence, // 保留原始序列信息\r\n      similarity: distance // 这里使用距离作为相似度，距离越小越相似\r\n    };\r\n  });\r\n\r\n  // 按相似度排序并返回前 topN 个相似序列\r\n  similarities.sort((a, b) => a.similarity - b.similarity);\r\n  // console.log('基于amount的相似序列计算结果：', similarities.slice(0, topN));\r\n\r\n  return similarities.slice(0, topN);\r\n}\r\n\r\n// 找出与指定序列最相似的十个序列（同时基于分类和金额）\r\nexport function findTopSimilarSequencesCombined(targetSequence, allSequences, algorithm = 'levenshtein', topN = 10) {\r\n  // 计算每个序列的相似度\r\n  const similarities = allSequences.map(seq => {\r\n    // 计算基于分类的相似度\r\n    const categorySimilarity = algorithm === 'jaro-winkler'\r\n      ? calculateJaroWinklerSimilarity(targetSequence.sequence, seq.sequence)\r\n      : calculateSimilarity(targetSequence.sequence, seq.sequence, algorithm);\r\n\r\n    // 计算基于金额的欧氏距离\r\n    const amountDistance = calculateEuclideanDistance({\r\n      creditAmounts: seq.creditAmounts,\r\n      debitAmounts: seq.debitAmounts\r\n    }, {\r\n      creditAmounts: targetSequence.creditAmounts,\r\n      debitAmounts: targetSequence.debitAmounts\r\n    });\r\n\r\n    // 对欧氏距离进行对数缩放处理，避免直接使用较大的距离值\r\n    const logDistance = Math.log1p(amountDistance); // log1p(x) 等价于 log(1 + x)，对小距离值更友好\r\n\r\n    // 归一化 logDistance 到 [0, 1] 范围\r\n    const normalizedLogDistance = logDistance / (1 + logDistance);\r\n\r\n    // 将归一化的距离转换为相似度\r\n    const amountSimilarity = 1 - normalizedLogDistance; // 距离越小，相似度越高\r\n\r\n    // 计算分类相似度和金额相似度的平均值\r\n    const combinedSimilarity = (categorySimilarity + amountSimilarity) / 2;\r\n\r\n    return {\r\n      date: seq.date,\r\n      sequence: seq.sequence,\r\n      categorySimilarity,\r\n      amountSimilarity,\r\n      combinedSimilarity\r\n    };\r\n  });\r\n\r\n  // 按相似度排序，并返回前 topN 个最相似的序列\r\n  similarities.sort((a, b) => b.combinedSimilarity - a.combinedSimilarity);\r\n  // console.log('combined mode similarity result:', similarities.slice(0, topN));\r\n\r\n  return similarities.slice(0, topN);\r\n}\r\n","<template>\r\n  <div class=\"year-view\">\r\n    <div class=\"year-header\">{{ year }}</div>\r\n    <div class=\"year-grid\">\r\n      <div class=\"month\" v-for=\"month in months\" :key=\"month.name\">\r\n        <div class=\"month-header\">{{ month.name }}</div>\r\n        <div class=\"days-grid\">\r\n          <div class=\"day-name\" v-for=\"day in dayNames\" :key=\"day\">{{ day }}</div>\r\n          <div v-for=\"day in month.days\" :key=\"day.date\" :class=\"['day', { highlight: highlightDates.includes(day.date) }]\">\r\n            {{ day.number }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport '@/assets/global.css';\r\n\r\nexport default {\r\n  name: 'YearView',\r\n  props: {\r\n    year: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    highlightDates: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      months: [\r\n        { name: 'January', days: [] },\r\n        { name: 'February', days: [] },\r\n        { name: 'March', days: [] },\r\n        { name: 'April', days: [] },\r\n        { name: 'May', days: [] },\r\n        { name: 'June', days: [] },\r\n        { name: 'July', days: [] },\r\n        { name: 'August', days: [] },\r\n        { name: 'September', days: [] },\r\n        { name: 'October', days: [] },\r\n        { name: 'November', days: [] },\r\n        { name: 'December', days: [] }\r\n      ],\r\n      dayNames: ['S', 'M', 'T', 'W', 'T', 'F', 'S']\r\n    };\r\n  },\r\n  watch: {\r\n    year: 'generateCalendar'\r\n  },\r\n  mounted() {\r\n    this.generateCalendar();\r\n  },\r\n  methods: {\r\n    generateCalendar() {\r\n      const year = this.year;\r\n      this.months.forEach((month, index) => {\r\n        const daysInMonth = new Date(Date.UTC(year, index + 1, 0)).getDate();\r\n        const firstDay = new Date(Date.UTC(year, index, 1)).getDay();\r\n\r\n        month.days = [];\r\n        for (let i = 0; i < firstDay; i++) {\r\n          month.days.push({ date: null, number: '' });\r\n        }\r\n        for (let day = 1; day <= daysInMonth; day++) {\r\n          const date = new Date(Date.UTC(year, index, day)).toISOString().split('T')[0];\r\n          month.days.push({ date, number: day });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.year-header {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.year-view {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.year-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: none;\r\n  width: 100%;\r\n}\r\n\r\n.month {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.month-header {\r\n  font-size: 18px;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n  width: 90%;\r\n}\r\n\r\n.days-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 2px;\r\n  width: 85%;\r\n}\r\n\r\n.day-name {\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.day {\r\n  width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: none;\r\n}\r\n\r\n.highlight {\r\n  background-color: #ffecb3 !important;\r\n  border-radius: 50% !important;\r\n  font-weight: bold !important;\r\n  color: red !important;\r\n}\r\n</style>\r\n","import { render } from \"./YearView.vue?vue&type=template&id=4eca8988&scoped=true\"\nimport script from \"./YearView.vue?vue&type=script&lang=js\"\nexport * from \"./YearView.vue?vue&type=script&lang=js\"\n\nimport \"./YearView.vue?vue&type=style&index=0&id=4eca8988&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4eca8988\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"month-view\">\r\n    <el-switch\r\n      v-model=\"showOnlyHighlightedMonths\"\r\n      active-text=\"Show Only Highlighted Months\"\r\n      inactive-text=\"Show All Months\"\r\n      class=\"custom-switch\">\r\n    </el-switch>\r\n    <div v-for=\"year in years\" :key=\"year\" class=\"year-section\">\r\n      <h2>{{ year }}</h2>\r\n      <div class=\"month-calendars\">\r\n        <div v-for=\"month in filteredMonths(year)\" :key=\"month.index\" class=\"calendar-container\">\r\n          <div class=\"calendar-header\">{{ month.name }}</div>\r\n          <div class=\"days-grid\">\r\n            <div class=\"day-name\" v-for=\"day in dayNames\" :key=\"day\">{{ day }}</div>\r\n            <div v-for=\"day in getDaysInMonth(year, month.index)\" :key=\"day.date\" :class=\"['day', { highlight: highlightDates.includes(day.date) }]\">\r\n              <div class=\"day-content\">\r\n                <span>{{ day.number }}</span>\r\n                <div v-if=\"highlightDates.includes(day.date)\" class=\"extra-content\">\r\n                  {{ getSimilarity(day.date) }}%\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { ElSwitch } from 'element-plus';\r\n\r\nexport default {\r\n  name: 'MonthView',\r\n  components: {\r\n    ElSwitch,\r\n  },\r\n  props: {\r\n    highlightDates: {\r\n      type: Array,\r\n      required: false,\r\n      default: () => []\r\n    },\r\n    topSimilarSequences: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    selectedOption: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showOnlyHighlightedMonths: false,\r\n      years: Array.from({ length: 8 }, (_, i) => 2015 + i),\r\n      months: [\r\n        { name: 'January', index: 0 },\r\n        { name: 'February', index: 1 },\r\n        { name: 'March', index: 2 },\r\n        { name: 'April', index: 3 },\r\n        { name: 'May', index: 4 },\r\n        { name: 'June', index: 5 },\r\n        { name: 'July', index: 6 },\r\n        { name: 'August', index: 7 },\r\n        { name: 'September', index: 8 },\r\n        { name: 'October', index: 9 },\r\n        { name: 'November', index: 10 },\r\n        { name: 'December', index: 11 }\r\n      ],\r\n      dayNames: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\r\n    };\r\n  },\r\n  methods: {\r\n    getDaysInMonth(year, monthIndex) {\r\n      const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();\r\n      const firstDay = new Date(year, monthIndex, 1).getDay();\r\n      const days = [];\r\n\r\n      for (let i = 0; i < firstDay; i++) {\r\n        days.push({ date: null, number: '', extraContent: '' });\r\n      }\r\n      for (let day = 1; day <= daysInMonth; day++) {\r\n        const date = new Date(Date.UTC(year, monthIndex, day)).toISOString().split('T')[0];\r\n        days.push({ date, number: day, extraContent: '' });\r\n      }\r\n      return days;\r\n    },\r\n    getSimilarity(date) {\r\n      const seq = this.topSimilarSequences.find(seq => seq.date === date);\r\n      if (!seq) {\r\n        return '';\r\n      }\r\n\r\n      if (this.selectedOption === 'combined') {\r\n        return `${seq.combinedSimilarity.toFixed(2)}%`;\r\n      } else {\r\n        return seq.similarity ? seq.similarity.toFixed(2) : '';\r\n      }\r\n    },\r\n    isMonthHighlighted(year, monthIndex) {\r\n      const daysInMonth = this.getDaysInMonth(year, monthIndex);\r\n      return daysInMonth.some(day => day.date && this.highlightDates.includes(day.date));\r\n    },\r\n    filteredMonths(year) {\r\n      return this.showOnlyHighlightedMonths\r\n        ? this.months.filter(month => this.isMonthHighlighted(year, month.index))\r\n        : this.months;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.month-view {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.year-section {\r\n  margin-bottom: 40px;\r\n  width: 100%;\r\n}\r\n\r\n.year-section h2 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.month-calendars {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.calendar-container {\r\n  margin: 5px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  padding: 5px;\r\n  width: 320px;\r\n}\r\n\r\n.calendar-header {\r\n  text-align: center;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.days-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 2px;\r\n}\r\n\r\n.day-name {\r\n  font-weight: bold;\r\n  text-align: center;\r\n  width: 30px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.day {\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  border: none;\r\n  position: relative;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.day-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.highlight {\r\n  background-color: #ffecb3 !important;\r\n  border-radius: 50% !important;\r\n  font-weight: bold !important;\r\n  color: red !important;\r\n}\r\n\r\n.extra-content {\r\n  font-size: 10px;\r\n  color: #555;\r\n  position: absolute;\r\n  bottom: 5px;\r\n  text-align: center;\r\n}\r\n\r\n.el-switch {\r\n  margin-bottom: 20px;\r\n  width: 100%;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./MonthView.vue?vue&type=template&id=554f4f1e&scoped=true\"\nimport script from \"./MonthView.vue?vue&type=script&lang=js\"\nexport * from \"./MonthView.vue?vue&type=script&lang=js\"\n\nimport \"./MonthView.vue?vue&type=style&index=0&id=554f4f1e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-554f4f1e\"]])\n\nexport default __exports__","import { render } from \"./TransactionSimilarity.vue?vue&type=template&id=8472bb5c&scoped=true\"\nimport script from \"./TransactionSimilarity.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionSimilarity.vue?vue&type=script&lang=js\"\n\nimport \"./TransactionSimilarity.vue?vue&type=style&index=0&id=8472bb5c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8472bb5c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"drawer-box\">\r\n    <el-drawer\r\n      v-model=\"visible\"\r\n      size=\"40%\"\r\n      direction=\"rtl\"\r\n      :with-header=\"false\"\r\n      @close=\"closeDrawer\"\r\n    >\r\n      <div class=\"kmeans-content\">\r\n        <h2>K-means++ Cluster Analysis</h2>\r\n        <div class=\"input-container\">\r\n          <span>Select Cluster Number:</span>\r\n          <el-input-number\r\n            v-model=\"num\"\r\n            controls-position=\"right\"\r\n            :min=\"1\"\r\n            :max=\"10\"\r\n            aria-label=\"Number of Clusters\"\r\n            class=\"custom-input\"\r\n          />\r\n        </div>\r\n        <div style=\"margin-top: 20px\">\r\n          <el-radio-group v-model=\"selectedOption\" @change=\"initializeDrawer\">\r\n            <el-radio value=\"none\">Normal</el-radio>\r\n            <el-radio value=\"winsorize\">Decrease Outlier (Cap at 5000)</el-radio>\r\n            <el-radio value=\"logarithmic\">Logarithmic</el-radio>\r\n          </el-radio-group>\r\n          <div id=\"scatter-plot\"></div>\r\n        </div>\r\n        <div id=\"bar-chart\"></div>\r\n        <div id=\"elbow-chart\"></div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElDrawer, ElInputNumber, ElRadioGroup, ElRadio } from 'element-plus';\r\nimport { ref, defineComponent, watch, onMounted, nextTick } from 'vue';\r\nimport '@/assets/global.css';\r\n// import { PCA } from 'ml-pca';\r\nimport kmeans from 'ml-kmeans';\r\nimport * as d3 from 'd3';\r\nimport d3Tip from 'd3-tip';\r\n\r\nexport default defineComponent({\r\n  name: \"KMeans\",\r\n  components: {\r\n    ElDrawer,\r\n    ElInputNumber,\r\n    ElRadioGroup,\r\n    ElRadio,\r\n  },\r\n  props: {\r\n    parsedData: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    isDarkMode: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n  setup(props) {\r\n    const visible = ref(false);\r\n    const num = ref(3); // 默认的数字输入值\r\n    const selectedOption = ref('logarithmic');\r\n\r\n    const parseDateComponents = (dateString) => {\r\n      const startDate = new Date(\"2015-07-27\");\r\n      const currentDate = new Date(dateString);\r\n      return Math.floor((currentDate - startDate) / (1000 * 3600 * 24)); // 计算相对天数\r\n    };\r\n\r\n    const winsorize = (data, threshold) => {\r\n      return data.map(value => value > threshold ? threshold : value);\r\n    };\r\n\r\n    const minMaxScale = (data) => {\r\n      const min = Math.min(...data);\r\n      const max = Math.max(...data);\r\n      return data.map(value => (value - min) / (max - min));\r\n    };\r\n\r\n    const initializeDrawer = () => {\r\n      setStyles(props.isDarkMode);\r\n\r\n      // 提取并处理数据\r\n      const dates = props.parsedData.map(item => parseDateComponents(item.date));\r\n      let amounts = props.parsedData.map(item => item.debitAmount + item.creditAmount);\r\n\r\n      // 保留原始金额数据\r\n      const tooltipAmounts = [...amounts];\r\n\r\n      // 根据用户选择处理金额数据\r\n      if (selectedOption.value === 'winsorize') {\r\n        amounts = winsorize(amounts, 5000); // 对金额进行Winsorizing处理\r\n      } else if (selectedOption.value === 'logarithmic') {\r\n        amounts = amounts.map(value => Math.log10(value + 1)); // 使用对数处理\r\n        // console.log('amounts', amounts);\r\n      }\r\n\r\n      // const amountsWinsorized = winsorize(amounts, 5000); // 对金额进行Winsorizing处理\r\n\r\n      // 对相对天数和金额进行Min-Max标准化\r\n      const datesScaled = minMaxScale(dates);\r\n      const amountsScaled = minMaxScale(amounts);\r\n\r\n      // 组合特征向量并输出到控制台\r\n      const featureVectors = props.parsedData.map((item, index) => {\r\n        return {\r\n          originalDate: item.date,\r\n          originalAmount: amounts[index],\r\n          // originalSubCategory: item.subCategory,\r\n          tooltipAmounts: tooltipAmounts[index],\r\n          // Date: item.date,\r\n          date: datesScaled[index],\r\n          amount: amountsScaled[index],\r\n        };\r\n      });\r\n\r\n      // console.log('Processed Feature Vectors:', featureVectors);\r\n\r\n      // 将特征向量转换为适合聚类的格式\r\n      const kMeansInput = featureVectors.map(vector => [\r\n        vector.date,\r\n        vector.amount\r\n      ]);\r\n\r\n      // 执行 k-means++ 聚类，使质心之间的距离尽可能较远\r\n      const kmeansResult = kmeans(kMeansInput, num.value, { initialization: 'kmeans++' }); // 使用用户选择的簇数\r\n\r\n      // 将聚类结果添加到 featureVectors 中\r\n      const clusteredData = featureVectors.map((vector, index) => ({\r\n        ...vector,\r\n        cluster: kmeansResult.clusters[index],\r\n      }));\r\n\r\n      // console.log('Clustered Data:', clusteredData);\r\n\r\n      // 绘制聚类结果的散点图\r\n      drawScatterPlot(clusteredData);\r\n\r\n      // 绘制 subCategory 的柱状图\r\n      // drawBarChart(clusteredData, uniqueSubCategories);\r\n\r\n      // 肘部法 elbow method\r\n      const calculateElbowData = (data, maxK = 10) => {\r\n        const sseValues = [];\r\n\r\n        for (let k = 1; k <= maxK; k++) {\r\n          const kmeansResult = kmeans(data, k);\r\n          const sse = kmeansResult.centroids.reduce((sum, centroidObj, i) => {\r\n            const centroidArray = Array.isArray(centroidObj) ? centroidObj : Object.values(centroidObj)[0];\r\n            const clusterPoints = data.filter((_, index) => kmeansResult.clusters[index] === i);\r\n            const distanceSum = clusterPoints.reduce((total, point) => {\r\n              const distance = Math.sqrt(\r\n                point.reduce((distSum, coord, j) => distSum + Math.pow(coord - centroidArray[j], 2), 0)\r\n              );\r\n              return total + Math.pow(distance, 2);\r\n            }, 0);\r\n            return sum + distanceSum;\r\n          }, 0);\r\n          sseValues.push({ k, sse });\r\n        }\r\n\r\n        return sseValues;\r\n      };\r\n\r\n      const elbowData = calculateElbowData(kMeansInput);\r\n\r\n      drawElbowChart(elbowData);\r\n    };\r\n\r\n    const openDrawer = () => {\r\n      visible.value = true;\r\n      nextTick(initializeDrawer); // 确保在 drawer 打开后再初始化数据\r\n    };\r\n\r\n    const closeDrawer = () => {\r\n      visible.value = false;\r\n    };\r\n\r\n    watch(num, () => {\r\n      if (visible.value) {\r\n        initializeDrawer(); // 当 num 改变时重新加载数据\r\n      }\r\n    });\r\n\r\n    const setStyles = (isDark) => {\r\n      const drawerElement = document.querySelector('.drawer-box .el-drawer__body');\r\n      if (drawerElement) {\r\n        drawerElement.style.backgroundColor = isDark ? '#ffffff' : '#141414';\r\n        drawerElement.style.color = isDark ? '#141414' : '#ffffff'; // 字体颜色\r\n      }\r\n    };\r\n\r\n    const drawScatterPlot = (data) => {\r\n      const margin = { top: 50, right: 10, bottom: 40, left: 65 };\r\n      const width = 500 - margin.left - margin.right;\r\n      const height = 400 - margin.top - margin.bottom;\r\n\r\n      d3.select(\"#scatter-plot\").selectAll(\"*\").remove();\r\n\r\n      const svg = d3.select(\"#scatter-plot\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n      // x 轴使用原始日期\r\n      const x = d3.scaleTime()\r\n        .domain(d3.extent(data, d => new Date(d.originalDate))) // 使用原始日期\r\n        .range([0, width]);\r\n\r\n      // y 轴使用原始金额进行对数变换的显示\r\n      const maxYValue = d3.max(data, d => d.originalAmount);\r\n      const y = d3.scaleLinear()\r\n        .domain([0, maxYValue]) // 使用原始金额\r\n        .range([height, 0]);\r\n\r\n      // 添加 x 轴\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x).ticks(10).tickSizeOuter(0));\r\n\r\n      // 添加 y 轴，并自定义刻度标签，同时增加最大值刻度\r\n      svg.append(\"g\")\r\n        .call(d3.axisLeft(y)\r\n          .ticks(10)\r\n          .tickSizeOuter(0)\r\n          .tickValues([...y.ticks(10), maxYValue]) // 添加最大值刻度\r\n          .tickFormat(selectedOption.value === 'logarithmic'\r\n            ? d => (Math.pow(10, d) > 1 ? Math.pow(10, d).toFixed(0) : Math.pow(10, d).toPrecision(1)) // 显示对数前的原始金额\r\n            : d => d)); // 其他模式，正常显示金额\r\n\r\n      const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n      // 定义并初始化 tooltip\r\n      const tip = d3Tip()\r\n        .attr('class', 'd3-tip')\r\n        .offset([-10, 0])\r\n        .html(function(event, d) {\r\n          return `<strong>Date:</strong> ${d.originalDate}<br>\r\n              <strong>Amount:</strong> ${d.tooltipAmounts}`;\r\n        });\r\n\r\n      svg.call(tip);\r\n\r\n      const symbol = d3.symbol().type(d3.symbolCross).size(25); // 设置符号为cross\r\n\r\n      svg.append('g')\r\n        .selectAll(\"path\")\r\n        .data(data)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", symbol) // 使用生成的cross符号\r\n        .attr(\"transform\", d => `translate(${x(new Date(d.originalDate))}, ${y(d.originalAmount)})`) // 定位交叉符号\r\n        .style(\"fill\", d => color(d.cluster))\r\n        .style(\"opacity\", 0.6)\r\n        .on('mouseover', tip.show)\r\n        .on('mouseout', tip.hide);\r\n\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"text-style\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", -10)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"16px\")\r\n        .text(\"K-means Clustering Result\");\r\n\r\n      // 增加边缘线\r\n      svg.append(\"rect\")\r\n        .attr(\"class\", \"stroke-style\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke-width\", 1);\r\n\r\n      // X 轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"text-style\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", height + margin.bottom)\r\n        .attr(\"font-size\", \"12px\")\r\n        .text(\"Time\");\r\n\r\n      // Y 轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"text-style\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"x\", -height / 2)\r\n        .attr(\"y\", -margin.left + 10)\r\n        .attr(\"font-size\", \"12px\")\r\n        .text(\"Transaction Amount (unit: BGP)\");\r\n\r\n    };\r\n\r\n\r\n    // const drawBarChart = (data, uniqueSubCategories) => {\r\n    //   d3.select(\"#bar-chart\").selectAll(\"*\").remove();\r\n    //\r\n    //   const margin = { top: 90, right: 10, bottom: 40, left: 50 };\r\n    //   const width = 500 - margin.left - margin.right;\r\n    //   const height = 300 - margin.top - margin.bottom;\r\n    //\r\n    //   const svg = d3.select(\"#bar-chart\")\r\n    //     .append(\"svg\")\r\n    //     .attr(\"width\", width + margin.left + margin.right)\r\n    //     .attr(\"height\", height + margin.top + margin.bottom)\r\n    //     .append(\"g\")\r\n    //     .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n    //\r\n    //   const clusterGroups = d3.group(data, d => d.cluster);\r\n    //\r\n    //   const clusterCounts = Array.from(clusterGroups, ([cluster, points]) => {\r\n    //     const subCategoryCounts = points.reduce((acc, point) => {\r\n    //       const subCategory = point.originalSubCategory;\r\n    //       acc[subCategory] = (acc[subCategory] || 0) + 1;\r\n    //       return acc;\r\n    //     }, {});\r\n    //     return { cluster, subCategoryCounts };\r\n    //   });\r\n    //\r\n    //   const x0 = d3.scaleBand()\r\n    //     .domain(clusterCounts.map(d => d.cluster))\r\n    //     .range([0, width])\r\n    //     .paddingInner(0.1);\r\n    //\r\n    //   const x1 = d3.scaleBand()\r\n    //     .domain(uniqueSubCategories)\r\n    //     .range([0, x0.bandwidth()])\r\n    //     .padding(0.05);\r\n    //\r\n    //   const y = d3.scaleLinear()\r\n    //     .domain([0, d3.max(clusterCounts, d => d3.max(uniqueSubCategories, key => d.subCategoryCounts[key] || 0))])\r\n    //     .range([height, 0]);\r\n    //\r\n    //   const color = d => colorMap[d] || '#ffffff';\r\n    //\r\n    //   const tip = d3Tip()\r\n    //     .attr('class', 'd3-tip')\r\n    //     .offset([-10, 0])\r\n    //     .html(function(event, d) {\r\n    //       return `<strong>SubCategory:</strong> ${d.key}<br><strong>Count:</strong> ${d.value}`;\r\n    //     });\r\n    //\r\n    //   svg.call(tip);\r\n    //\r\n    //   svg.append(\"g\")\r\n    //     .selectAll(\"g\")\r\n    //     .data(clusterCounts)\r\n    //     .enter()\r\n    //     .append(\"g\")\r\n    //     .attr(\"transform\", d => `translate(${x0(d.cluster)},0)`)\r\n    //     .selectAll(\"rect\")\r\n    //     .data(d => uniqueSubCategories.map(key => ({ key, value: d.subCategoryCounts[key] || 0 })))\r\n    //     .enter()\r\n    //     .append(\"rect\")\r\n    //     .attr(\"x\", d => x1(d.key))\r\n    //     .attr(\"y\", d => y(d.value))\r\n    //     .attr(\"width\", x1.bandwidth())\r\n    //     .attr(\"height\", d => height - y(d.value))\r\n    //     .attr(\"fill\", d => color(d.key))\r\n    //     .on('mouseover', tip.show)\r\n    //     .on('mouseout', tip.hide);\r\n    //\r\n    //   svg.append(\"g\")\r\n    //     .attr(\"class\", \"axis\")\r\n    //     .attr(\"transform\", `translate(0,${height})`)\r\n    //     .call(d3.axisBottom(x0).tickSize(0));\r\n    //\r\n    //   svg.append(\"g\")\r\n    //     .attr(\"class\", \"axis\")\r\n    //     .call(d3.axisLeft(y));\r\n    //\r\n    //   svg.append(\"text\")\r\n    //     .attr(\"class\", \"text-style\")\r\n    //     .attr(\"x\", width / 2)\r\n    //     .attr(\"y\", -margin.top / 2 + 20)\r\n    //     .attr(\"text-anchor\", \"middle\")\r\n    //     .style(\"font-size\", \"16px\")\r\n    //     .text(\"Clustered SubCategory Distribution\");\r\n    //\r\n    //   svg.append(\"text\")\r\n    //     .attr(\"class\", \"text-style\")\r\n    //     .attr(\"x\", width / 2)\r\n    //     .attr(\"y\", height + margin.bottom - 10)\r\n    //     .attr(\"text-anchor\", \"middle\")\r\n    //     .style(\"font-size\", \"12px\")\r\n    //     .text(\"Cluster\");\r\n    //\r\n    //   svg.append(\"text\")\r\n    //     .attr(\"class\", \"text-style\")\r\n    //     .attr(\"transform\", \"rotate(-90)\")\r\n    //     .attr(\"x\", -height / 2)\r\n    //     .attr(\"y\", -margin.left + 10)\r\n    //     .attr(\"text-anchor\", \"middle\")\r\n    //     .style(\"font-size\", \"12px\")\r\n    //     .text(\"SubCategory Count\");\r\n    // };\r\n\r\n\r\n    const drawElbowChart = (elbowData) => {\r\n      const margin = { top: 70, right: 10, bottom: 40, left: 65 };\r\n      const width = 500 - margin.left - margin.right;\r\n      const height = 330 - margin.top - margin.bottom;\r\n\r\n      d3.select(\"#elbow-chart\").selectAll(\"*\").remove();\r\n\r\n      const svg = d3.select(\"#elbow-chart\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n      const x = d3.scaleLinear()\r\n        .domain([1, d3.max(elbowData, d => d.k)])\r\n        .range([0, width]);\r\n\r\n      const y = d3.scaleLinear()\r\n        .domain([0, d3.max(elbowData, d => d.sse)])\r\n        .range([height, 0]);\r\n\r\n      // console.log('elbowData', elbowData);\r\n\r\n      const line = d3.line()\r\n        .x(d => x(d.k))\r\n        .y(d => y(d.sse));\r\n        // .curve(d3.curveMonotoneX);\r\n\r\n      svg.append(\"path\")\r\n        .datum(elbowData)\r\n        .attr(\"class\", \"line\")\r\n        .attr(\"d\", line)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", \"steelblue\")\r\n        .attr(\"stroke-width\", 2);\r\n\r\n      // 添加散点\r\n      svg.selectAll(\"dot\")\r\n        .data(elbowData)\r\n        .enter()\r\n        .append(\"circle\")\r\n        // .attr(\"class\", \"text-style\")\r\n        .attr(\"cx\", d => x(d.k))\r\n        .attr(\"cy\", d => y(d.sse))\r\n        .attr(\"r\", 4)  // 圆点半径\r\n        .attr(\"fill\", \"steelblue\");\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x).ticks(10));\r\n\r\n      svg.append(\"g\")\r\n        .call(d3.axisLeft(y).ticks(10));\r\n\r\n      // x轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"text-style\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", height + margin.bottom - 10)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"12px\")\r\n        .text(\"k\");\r\n\r\n      // y轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"text-style\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .attr(\"x\", -height / 2)\r\n        .attr(\"y\", -margin.left + 10)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"12px\")\r\n        .text(\"SSE\");\r\n\r\n      //图片标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"text-style\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", -20)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"16px\")\r\n        .text(\"Elbow Method for Optimal K\");\r\n    };\r\n\r\n\r\n    onMounted(() => {\r\n      nextTick(() => {\r\n        if (props.parsedData.length > 0) {\r\n          openDrawer(); // 确保第一次加载时初始化数据\r\n        }\r\n      });\r\n    });\r\n\r\n    watch(() => props.isDarkMode, (newVal) => {\r\n      setStyles(newVal);\r\n      if (visible.value) {\r\n        initializeDrawer(); // 更新可见drawer的内容\r\n      }\r\n    });\r\n\r\n\r\n    return {\r\n      visible,\r\n      num,\r\n      openDrawer,\r\n      closeDrawer,\r\n      selectedOption,\r\n      initializeDrawer,\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.custom-input {\r\n  width: 100px;\r\n  margin-left: 20px;\r\n}\r\n\r\n#scatter-plot, #bar-chart, #elbow-chart {\r\n  display: inline-block;\r\n}\r\n\r\n.drawer-box:deep(.el-drawer__body) {\r\n  background-color: #141414;\r\n  color: #ffffff; /* 默认的字体颜色 */\r\n  box-shadow: -3px 0 5px rgba(0, 0, 0, 0.1);\r\n  height: 100%;\r\n}\r\n\r\n.kmeans-content {\r\n  width: 100%;\r\n  /*height: 100%;*/\r\n  text-align: center;\r\n}\r\n\r\n.input-container {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./KMeans.vue?vue&type=template&id=445e21ae&scoped=true\"\nimport script from \"./KMeans.vue?vue&type=script&lang=js\"\nexport * from \"./KMeans.vue?vue&type=script&lang=js\"\n\nimport \"./KMeans.vue?vue&type=style&index=0&id=445e21ae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-445e21ae\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"topSimilarSequences.length\" class=\"similar-sequences\">\r\n    <ul>\r\n      <li>\r\n        <div v-if=\"selectedDetails\" class=\"selected-sequence\">\r\n          <span :class=\"['day-of-week', getDayClass(getDayOfWeek(selectedDetails.date))]\">{{ getDayOfWeek(selectedDetails.date) }} </span>\r\n          <span class=\"list-date\"> {{ selectedDetails.date }} </span>:\r\n          <span v-html=\"renderedSelectedSequence\"></span>\r\n          <span class = \"list-text\">(Target Sequence) </span>\r\n          <span class=\"amount-sum\"> Amounts: [ {{ calculateAmountSum(selectedDetails.date) }} ] </span>\r\n        </div>\r\n      </li>\r\n      <li v-for=\"(seq, index) in filteredTopSimilarSequences\" :key=\"index\" @click=\"selectSimilarSequence(seq)\">\r\n        <span :class=\"['day-of-week', getDayClass(getDayOfWeek(seq.date))]\">{{ getDayOfWeek(seq.date) }} </span>\r\n        <span class=\"list-date\"> {{ seq.date }} </span>:\r\n        <span v-html=\"renderSequenceWithTooltip(seq.sequence, seq.date)\"></span>\r\n        <span class=\"list-text\">{{ formattedSimilarityText(seq) }}</span>\r\n        <span class=\"amount-sum\"> Amounts: [ {{ calculateAmountSum(seq.date) }} ] </span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { colorMappingNew } from '@/services/colorMapping.js';\r\nimport { charToSubCategory } from '@/services/StringMapping.js';\r\nimport { mapHeight, mapWidth, mapArea } from '@/services/sizeMapping.js';\r\nimport '@/assets/global.css';\r\n\r\nexport default {\r\n  name: 'TopSimilarList',\r\n  props: {\r\n    topSimilarSequences: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    selectedDetails: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    listAmounts: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    selectedMapping: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    selectedOption: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      renderedSelectedSequence: ''\r\n    };\r\n  },\r\n  mounted() {\r\n    // console.log('listAmounts:', this.listAmounts);\r\n    // console.log('selectedMapping:', this.selectedMapping);\r\n  },\r\n  watch: {\r\n    selectedDetails(newVal) {\r\n      if (newVal && newVal.date && newVal.sequence) {\r\n        this.renderedSelectedSequence = this.renderSequenceWithTooltip(newVal.sequence, newVal.date);\r\n      }\r\n    },\r\n    selectedMapping() {\r\n      this.renderedSelectedSequence = this.renderSequenceWithTooltip(this.selectedDetails.sequence, this.selectedDetails.date);\r\n    },\r\n    // selectedOption(newVal) {\r\n    //   console.log('selectedOption changed to:', newVal);\r\n    // },\r\n  },\r\n  computed: {\r\n    filteredTopSimilarSequences() {\r\n      return this.topSimilarSequences.filter(seq => seq.date !== this.selectedDetails.date);\r\n    }\r\n  },\r\n  methods: {\r\n    renderSequenceWithTooltip(sequence, date) {\r\n      let result = '';\r\n      const debitAmounts = this.listAmounts[date]?.debitAmounts || [];\r\n      const creditAmounts = this.listAmounts[date]?.creditAmounts || [];\r\n\r\n      // 生成交易数据数组\r\n      let transactions = sequence.split('').map((char, index) => {\r\n        return {\r\n          char,\r\n          debitAmount: debitAmounts[index] || 0,\r\n          creditAmount: creditAmounts[index] || 0,\r\n          subCategory: charToSubCategory[char] || 'Unknown'\r\n        };\r\n      });\r\n\r\n      // 根据 selectedMapping 的值应用不同的映射\r\n      if (this.selectedMapping === 'height') {\r\n        transactions = mapHeight(transactions);\r\n      } else if (this.selectedMapping === 'width') {\r\n        transactions = mapWidth(transactions);\r\n      } else if (this.selectedMapping === 'area') {\r\n        transactions = mapArea(transactions);\r\n      }\r\n\r\n      // 设置对齐方式\r\n      let verticalAlign = 'baseline'; // 默认对齐方式\r\n      if (this.selectedMapping === 'none' || this.selectedMapping === 'width' || this.selectedMapping === 'area') {\r\n        verticalAlign = 'middle'; // 中线对齐\r\n      }\r\n\r\n      // 绘制方块\r\n      transactions.forEach(d => {\r\n        const color = colorMappingNew[d.char] || 'transparent';\r\n\r\n        let tooltip = `Date: ${date}, Char: ${d.char}, SubCategory: ${d.subCategory}`;\r\n        if (d.debitAmount !== 0) {\r\n          tooltip += `, Debit Amount: ${d.debitAmount}`;\r\n        }\r\n        if (d.creditAmount !== 0) {\r\n          tooltip += `, Credit Amount: ${d.creditAmount}`;\r\n        }\r\n\r\n        const width = d.mappedWidth || 15; // 默认宽度\r\n        const height = d.mappedHeight || 18; // 默认高度\r\n        result += `<span title=\"${tooltip}\" style=\"display: inline-block; width: ${width}px; height: ${height}px; background-color: ${color}; vertical-align: ${verticalAlign};\"></span>`;\r\n      });\r\n\r\n      result += `<span style=\"margin-left: 15px; vertical-align: ${verticalAlign};\">${sequence}</span>`; // 添加序列字符串\r\n      return result;\r\n    },\r\n    getDayOfWeek(date) {\r\n      const daysOfWeek = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\r\n      const day = new Date(date).getDay();\r\n      return daysOfWeek[day];\r\n    },\r\n    getDayClass(day) {\r\n      const dayMap = {\r\n        Mo: 'monday',\r\n        Tu: 'tuesday',\r\n        We: 'wednesday',\r\n        Th: 'thursday',\r\n        Fr: 'friday',\r\n        Sa: 'saturday',\r\n        Su: 'sunday'\r\n      };\r\n      return dayMap[day] || '';\r\n    },\r\n    selectSimilarSequence(seq) {\r\n      const similarDetails = {\r\n        date: seq.date,\r\n        sequence: seq.sequence,\r\n        debitAmounts: this.listAmounts[seq.date]?.debitAmounts || [],\r\n        creditAmounts: this.listAmounts[seq.date]?.creditAmounts || [],\r\n      };\r\n      this.$emit('select-similar-sequence', similarDetails);\r\n    },\r\n    formattedSimilarityText(seq) {\r\n      if (this.selectedOption === 'category') {\r\n        return `(Category Similarity: ${seq.similarity.toFixed(2)}%)`;\r\n      } else if (this.selectedOption === 'amount') {\r\n        return `(Amount Distance: ${seq.similarity.toFixed(2)})`;\r\n      } else if (this.selectedOption === 'combined') {\r\n        return `(Category Similarity: ${seq.categorySimilarity.toFixed(2)}%, Amount Similarity: ${seq.amountSimilarity.toFixed(2)*100}%, Combined Similarity: ${seq.combinedSimilarity.toFixed(2)}%)`;\r\n      }\r\n      return ''; // 处理其他可能的情况\r\n    },\r\n    calculateAmountSum(date) {\r\n      const debitAmounts = this.listAmounts[date]?.debitAmounts || [];\r\n      const creditAmounts = this.listAmounts[date]?.creditAmounts || [];\r\n\r\n      return debitAmounts.map((debit, index) => debit + creditAmounts[index]).join(', ');\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.similar-sequences {\r\n  /*margin-top: 20px;*/\r\n  justify-content: left;\r\n  margin-bottom: auto;\r\n  margin-top: auto;\r\n  width: fit-content;\r\n}\r\n\r\n.similar-sequences h3 {\r\n  margin-bottom: 3px;\r\n  margin-top: 8px;\r\n}\r\n\r\n.similar-sequences ul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\n\r\n.similar-sequences li {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.list-date {\r\n  margin-right: 5px;\r\n}\r\n\r\n</style>\r\n\r\n","import { render } from \"./topSimilarList.vue?vue&type=template&id=1d0bc642&scoped=true\"\nimport script from \"./topSimilarList.vue?vue&type=script&lang=js\"\nexport * from \"./topSimilarList.vue?vue&type=script&lang=js\"\n\nimport \"./topSimilarList.vue?vue&type=style&index=0&id=1d0bc642&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d0bc642\"]])\n\nexport default __exports__","<template>\r\n  <!--  <div v-if=\"details\">-->\r\n  <!--    <div id=\"sequence-visualization-container\">-->\r\n  <!--      <span :class=\"['day-of-week', getDayClass(getDayOfWeek(details.date))]\">{{ getDayOfWeek(details.date) }}</span>-->\r\n  <!--      <span class=\"list-date\">{{ details.date }}</span>-->\r\n  <!--      <div id=\"sequence-visualization\"></div>-->\r\n  <!--      <span class=\"original-sequence\">{{ details.sequence }}</span>-->\r\n  <!--      <span class = \"list-text\">(Target Sequence) </span>-->\r\n  <!--    </div>-->\r\n  <!--  </div>-->\r\n  <!--  <div v-if=\"similarDetails\">-->\r\n  <!--    <div id=\"similar-sequence-visualization-container\">-->\r\n  <!--      <span :class=\"['day-of-week', getDayClass(getDayOfWeek(similarDetails.date))]\">{{ getDayOfWeek(similarDetails.date) }}</span>-->\r\n  <!--      <span class=\"list-date\">{{ similarDetails.date }}</span>-->\r\n  <!--      <div id=\"similar-sequence-visualization\"></div>-->\r\n  <!--      <span class=\"similar-sequence\">{{ similarDetails.sequence }}</span>-->\r\n  <!--      <span class=\"list-text\">(Selected Similar Sequence) </span>-->\r\n  <!--    </div>-->\r\n  <!--  </div>-->\r\n\r\n  <div>\r\n    <h3>Most Frequent Consumption Mode (unit/day)</h3>\r\n    <div>\r\n      <h4>Based on Category (similarities above 90% are considered similar)</h4>\r\n      <ul>\r\n        <li>\r\n          <strong>Levenshtein Distance Algorithm:</strong>\r\n          <!--          <p>{{ getMostSimilarSequence('category', 'levenshtein') }}</p>-->\r\n          <div class=\"sequence-container\" id=\"sequence-levenshtein\">\r\n            <span>2022-07-07:</span>\r\n            <div id=\"sequence-levenshtein-draw\"></div>\r\n            <span>(has 129 similar sequence)</span>\r\n            <span v-html=\"displaySequenceInfo('2022-07-07')\"></span>\r\n          </div>\r\n        </li>\r\n        <li>\r\n          <strong>Damerau-Levenshtein Distance Algorithm:</strong>\r\n          <!--          <p>{{ getMostSimilarSequence('category', 'damerau-levenshtein') }}</p>-->\r\n          <div class=\"sequence-container\" id=\"sequence-damerau\">\r\n            <span>2022-07-07:</span>\r\n            <div id=\"sequence-damerau-draw\"></div>\r\n            <span>(has 129 similar sequence)</span>\r\n            <span v-html=\"displaySequenceInfo('2022-07-07')\"></span>\r\n          </div>\r\n        </li>\r\n        <li>\r\n          <strong>Hamming Distance Algorithm:</strong>\r\n          <!--          <p>{{ getMostSimilarSequence('category', 'hamming') }}</p>-->\r\n          <div class=\"sequence-container\" id=\"sequence-hamming\">\r\n            <span>2022-07-07:</span>\r\n            <div id=\"sequence-hamming-draw\"></div>\r\n            <span>(has 129 similar sequence)</span>\r\n            <span v-html=\"displaySequenceInfo('2022-07-07')\"></span>\r\n          </div>\r\n        </li>\r\n        <li>\r\n          <strong>Jaro-Winkler Similarity Algorithm:</strong>\r\n          <!--          <p>{{ getMostSimilarSequence('category', 'jaro-winkler') }}</p>-->\r\n          <div class=\"sequence-container\" id=\"sequence-jaro\">\r\n            <span>2022-07-07:</span>\r\n            <div id=\"sequence-jaro-draw\"></div>\r\n            <span>(has 597 similar sequence)</span>\r\n            <span v-html=\"displaySequenceInfo('2022-07-07')\"></span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div>\r\n      <h4>Based on Amount (distance below 10 is considered similar)</h4>\r\n      <ul>\r\n        <li>\r\n          <strong> Euclidean Distance Algorithm:</strong>\r\n          <!--          <p>{{ getMostSimilarSequence('amount', 'levenshtein') }}</p>-->\r\n          <div class=\"sequence-container\" id=\"sequence-euclidean\">\r\n            <span>2019-12-05:</span>\r\n            <div id=\"sequence-euclidean-draw\"></div>\r\n            <span>(has 364 similar sequence)</span>\r\n            <span v-html=\"displaySequenceInfo('2019-12-05')\"></span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3';\r\nimport { colorMappingNew } from '@/services/colorMapping.js';\r\nimport { charToSubCategory } from '@/services/StringMapping.js';\r\nimport { findMostSimilarSequence } from '@/services/sequenceSimilarity.js';\r\nimport { mapHeight, mapWidth, mapArea } from '@/services/sizeMapping.js';\r\nimport '@/assets/global.css';\r\n\r\nexport default {\r\n  name: 'AlgorithmProcess',\r\n  props: {\r\n    details: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    similarDetails: {\r\n      type: Object,\r\n      required: false\r\n    },\r\n    selectedMapping: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    dailySequences: Object,\r\n    dailyAmounts: Object,\r\n  },\r\n  mounted() {\r\n    // if (this.details && this.details.sequence) {\r\n    //   this.drawSequence(this.details.sequence, \"#sequence-visualization\", this.details);\r\n    // }\r\n    // if (this.similarDetails && this.similarDetails.sequence) {\r\n    //   this.drawSequence(this.similarDetails.sequence, \"#similar-sequence-visualization\", this.similarDetails);\r\n    // }\r\n    this.drawAllSequences();\r\n  },\r\n  updated() {\r\n    this.drawAllSequences();\r\n  },\r\n  watch: {\r\n    // details(newVal) {\r\n    //   if (newVal && newVal.sequence) {\r\n    //     this.drawSequence(newVal.sequence, \"#sequence-visualization\", newVal);\r\n    //   }\r\n    // },\r\n    // similarDetails(newVal) {\r\n    //   if (newVal && newVal.sequence) {\r\n    //     this.drawSequence(newVal.sequence, \"#similar-sequence-visualization\", newVal);\r\n    //   }\r\n    // },\r\n    dailySequences() {\r\n      this.drawAllSequences();\r\n    },\r\n    dailyAmounts() {\r\n      this.drawAllSequences();\r\n    },\r\n    selectedMapping() {\r\n      this.drawAllSequences();\r\n    },\r\n  },\r\n  methods: {\r\n    drawAllSequences() {\r\n      this.renderSequence('2022-07-07', \"#sequence-levenshtein-draw\");\r\n      this.renderSequence('2022-07-07', \"#sequence-damerau-draw\");\r\n      this.renderSequence('2022-07-07', \"#sequence-hamming-draw\");\r\n      this.renderSequence('2022-07-07', \"#sequence-jaro-draw\");\r\n      this.renderSequence('2019-12-05', \"#sequence-euclidean-draw\");\r\n    },\r\n    renderSequence(date, containerId) {\r\n      const sequence = this.dailySequences[date];\r\n      const debitAmounts = this.dailyAmounts[date]?.debitAmounts || [];\r\n      const creditAmounts = this.dailyAmounts[date]?.creditAmounts || [];\r\n\r\n      const data = {\r\n        date,\r\n        sequence,\r\n        debitAmounts,\r\n        creditAmounts,\r\n      };\r\n\r\n      // console.log('Rendering sequence for date:', date, 'with data:', data);\r\n\r\n      this.drawSequence(sequence, containerId, data);\r\n    },\r\n    drawSequence(sequence, containerId, data) {\r\n      if (!sequence) return;\r\n\r\n      // 清空之前的SVG内容\r\n      d3.select(containerId).selectAll(\"*\").remove();\r\n      d3.select(\"#similar-sequence-visualization\").selectAll(\"*\").remove();\r\n\r\n      // 构建 transactions 数组\r\n      let transactions = sequence.split('').map((char, index) => {\r\n        return {\r\n          char,\r\n          debitAmount: data.debitAmounts[index] || 0,\r\n          creditAmount: data.creditAmounts[index] || 0,\r\n          subCategory: charToSubCategory[char] || 'Unknown'\r\n        };\r\n      });\r\n\r\n      // 根据 selectedMapping 的值应用不同的映射\r\n      if (this.selectedMapping === 'height') {\r\n        transactions = mapHeight(transactions);\r\n      } else if (this.selectedMapping === 'width') {\r\n        transactions = mapWidth(transactions);\r\n      } else if (this.selectedMapping === 'area') {\r\n        transactions = mapArea(transactions);\r\n      }\r\n\r\n      const svgWidth = transactions.length * (transactions[0].mappedWidth || 15);\r\n      const svgHeight = this.selectedMapping === 'height' ? Math.max(...transactions.map(d => d.mappedHeight)) : 18;\r\n\r\n      const svg = d3.select(containerId).append(\"svg\")\r\n        .attr(\"width\", svgWidth)\r\n        .attr(\"height\", svgHeight);\r\n\r\n      svg.selectAll(\"rect\")\r\n        .data(transactions)\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"x\", (d, i) => i * (d.mappedWidth || 15))\r\n        .attr(\"y\", 0)\r\n        .attr(\"width\", d => d.mappedWidth || 15)\r\n        .attr(\"height\", d => d.mappedHeight || 18)\r\n        .attr(\"fill\", d => this.getColor(d.char))\r\n        .append(\"title\") // 用于显示tooltip\r\n        .text(d => {\r\n          let tooltip = `Date: ${data.date}, Char: ${d.char}, SubCategory: ${d.subCategory}`;\r\n          if (d.debitAmount !== 0) {\r\n            tooltip += `, Debit Amount: ${d.debitAmount}`;\r\n          }\r\n          if (d.creditAmount !== 0) {\r\n            tooltip += `, Credit Amount: ${d.creditAmount}`;\r\n          }\r\n          return tooltip;\r\n        });\r\n    },\r\n    displaySequenceInfo(date) {\r\n      const sequence = this.dailySequences[date];\r\n      const debitAmounts = this.dailyAmounts[date]?.debitAmounts || [];\r\n      const creditAmounts = this.dailyAmounts[date]?.creditAmounts || [];\r\n      const amountsSum = debitAmounts.map((debit, index) => debit + (creditAmounts[index] || 0));\r\n\r\n      return `<span>${sequence}</span> <span style=\"margin-left: 10px;\">Amounts: [${amountsSum.join(', ')}]</span>`;\r\n    },\r\n    getColor(char) {\r\n      return colorMappingNew[char] || 'transparent';\r\n    },\r\n    getDayOfWeek(date) {\r\n      const daysOfWeek = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\r\n      const day = new Date(date).getDay();\r\n      return daysOfWeek[day];\r\n    },\r\n    getDayClass(day) {\r\n      const dayMap = {\r\n        Mo: 'monday',\r\n        Tu: 'tuesday',\r\n        We: 'wednesday',\r\n        Th: 'thursday',\r\n        Fr: 'friday',\r\n        Sa: 'saturday',\r\n        Su: 'sunday'\r\n      };\r\n      return dayMap[day] || '';\r\n    },\r\n    getMostSimilarSequence(selectedOption, selectedAlgorithm) {\r\n      const result = findMostSimilarSequence(\r\n        this.dailySequences,\r\n        this.dailyAmounts,\r\n        selectedOption,\r\n        selectedAlgorithm\r\n      );\r\n      return result\r\n        ? `date: ${result.date}, sequence: ${result.sequence}, number of similar sequence: ${result.similarCount}`\r\n        : 'did not find similar sequence';\r\n    }\r\n  }\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#sequence-visualization-container, #similar-sequence-visualization-container {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 13px;\r\n}\r\n\r\n.list-date {\r\n  margin-right: 5px;\r\n}\r\n\r\n#sequence-visualization, #similar-sequence-visualization {\r\n  display: inline-block;\r\n}\r\n\r\n.original-sequence, .similar-sequence {\r\n  margin-left: 15px;\r\n  text-align: left;\r\n}\r\n\r\n.sequence-container {\r\n  display: flex;\r\n  align-items: center; /* 垂直居中内容 */\r\n  font-size: 13px;\r\n}\r\n\r\n.sequence-container span {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./AlgorithmProcess.vue?vue&type=template&id=77bb4eae&scoped=true\"\nimport script from \"./AlgorithmProcess.vue?vue&type=script&lang=js\"\nexport * from \"./AlgorithmProcess.vue?vue&type=script&lang=js\"\n\nimport \"./AlgorithmProcess.vue?vue&type=style&index=0&id=77bb4eae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-77bb4eae\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"category-distribution\">\r\n    <div id=\"category-distribution-chart\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3';\r\nimport { colorMap } from '@/services/colorMapping.js';\r\n\r\nexport default {\r\n  name: 'CategoryDistribution',\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n  },\r\n  mounted() {\r\n    this.drawHistogram(this.data);\r\n  },\r\n  methods: {\r\n    drawHistogram(data) {\r\n      // 首先按 category 对数据进行分组，然后对每个分组内的 subCategory 进行计数\r\n      const categoryGroupedData = d3.group(data, d => d.Category);\r\n\r\n      const sortedCategories = Array.from(categoryGroupedData.keys()).sort((a, b) => a.localeCompare(b));\r\n\r\n      const sortedData = [];\r\n      sortedCategories.forEach(category => {\r\n        const values = categoryGroupedData.get(category);\r\n\r\n        const subCategoryCounts = d3.rollup(\r\n          values,\r\n          v => v.length,\r\n          d => d.subCategory || \"Null\" // 如果 subCategory 是 undefined，使用 \"Null\" 作为默认值\r\n        );\r\n\r\n        const sortedSubCategories = Array.from(subCategoryCounts, ([subCategory, count]) => ({\r\n          category,\r\n          subCategory,\r\n          count\r\n        }));\r\n\r\n        sortedData.push(...sortedSubCategories);\r\n      });\r\n\r\n      // 设置图表的宽度、高度和边距\r\n      const margin = { top: 65, right: 30, bottom: 135, left: 40 };\r\n      const width = 500 - margin.left - margin.right;\r\n      const height = 500 - margin.top - margin.bottom;\r\n\r\n      // 创建 SVG 容器\r\n      const svg = d3.select(\"#category-distribution-chart\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n      // X 轴\r\n      const x = d3.scaleBand()\r\n        .domain(sortedData.map(d => d.subCategory))\r\n        .range([0, width])\r\n        .padding(0.1);\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x))\r\n        .selectAll(\"text\")\r\n        .attr(\"transform\", \"rotate(-45)\")\r\n        .style(\"text-anchor\", \"end\");\r\n\r\n      // Y 轴\r\n      const y = d3.scaleLinear()\r\n        .domain([0, d3.max(sortedData, d => d.count)])\r\n        .nice()\r\n        .range([height, 0]);\r\n\r\n      svg.append(\"g\")\r\n        .call(d3.axisLeft(y));\r\n\r\n      // 创建 tooltip\r\n      const tooltip = d3.select(\"body\").append(\"div\")\r\n        .attr(\"class\", \"tooltip\")\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"visibility\", \"hidden\")\r\n        .style(\"background-color\", \"white\")\r\n        .style(\"border\", \"solid 1px #ccc\")\r\n        .style(\"padding\", \"5px\")\r\n        .style(\"border-radius\", \"5px\")\r\n        .style(\"font-size\", \"12px\");\r\n\r\n      // 绘制条形图\r\n      svg.selectAll(\".bar\")\r\n        .data(sortedData)\r\n        .enter().append(\"rect\")\r\n        .attr(\"class\", \"bar\")\r\n        .attr(\"x\", d => x(d.subCategory))\r\n        .attr(\"y\", d => y(d.count))\r\n        .attr(\"width\", x.bandwidth())\r\n        .attr(\"height\", d => height - y(d.count))\r\n        .attr(\"fill\", d => colorMap[d.subCategory] || \"#ffffff\")\r\n        .on(\"mouseover\", (event, d) => {\r\n          tooltip.style(\"visibility\", \"visible\")\r\n            .html(`Category: ${d.category}<br>SubCategory: ${d.subCategory}<br>Count: ${d.count}`);        })\r\n        .on(\"mousemove\", event => {\r\n          const tooltipWidth = tooltip.node().offsetWidth;\r\n          const pageWidth = window.innerWidth;\r\n\r\n          let tooltipX = event.pageX + 10;\r\n          if (tooltipX + tooltipWidth > pageWidth) {\r\n            tooltipX = event.pageX - tooltipWidth - 10;\r\n          }\r\n\r\n          tooltip.style(\"top\", `${event.pageY - 50}px`)\r\n            .style(\"left\", `${tooltipX}px`);\r\n        })\r\n\r\n        .on(\"mouseout\", () => {\r\n          tooltip.style(\"visibility\", \"hidden\");\r\n        });\r\n\r\n      // // X 轴标题\r\n      // svg.append(\"text\")\r\n      //   .attr(\"class\", \"x-axis-label\")\r\n      //   .attr(\"text-anchor\", \"middle\")\r\n      //   .attr(\"x\", width / 2)  // 横向居中\r\n      //   .attr(\"y\", height + margin.bottom - 10)  // 放在x轴正下方\r\n      // .attr(\"font-size\", \"13px\")\r\n      //   .text(\"Category\");\r\n\r\n      // Y 轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"y-axis-label\")\r\n        .attr(\"text-anchor\", \"start\")\r\n        .attr(\"x\", -margin.left)  // 与y轴对齐\r\n        .attr(\"y\", -20)  // 放在y轴上方\r\n        .attr(\"font-size\", \"13px\")\r\n        .text(\"Transaction number\");\r\n\r\n      // 添加图表标题\r\n      svg.append(\"text\")\r\n        .attr(\"x\", width / 2)  // 水平居中\r\n        .attr(\"y\", -margin.top / 2 - 20)  // 在SVG的上方显示标题\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"16px\")\r\n        .style(\"font-weight\", \"bold\")\r\n        .text(\"Category Distribution\");\r\n\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.category-distribution {\r\n  padding: 10px;\r\n  height: 100%;\r\n}\r\n\r\n#category-distribution-chart {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: 50px;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./CategoryDistribution.vue?vue&type=template&id=58ada088&scoped=true\"\nimport script from \"./CategoryDistribution.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryDistribution.vue?vue&type=script&lang=js\"\n\nimport \"./CategoryDistribution.vue?vue&type=style&index=0&id=58ada088&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58ada088\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"amount-distribution\">\r\n    <div id=\"amount-distribution-chart\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3';\r\nimport { colorMap } from '@/services/colorMapping.js';\r\n\r\nexport default {\r\n  name: 'AmountDistribution',\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n  },\r\n  mounted() {\r\n    this.drawHistogram(this.data);\r\n  },\r\n  methods: {\r\n    drawHistogram(data) {\r\n      // 定义各个 Category 内部 subCategory 的顺序\r\n      const subCategoryOrder = {\r\n        \"Daily expenses and consumption\": [\r\n          \"Groceries\", \"Entertainment\", \"Amazon\", \"Dine Out\", \"Travel\", \"Fitness\", \"Food Shopping\", \"Clothes\"\r\n        ],\r\n        \"Financial management and transfers\": [\r\n          \"Savings\", \"Bills\", \"Cash\", \"Account transfer\"\r\n        ],\r\n        \"Housing and facilities\": [\r\n          \"Home Improvement\", \"Hotels\", \"Services/Home Improvement\", \"Mortgage\", \"Rent\"\r\n        ],\r\n        \"Income and investments\": [\r\n          \"Investment\", \"Supplementary Income\", \"Travel Reimbursement\", \"Safety Deposit Return\", \"Interest\", \"Paycheck\", \"Purchase of uk.eg.org\"\r\n        ],\r\n        \"Insurance and Health\": [\r\n          \"Insurance\", \"Health\"\r\n        ],\r\n        \"Other miscellaneous\": [\r\n          \"Others\", \"Null\", \"Services\", \"Other Shopping\"\r\n        ]\r\n      };\r\n\r\n      // 计算每个交易的总金额（Debit Amount + Credit Amount），同时保留 subCategory 和 Category 信息\r\n      const amountData = data.map(d => ({\r\n        amount: (d[\"Debit Amount\"] || 0) + (d[\"Credit Amount\"] || 0),\r\n        subCategory: d.subCategory || \"Null\",\r\n        category: d.Category || \"Unknown\"\r\n      }));\r\n\r\n      // 定义金额区间\r\n      const bins = [\r\n        { range: \"0-1\", min: 0, max: 1 },\r\n        { range: \"1-5\", min: 1, max: 5 },\r\n        { range: \"5-10\", min: 5, max: 10 },\r\n        { range: \"10-20\", min: 10, max: 20 },\r\n        { range: \"20-50\", min: 20, max: 50 },\r\n        { range: \"50-100\", min: 50, max: 100 },\r\n        { range: \"100-500\", min: 100, max: 500 },\r\n        { range: \"500-1000\", min: 500, max: 1000 },\r\n        { range: \"1000-5000\", min: 1000, max: 5000 },\r\n        { range: \"5000+\", min: 5000, max: Infinity },\r\n      ];\r\n\r\n      // 计算每个区间的交易数量，并统计每个 subCategory 的数量\r\n      const binCounts = bins.map(bin => {\r\n        const filteredData = amountData.filter(d => d.amount > bin.min && d.amount <= bin.max);\r\n\r\n        const subCategoryCounts = d3.rollup(\r\n          filteredData,\r\n          v => v.length,\r\n          d => d.subCategory\r\n        );\r\n\r\n        // 将 subCategory 数据转换为数组，并根据 Category 和 subCategoryOrder 中的顺序进行排序\r\n        const sortedSubCategories = Array.from(subCategoryCounts, ([subCategory, count]) => {\r\n          const category = filteredData.find(d => d.subCategory === subCategory)?.category || \"Unknown\";\r\n          return { subCategory, count, category };\r\n        }).sort((a, b) => {\r\n          // 按 Category 排序\r\n          if (a.category !== b.category) {\r\n            return Object.keys(subCategoryOrder).indexOf(b.category) - Object.keys(subCategoryOrder).indexOf(a.category);\r\n          } else {\r\n            // 如果 Category 相同，则按 subCategoryOrder 排序\r\n            return subCategoryOrder[a.category].indexOf(b.subCategory) - subCategoryOrder[a.category].indexOf(a.subCategory);\r\n          }\r\n        });\r\n\r\n        return {\r\n          range: bin.range,\r\n          subCategories: sortedSubCategories,\r\n          count: filteredData.length // 总交易数量\r\n        };\r\n      });\r\n\r\n      // 设置图表的宽度、高度和边距\r\n      const margin = { top: 65, right: 30, bottom: 135, left: 40 };\r\n      const width = 500 - margin.left - margin.right;\r\n      const height = 570 - margin.top - margin.bottom;\r\n\r\n      // 创建 SVG 容器\r\n      const svg = d3.select(\"#amount-distribution-chart\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n      // X 轴\r\n      const x = d3.scaleBand()\r\n        .domain(binCounts.map(d => d.range))\r\n        .range([0, width])\r\n        .padding(0.1);\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x))\r\n        .selectAll(\"text\")\r\n        .attr(\"transform\", \"rotate(-45)\")\r\n        .style(\"text-anchor\", \"end\");\r\n\r\n      // Y 轴\r\n      const y = d3.scaleLinear()\r\n        .domain([0, d3.max(binCounts, d => d.count)])\r\n        .nice()\r\n        .range([height, 0]);\r\n\r\n      svg.append(\"g\")\r\n        .call(d3.axisLeft(y));\r\n\r\n      // 创建 tooltip\r\n      const tooltip = d3.select(\"body\").append(\"div\")\r\n        .attr(\"class\", \"tooltip\")\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"visibility\", \"hidden\")\r\n        .style(\"background-color\", \"white\")\r\n        .style(\"border\", \"solid 1px #ccc\")\r\n        .style(\"padding\", \"5px\")\r\n        .style(\"border-radius\", \"5px\")\r\n        .style(\"font-size\", \"12px\");\r\n\r\n      // 绘制堆叠条形图\r\n      binCounts.forEach(bin => {\r\n        let cumulativeHeight = 0; // 用于计算堆叠高度\r\n\r\n        bin.subCategories.forEach(subCategoryData => {\r\n          svg.append(\"rect\")\r\n            .attr(\"x\", x(bin.range))\r\n            .attr(\"y\", y(cumulativeHeight + subCategoryData.count))\r\n            .attr(\"width\", x.bandwidth())\r\n            .attr(\"height\", y(cumulativeHeight) - y(cumulativeHeight + subCategoryData.count))\r\n            .attr(\"fill\", colorMap[subCategoryData.subCategory] || \"transparent\")\r\n            .on(\"mouseover\", () => {\r\n              tooltip.style(\"visibility\", \"visible\")\r\n                .html(`Category: ${subCategoryData.category}<br>SubCategory: ${subCategoryData.subCategory}<br>Count: ${subCategoryData.count}`);\r\n            })\r\n            .on(\"mousemove\", event => {\r\n              const tooltipWidth = tooltip.node().offsetWidth;\r\n              const pageWidth = window.innerWidth;\r\n\r\n              let tooltipX = event.pageX + 10;\r\n              if (tooltipX + tooltipWidth > pageWidth) {\r\n                tooltipX = event.pageX - tooltipWidth - 10;\r\n              }\r\n\r\n              tooltip.style(\"top\", `${event.pageY - 50}px`)\r\n                .style(\"left\", `${tooltipX}px`);\r\n            })\r\n            .on(\"mouseout\", () => {\r\n              tooltip.style(\"visibility\", \"hidden\");\r\n            });\r\n\r\n          cumulativeHeight += subCategoryData.count; // 更新累计高度\r\n        });\r\n\r\n        // 在堆叠条形图的顶部添加文本，显示总高度\r\n        svg.append(\"text\")\r\n          .attr(\"x\", x(bin.range) + x.bandwidth() / 2)\r\n          .attr(\"y\", y(cumulativeHeight) - 5)\r\n          .attr(\"text-anchor\", \"middle\")\r\n          .attr(\"font-size\", \"12px\")\r\n          .text(bin.count);\r\n\r\n      });\r\n\r\n      // X 轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"x-axis-label\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", height + margin.bottom - 80)\r\n        .attr(\"font-size\", \"13px\")\r\n        .text(\"Amount Range (unit: BGP)\");\r\n\r\n      // Y 轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"y-axis-label\")\r\n        .attr(\"text-anchor\", \"start\")\r\n        .attr(\"x\", -margin.left)\r\n        .attr(\"y\", -15)\r\n        .attr(\"font-size\", \"13px\")\r\n        .text(\"Transaction Number\");\r\n\r\n      // 添加图表标题\r\n      svg.append(\"text\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", -margin.top / 2 - 15)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"16px\")\r\n        .style(\"font-weight\", \"bold\")\r\n        .text(\"Amount Distribution\");\r\n\r\n    }\r\n\r\n  }\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.amount-distribution {\r\n  padding: 10px;\r\n  height: 100%;\r\n}\r\n\r\n#amount-distribution-chart {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./AmountDistribution.vue?vue&type=template&id=0187d981&scoped=true\"\nimport script from \"./AmountDistribution.vue?vue&type=script&lang=js\"\nexport * from \"./AmountDistribution.vue?vue&type=script&lang=js\"\n\nimport \"./AmountDistribution.vue?vue&type=style&index=0&id=0187d981&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0187d981\"]])\n\nexport default __exports__","<template>\r\n  <div style=\"display: flex; align-items: center; height: 30px;\">\r\n    <p class=\"text-style\" style=\"margin: 0 10px 0 0; font-size: 16px; line-height: 1.5;\">Circle Size:</p>\r\n    <el-input-number\r\n      v-model=\"circleRadius\"\r\n      :min=\"1\"\r\n      :max=\"10\"\r\n      aria-label=\"Circle Radius\"\r\n      :step=\"0.5\"\r\n      controls-position=\"right\"\r\n      size=\"small\"\r\n      style=\"width: 80px; line-height: 1.5;\"\r\n    >\r\n    </el-input-number>\r\n  </div>\r\n\r\n  <el-radio-group v-model=\"selectedYAxisOption\">\r\n    <el-radio value=\"normal\">Normal</el-radio>\r\n    <el-radio value=\"winsorize\">Decrease Outlier (Cap at 5000)</el-radio>\r\n    <el-radio value=\"logarithmic\">Logarithmic</el-radio>\r\n  </el-radio-group>\r\n  <div id=\"time-distribution-chart\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { ElInputNumber, ElRadioGroup, ElRadio } from 'element-plus';\r\nimport * as d3 from 'd3';\r\nimport d3Tip from 'd3-tip';\r\nimport { colorMap } from '@/services/colorMapping';\r\n\r\nexport default {\r\n  name: 'TimeDistribution',\r\n  components: {\r\n    ElInputNumber,\r\n    ElRadioGroup,\r\n    ElRadio,\r\n  },\r\n  props: {\r\n    parsedData: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    selectedCategories: {\r\n      type: Set,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      circleRadius: 3, // 默认的散点半径\r\n      selectedYAxisOption: 'winsorize', // 默认选项为 Winsorize\r\n    };\r\n  },\r\n  mounted() {\r\n    this.drawScatterPlot();\r\n  },\r\n  watch: {\r\n    selectedCategories: {\r\n      handler() {\r\n        d3.select(\"#time-distribution-chart\").selectAll(\"*\").remove();\r\n        this.drawScatterPlot();\r\n      },\r\n      deep: true\r\n    },\r\n    circleRadius() {\r\n      d3.select(\"#time-distribution-chart\").selectAll(\"*\").remove();\r\n      this.drawScatterPlot();\r\n    },\r\n    selectedYAxisOption() {\r\n      d3.select(\"#time-distribution-chart\").selectAll(\"*\").remove();\r\n      this.drawScatterPlot();\r\n    }\r\n  },\r\n  methods: {\r\n    drawScatterPlot() {\r\n      const margin = { top: 70, right: 20, bottom: 70, left: 40 };\r\n      const width = 500 - margin.left - margin.right;\r\n      const height = 530 - margin.top - margin.bottom;\r\n\r\n      // 根据 y 轴选项处理金额数据\r\n      let maxAmount = 5000;\r\n      let filteredData;\r\n\r\n      if (this.selectedYAxisOption === 'winsorize') {\r\n        filteredData = this.parsedData.map(d => ({\r\n          ...d,\r\n          adjustedAmount: Math.min(d.debitAmount + d.creditAmount, 5000)\r\n        }));\r\n      } else if (this.selectedYAxisOption === 'logarithmic') {\r\n        filteredData = this.parsedData.map(d => ({\r\n          ...d,\r\n          adjustedAmount: Math.log10(d.debitAmount + d.creditAmount + 1) // 确保对数变换后非负\r\n        }));\r\n        maxAmount = d3.max(filteredData, d => d.adjustedAmount);\r\n      } else {\r\n        filteredData = this.parsedData.map(d => ({\r\n          ...d,\r\n          adjustedAmount: d.debitAmount + d.creditAmount\r\n        }));\r\n        maxAmount = d3.max(filteredData, d => d.adjustedAmount);\r\n      }\r\n\r\n      const dates = filteredData.map(d => new Date(d.date));\r\n      const customTicks = this.generateCustomTicks(dates);\r\n\r\n      const svg = d3.select(\"#time-distribution-chart\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n      const x = d3.scaleTime()\r\n        .domain([d3.min(dates), d3.max(dates)])\r\n        .range([0, width]);\r\n\r\n      const xAxis = d3.axisBottom(x)\r\n        .tickValues(customTicks)\r\n        .tickFormat(d3.timeFormat(\"%Y-%m-%d\"));\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(xAxis)\r\n        .selectAll(\"text\")\r\n        .attr(\"transform\", \"rotate(-45)\")\r\n        .style(\"text-anchor\", \"end\");\r\n\r\n      const y = d3.scaleLinear()\r\n        .domain([0, maxAmount])\r\n        .range([height, 0]);\r\n\r\n      svg.append(\"g\")\r\n        .call(d3.axisLeft(y)\r\n          .ticks(10)\r\n          .tickFormat(this.selectedYAxisOption === 'logarithmic'\r\n            ? d => Math.pow(10, d).toFixed(0)  // 对数轴刻度显示原始金额\r\n            : d => d)\r\n        );\r\n\r\n      // 手动添加 y 轴的最大值刻度\r\n      svg.append(\"g\")\r\n        .attr(\"transform\", `translate(0, ${y(maxAmount)})`)\r\n        .call(d3.axisLeft(y).tickValues([maxAmount])\r\n          .tickFormat(this.selectedYAxisOption === 'logarithmic'\r\n            ? d => Math.pow(10, d).toFixed(0)\r\n            : d => d)\r\n        );\r\n\r\n      // 初始化 d3-tip\r\n      const tip = d3Tip()\r\n        .attr('class', 'd3-tip')\r\n        .offset([-10, 0])\r\n        .html(function(event, d) {\r\n          return `\r\n        <strong>Date:</strong> <span>${d.date}</span><br>\r\n        <strong>Amount:</strong> <span>${(d.debitAmount + d.creditAmount).toFixed(2)}</span><br>\r\n        <strong>Category:</strong> <span>${d.category}</span><br>\r\n        <strong>SubCategory:</strong> <span>${d.subCategory}</span>\r\n      `;\r\n        });\r\n\r\n      svg.call(tip);\r\n\r\n      svg.selectAll(\"circle\")\r\n        .data(filteredData)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"cx\", d => x(new Date(d.date)))\r\n        .attr(\"cy\", d => y(d.adjustedAmount))\r\n        .attr(\"r\", this.circleRadius)\r\n        .style(\"fill\", d => colorMap[d.subCategory] || \"transparent\")\r\n        .style(\"opacity\", d => this.selectedCategories.has(d.subCategory) ? 1 : 0)\r\n        .on('mouseover', tip.show)\r\n        .on('mouseout', tip.hide);\r\n\r\n      svg.append(\"text\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", -40)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"16px\")\r\n        .style(\"font-weight\", \"bold\")\r\n        .text(\"Time Distribution of Transactions\");\r\n\r\n      // Y 轴标题\r\n      svg.append(\"text\")\r\n        .attr(\"class\", \"y-axis-label\")\r\n        .attr(\"text-anchor\", \"start\")\r\n        .attr(\"x\", -margin.left)\r\n        .attr(\"y\", -15)\r\n        .attr(\"font-size\", \"13px\")\r\n        .text(this.selectedYAxisOption === 'logarithmic' ? \"Logarithmic Amount (unit: BGP)\" : \"Transaction Amount (unit: BGP)\");\r\n    },\r\n\r\n    generateCustomTicks(dates) {\r\n      const ticks = [];\r\n      const startDate = d3.min(dates);\r\n      const endDate = d3.max(dates);\r\n\r\n      ticks.push(startDate); // 添加首日期\r\n\r\n      let currentYear = startDate.getFullYear();\r\n\r\n      while (currentYear <= endDate.getFullYear()) {\r\n        const janFirst = new Date(currentYear, 0, 1); // 1月1日\r\n        const junFirst = new Date(currentYear, 6, 1); // 7月1日\r\n\r\n        if (janFirst >= startDate && janFirst <= endDate) {\r\n          ticks.push(janFirst);\r\n        }\r\n\r\n        if (junFirst >= startDate && junFirst <= endDate) {\r\n          ticks.push(junFirst);\r\n        }\r\n\r\n        currentYear++;\r\n      }\r\n\r\n      if (ticks[ticks.length - 1].getTime() !== endDate.getTime()) {\r\n        ticks.push(endDate); // 添加尾日期\r\n      }\r\n\r\n      return ticks;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#time-distribution-chart {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.d3-tip {\r\n  line-height: 1;\r\n  font-weight: bold;\r\n  padding: 12px;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  color: #fff;\r\n  border-radius: 2px;\r\n}\r\n\r\n/* Creates a small triangle extender for the tooltip */\r\n.d3-tip:after {\r\n  box-sizing: border-box;\r\n  display: inline;\r\n  font-size: 10px;\r\n  width: 100%;\r\n  line-height: 1;\r\n  color: rgba(0, 0, 0, 0.8);\r\n  content: \"\\25BC\";\r\n  position: absolute;\r\n  text-align: center;\r\n}\r\n\r\n/* Style northward tooltips differently */\r\n.d3-tip.n:after {\r\n  margin: -1px 0 0 0;\r\n  top: 100%;\r\n  left: 0;\r\n}\r\n</style>\r\n","import { render } from \"./TimeDistribution.vue?vue&type=template&id=2d154a88&scoped=true\"\nimport script from \"./TimeDistribution.vue?vue&type=script&lang=js\"\nexport * from \"./TimeDistribution.vue?vue&type=script&lang=js\"\n\nimport \"./TimeDistribution.vue?vue&type=style&index=0&id=2d154a88&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2d154a88\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"average-day\">\r\n    <h2>Average Day Analysis</h2>\r\n    <p>Average number of transactions per day: {{ averageTransactions }}</p>\r\n    <p>Average number of different subCategories per day: {{ averageSubCategories }}</p>\r\n    <p>Average Amount per Transaction: {{ averageTransactionAmount.toFixed(2) }}</p>\r\n    <p>Average Amount per Day: {{ averageDailyAmount.toFixed(2) }}</p>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\n\r\nexport default {\r\n  name: 'AverageDay',\r\n  props: {\r\n    parsedData: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n  },\r\n  setup(props) {\r\n    // console.log(\"parsedData:\", props.parsedData);\r\n\r\n    // 按日期分组数据\r\n    const groupedData = computed(() => {\r\n      const groups = new Map();\r\n      props.parsedData.forEach(transaction => {\r\n        const date = transaction[\"date\"];\r\n        if (!groups.has(date)) {\r\n          groups.set(date, []);\r\n        }\r\n        groups.get(date).push(transaction);\r\n      });\r\n      return groups;\r\n    });\r\n\r\n    // 计算每天的交易数量和subCategory的数量\r\n    const dailyMetrics = computed(() => {\r\n      const dailyCounts = [];\r\n      groupedData.value.forEach((transactions) => {\r\n        const transactionCount = transactions.length;\r\n        const subCategoryCount = new Set(transactions.map(t => t.subCategory)).size;\r\n        dailyCounts.push({ transactionCount, subCategoryCount });\r\n      });\r\n      return dailyCounts;\r\n    });\r\n\r\n    // 计算平均交易数和平均subCategory数\r\n    const averageTransactions = computed(() => {\r\n      const totalTransactions = dailyMetrics.value.reduce((sum, day) => sum + day.transactionCount, 0);\r\n      // console.log(\"number of transactions:\", totalTransactions);\r\n      // console.log(\"number of date have transaction:\", dailyMetrics.value.length);\r\n      return (totalTransactions / dailyMetrics.value.length).toFixed(4);\r\n    });\r\n\r\n    const averageSubCategories = computed(() => {\r\n      const totalSubCategories = dailyMetrics.value.reduce((sum, day) => sum + day.subCategoryCount, 0);\r\n      return (totalSubCategories / dailyMetrics.value.length).toFixed(4);\r\n    });\r\n\r\n    const averageTransactionAmount = computed(() => {\r\n      const totalAmount = props.parsedData.reduce((sum, transaction) => {\r\n        return sum + (transaction[\"debitAmount\"] || 0) + (transaction[\"creditAmount\"] || 0);\r\n      }, 0);\r\n      return totalAmount / props.parsedData.length;\r\n    });\r\n\r\n    const averageDailyAmount = computed(() => {\r\n      let totalDailyAmount = 0;\r\n      groupedData.value.forEach(transactions => {\r\n        const dailyTotal = transactions.reduce((sum, transaction) => {\r\n          return sum + (transaction[\"debitAmount\"] || 0) + (transaction[\"creditAmount\"] || 0);\r\n        }, 0);\r\n        totalDailyAmount += dailyTotal;\r\n      });\r\n      return totalDailyAmount / groupedData.value.size;\r\n    });\r\n\r\n    return {\r\n      averageTransactions,\r\n      averageSubCategories,\r\n      averageTransactionAmount,\r\n      averageDailyAmount,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.average-day {\r\n  padding: 20px;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 10px;\r\n}\r\n\r\np {\r\n  font-size: 16px;\r\n  margin: 5px 0;\r\n}\r\n</style>\r\n","import { render } from \"./AverageDay.vue?vue&type=template&id=12f47b6c&scoped=true\"\nimport script from \"./AverageDay.vue?vue&type=script&lang=js\"\nexport * from \"./AverageDay.vue?vue&type=script&lang=js\"\n\nimport \"./AverageDay.vue?vue&type=style&index=0&id=12f47b6c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12f47b6c\"]])\n\nexport default __exports__","import { render } from \"./Page2.vue?vue&type=template&id=3cd2b8f4&scoped=true\"\nimport script from \"./Page2.vue?vue&type=script&lang=js\"\nexport * from \"./Page2.vue?vue&type=script&lang=js\"\n\nimport \"./Page2.vue?vue&type=style&index=0&id=3cd2b8f4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3cd2b8f4\"]])\n\nexport default __exports__","<template>\r\n  <el-container>\r\n    <el-header>\r\n      <h1>color map design</h1>\r\n    </el-header>\r\n    <el-main>\r\n      <div id=\"colormap-container\">\r\n        <canvas id=\"colormap-canvas\"></canvas>\r\n      </div>\r\n      <div id=\"category-colors\">\r\n        <ul>\r\n          <li v-for=\"(color, index) in categoryColors\" :key=\"index\">\r\n            <span :style=\"{ backgroundColor: color }\" class=\"color-box\"></span>\r\n            {{ categories[index] }}: {{ color }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport '@/assets/global.css';\r\n// import { jetColormap } from '@/services/colorMapping';\r\nimport { extractColors } from '@/services/extractColors';\r\nimport { ElContainer, ElHeader, ElMain } from 'element-plus';\r\n\r\nexport default {\r\n  name: 'Page3',\r\n  components: {\r\n    ElContainer,\r\n    // ElAside,\r\n    ElHeader,\r\n    ElMain,\r\n  },\r\n  data() {\r\n    return {\r\n      categories: ['Income and investments', 'Daily expenses and consumption', 'Housing and facilities',\r\n        'Insurance and Health', 'Financial management and transfers', 'Other miscellaneous'],\r\n      categoryColors: [],\r\n      colorPositions: []\r\n    };\r\n  },\r\n  mounted() {\r\n    const imageSrc = '/colormap_hsv_trimmed.png';\r\n    const numColors = this.categories.length;\r\n\r\n    extractColors(imageSrc, numColors, (colors, positions) => {\r\n      this.categoryColors = colors;\r\n      this.colorPositions = positions;\r\n      this.drawImageWithMarkers(imageSrc, positions);\r\n    });\r\n  },\r\n  methods: {\r\n    drawImageWithMarkers(imageSrc, positions) {\r\n      const canvas = document.getElementById('colormap-canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      const img = new Image();\r\n      img.src = imageSrc;\r\n      img.crossOrigin = 'Anonymous'; // 为了处理跨域问题\r\n\r\n      img.onload = () => {\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        ctx.drawImage(img, 0, 0, img.width, img.height);\r\n\r\n        // 画圈标记位置\r\n        ctx.fillStyle = 'white';\r\n        positions.forEach(pos => {\r\n          ctx.beginPath();\r\n          ctx.arc(pos.x, pos.y, 6, 0, 2 * Math.PI);\r\n          ctx.fill();\r\n        });\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#colormap-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n}\r\n\r\n#category-colors {\r\n  margin-top: 20px;\r\n}\r\n\r\n.color-box {\r\n  display: inline-block;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-right: 10px;\r\n  border: 1px solid #000;\r\n}\r\n</style>\r\n","//取色点颜色输出格式换成“#FFFFFF”这种\r\nfunction rgbToHex(r, g, b) {\r\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();\r\n}\r\n\r\nexport function extractColors(imageSrc, numColors, callback) {\r\n  const img = new Image();\r\n  img.src = imageSrc;\r\n  img.crossOrigin = 'Anonymous'; // 为了处理跨域问题\r\n\r\n  img.onload = () => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    ctx.drawImage(img, 0, 0, img.width, img.height);\r\n\r\n    const colors = [];\r\n    const positions = [];\r\n    const y = Math.floor(img.height / 2); // 从中部区域提取颜色\r\n\r\n    for (let i = 0; i < numColors; i++) {\r\n      const x = Math.floor((i / numColors) * img.width);\r\n      const pixelData = ctx.getImageData(x, y, 1, 1).data;\r\n      const color = rgbToHex(pixelData[0], pixelData[1], pixelData[2]);\r\n      colors.push(color);\r\n      positions.push({ x, y });\r\n    }\r\n    callback(colors, positions);\r\n  };\r\n\r\n  img.onerror = (err) => {\r\n    console.error(\"Error loading image:\", err);\r\n  };\r\n}\r\n","import { render } from \"./Page3.vue?vue&type=template&id=0343723c&scoped=true\"\nimport script from \"./Page3.vue?vue&type=script&lang=js\"\nexport * from \"./Page3.vue?vue&type=script&lang=js\"\n\nimport \"./Page3.vue?vue&type=style&index=0&id=0343723c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0343723c\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"visible\" class=\"transaction-detail\">\r\n    <div class=\"header\">\r\n      <p>{{ details }}</p>\r\n      <el-button @click=\"close\" class=\"close-button\">Close</el-button>\r\n    </div>\r\n    <el-tabs type=\"border-card\" class=\"custom-tabs\">\r\n      <el-tab-pane label=\"Month View\">\r\n        <el-calendar\r\n          ref=\"calendar\"\r\n          v-model=\"currentDate\"\r\n          @input=\"handleDateChange\">\r\n          <template #header=\"{ date }\">\r\n            <span>{{ date }}</span>\r\n            <el-button-group>\r\n              <el-button size=\"small\" @click=\"selectDate('prev-year')\">Previous Year</el-button>\r\n              <el-button size=\"small\" @click=\"selectDate('prev-month')\">Previous Month</el-button>\r\n              <el-button size=\"small\" @click=\"goToCurrentDay\">Current Day</el-button>\r\n              <el-button size=\"small\" @click=\"selectDate('next-month')\">Next Month</el-button>\r\n              <el-button size=\"small\" @click=\"selectDate('next-year')\">Next Year</el-button>\r\n            </el-button-group>\r\n          </template>\r\n        </el-calendar>\r\n        <div v-if=\"topSimilarSequences.length\" class=\"similar-sequences\">\r\n          <h3>Top 10 Similar Sequences</h3>\r\n          <ul>\r\n            <li v-for=\"(seq, index) in topSimilarSequences\" :key=\"index\">\r\n              {{ seq.date }}: {{ seq.sequence }} ({{ seq.similarity.toFixed(2) }}%)\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"Year View\">\r\n        <div class=\"year-view\">\r\n          <div class=\"year-header\">{{ currentYear }}</div>\r\n          <div class=\"months\">\r\n            <div class=\"month\" v-for=\"(month, index) in months\" :key=\"index\">\r\n              <div class=\"month-header\">{{ month.name }}</div>\r\n              <div class=\"days\">\r\n                <div class=\"day\" v-for=\"day in month.days\" :key=\"day\">\r\n                  {{ day }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"Timeline\">\r\n        <h2>Timeline</h2>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      visible: true,\r\n      details: 'Transaction Details',\r\n      currentDate: new Date(),\r\n      currentYear: new Date().getFullYear(),\r\n      topSimilarSequences: [],\r\n      months: [\r\n        { name: 'January', days: this.generateDays(31) },\r\n        { name: 'February', days: this.generateDays(28) }, // Adjust for leap years\r\n        { name: 'March', days: this.generateDays(31) },\r\n        { name: 'April', days: this.generateDays(30) },\r\n        { name: 'May', days: this.generateDays(31) },\r\n        { name: 'June', days: this.generateDays(30) },\r\n        { name: 'July', days: this.generateDays(31) },\r\n        { name: 'August', days: this.generateDays(31) },\r\n        { name: 'September', days: this.generateDays(30) },\r\n        { name: 'October', days: this.generateDays(31) },\r\n        { name: 'November', days: this.generateDays(30) },\r\n        { name: 'December', days: this.generateDays(31) }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.visible = false;\r\n    },\r\n    handleDateChange(value) {\r\n      this.currentDate = value;\r\n    },\r\n    selectDate(action) {\r\n      const date = new Date(this.currentDate);\r\n      if (action === 'prev-year') {\r\n        date.setFullYear(date.getFullYear() - 1);\r\n      } else if (action === 'prev-month') {\r\n        date.setMonth(date.getMonth() - 1);\r\n      } else if (action === 'next-month') {\r\n        date.setMonth(date.getMonth() + 1);\r\n      } else if (action === 'next-year') {\r\n        date.setFullYear(date.getFullYear() + 1);\r\n      }\r\n      this.currentDate = date;\r\n    },\r\n    goToCurrentDay() {\r\n      this.currentDate = new Date();\r\n    },\r\n    generateDays(count) {\r\n      return Array.from({ length: count }, (_, i) => i + 1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.year-view {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.year-header {\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.months {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.month {\r\n  width: 200px;\r\n  margin: 10px;\r\n}\r\n\r\n.month-header {\r\n  font-size: 18px;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.days {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 5px;\r\n}\r\n\r\n.day {\r\n  width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid #ddd;\r\n}\r\n</style>\r\n","import { render } from \"./Page4.vue?vue&type=template&id=14c1f91e&scoped=true\"\nimport script from \"./Page4.vue?vue&type=script&lang=js\"\nexport * from \"./Page4.vue?vue&type=script&lang=js\"\n\nimport \"./Page4.vue?vue&type=style&index=0&id=14c1f91e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-14c1f91e\"]])\n\nexport default __exports__","import { createRouter, createWebHashHistory  } from 'vue-router';\nimport Page1 from '@/views/Page1.vue';\nimport Page2 from '@/views/Page2.vue';\nimport Page3 from '@/views/Page3.vue';\nimport Page4 from '@/views/Page4.vue';\n\nconst routes = [\n  { path: '/page1', component: Page1 },\n  { path: '/page2', component: Page2 },\n  { path: '/page3', component: Page3 },\n  { path: '/page4', component: Page4 },\n  { path: '/', redirect: '/page1' }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\n\nexport default router;\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport ElementPlus from 'element-plus';\r\nimport 'element-plus/dist/index.css';\r\n// import VCalendar from 'v-calendar';\r\n// import 'v-calendar/dist/style.css';\r\nimport '@/assets/global.css'\r\n\r\nconst app = createApp(App);\r\napp.use(router);\r\napp.use(ElementPlus);\r\n// app.use(VCalendar);\r\n\r\napp.mount('#app');\r\n\r\ncreateApp(App).use(router).mount('#app');\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_vue3_app\"] = self[\"webpackChunkmy_vue3_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(9374); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_el_container","default","_withCtx","_createVNode","_component_router_link","to","class","_createTextVNode","_","_component_router_view","components","ElContainer","data","sidebarVisible","methods","toggleSidebar","this","__exports__","render","_createElementVNode","id","_component_el_header","_hoisted_1","_component_el_main","_hoisted_2","StackBarChart","console","log","async","loadData","response","fetch","arrayBuffer","Uint8Array","workbook","XLSX","type","firstSheetName","SheetNames","worksheet","Sheets","jsonData","sheet_to_json","name","ElHeader","ElMain","setup","onMounted","style","key","direction","_component_el_tree","ref","$setup","legendData","props","defaultProps","onCheck","handleCheck","renderContent","_component_el_scrollbar","onClick","_cache","args","showDetail","_component_el_switch","modelValue","showAllDates","$event","_component_el_radio_group","selectedMapping","_component_el_radio","value","_component_el_dropdown","onCommand","$options","handleDropdownCommand","dropdown","_component_el_dropdown_menu","_component_el_dropdown_item","command","_hoisted_3","_component_el_icon","_component_arrow_down","_hoisted_4","_component_el_col","span","_component_el_anchor","container","containerRef","offset","handleYearClick","_createElementBlock","_Fragment","_renderList","Object","keys","yearPositions","reverse","year","_component_el_anchor_link","href","title","showMappingLegend","_hoisted_5","_hoisted_6","selectedDropdown","_hoisted_7","_hoisted_8","_component_algorithm_process","details","selectedDetails","similarDetails","selectedSimilarDetails","dailySequences","dailyAmounts","_createCommentVNode","_hoisted_9","_component_AverageDay","parsedData","_hoisted_10","_component_CategoryDistribution","_hoisted_11","_component_AmountDistribution","_hoisted_12","_component_TimeDistribution","selectedCategories","_hoisted_13","isDarkMode","_hoisted_14","_hoisted_15","_hoisted_16","selectedOption","_hoisted_17","_component_el_select","selectedAlgorithm","placeholder","disabled","_component_el_option","label","_hoisted_18","_component_el_button","toggleTransactionDetail","openKMeansDrawer","_component_k_means","_hoisted_19","_component_top_similar_list","topSimilarSequences","listAmounts","onSelectSimilarSequence","handleSelectSimilarSequence","_hoisted_20","innerHTML","selectedDescription","_hoisted_21","_component_transaction_similarity","visible","showTransactionDetail","algorithm","onClose","closeDetail","onUpdateTopSimilarSequences","handleUpdateTopSimilarSequences","color1","color2","color3","color4","color5","color6","color7","color8","color9","color10","color11","color12","color13","color14","color15","color16","color17","color18","color19","color20","color21","color22","color23","color24","color25","color26","color27","color28","color29","color30","colorMap","colorMappingNew","subCategoryMapping","charToSubCategory","fromEntries","entries","map","segmentHeights","segments","mapHeight","forEach","d","amount","debitAmount","creditAmount","segmentIndex","findIndex","limit","mappedHeight","length","segmentWidths","widthSegments","mapWidth","mappedWidth","areaSizes","areaSegments","mapArea","area","Math","sqrt","EventSequenceChart","Set","index","formattedDate","cellAddress","cell","dateStr","t","date","Date","v","month","getMonth","toString","padStart","day","getDate","getFullYear","z","dateParts","split","category","trim","subCategory","transactionNumber","filter","nestedData","d3","allDateArray","Array","from","sort","a","b","startDate","endDate","allDates","setDate","push","toISOString","subCategories","localeCompare","color","domain","range","updateCellsVisibility","has","remove","margin","top","right","bottom","left","dayHeight","cellWidth","useDates","containerHeight","max","tip","d3Tip","attr","html","tooltipContent","svg","append","call","existingDates","previousYear","text","dayOfWeek","toLocaleDateString","weekday","substring","transactions","get","maxRectHeight","rowHeight","g","sequence","subCategoryCode","join","debitAmounts","creditAmounts","selectAll","enter","i","widths","slice","reduce","acc","w","on","event","show","hide","textYOffset","HeightLegendChart","containerSelector","width","height","numLayers","barsPerLayer","ceil","layers","layerIndex","heights","indices","x","padding","y","xAxis","tickFormat","yAxis","xAxisGroup","layer","bandwidth","WidthLegendChart","yAxisGroup","AreaLegendChart","ticks","filteredAreaSizes","filteredAreaSegments","squares","size","segment","side","xOffset","yOffset","square","group","select","$props","_component_el_tabs","close","_component_el_tab_pane","_component_month_view","highlightDates","similarDates","_component_el_backtop","target","years","_component_year_view","findMostSimilarSequence","sequences","amountsData","maxSimilarCount","mostSimilarSequence","sequenceKeys","sequenceLength","targetDate","targetSequence","similarCount","j","compareDate","compareSequence","similarity","calculateJaroWinklerSimilarity","calculateSimilarity","targetAmounts","compareAmounts","distance","calculateEuclideanDistance","distanceThreshold","levenshteinDistance","Infinity","matrix","charAt","min","damerauLevenshteinDistance","hammingDistance","jaroWinklerDistance","s1","s2","len1","len2","matchWindow","floor","matches1","fill","matches2","matches","start","end","transpositions","k","jaro","prefix","c","p","sequence1","sequence2","amounts1","credit","amounts2","longArray","shortArray","lengthDifference","indicesToInsertZero","minIndex","minValue","includes","extendedShortArray","splice","sum","val","pow","Error","findTopSimilarSequences","allSequences","topN","similarities","seq","findTopSimilarSequencesByAmount","findTopSimilarSequencesCombined","categorySimilarity","amountDistance","logDistance","log1p","normalizedLogDistance","amountSimilarity","combinedSimilarity","_toDisplayString","$data","months","dayNames","days","_normalizeClass","highlight","number","Number","required","watch","mounted","generateCalendar","daysInMonth","UTC","firstDay","getDay","showOnlyHighlightedMonths","filteredMonths","getDaysInMonth","getSimilarity","ElSwitch","String","monthIndex","extraContent","find","toFixed","isMonthHighlighted","some","ElTabs","ElTabPane","ElButton","ElBacktop","YearView","MonthView","Boolean","emit","currentDate","selectedDate","formatDate","clearHighlight","cells","document","querySelectorAll","classList","backgroundColor","borderRadius","fontWeight","similarityText","parentNode","querySelector","removeChild","nextTick","dates","currentMonth","currentYear","cellDateText","textContent","cellDate","parseInt","formattedCellDate","add","createElement","className","innerText","fontSize","textAlign","position","pointerEvents","appendChild","updateSimilarSequences","dateMatch","selectedSequence","targetAmountsSum","debit","amountsSum","validSequences","_component_el_drawer","_ctx","closeDrawer","_component_el_input_number","num","onChange","initializeDrawer","defineComponent","ElDrawer","ElInputNumber","ElRadioGroup","ElRadio","parseDateComponents","dateString","winsorize","threshold","minMaxScale","setStyles","item","amounts","tooltipAmounts","log10","datesScaled","amountsScaled","featureVectors","originalDate","originalAmount","kMeansInput","vector","kmeansResult","kmeans","initialization","clusteredData","cluster","clusters","drawScatterPlot","calculateElbowData","maxK","sseValues","sse","centroids","centroidObj","centroidArray","isArray","values","clusterPoints","distanceSum","total","point","distSum","coord","elbowData","drawElbowChart","openDrawer","isDark","drawerElement","maxYValue","tickSizeOuter","tickValues","toPrecision","symbol","line","datum","newVal","getDayClass","getDayOfWeek","renderedSelectedSequence","calculateAmountSum","filteredTopSimilarSequences","selectSimilarSequence","renderSequenceWithTooltip","formattedSimilarityText","computed","result","char","verticalAlign","tooltip","daysOfWeek","dayMap","Mo","Tu","We","Th","Fr","Sa","Su","$emit","displaySequenceInfo","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","drawAllSequences","updated","renderSequence","containerId","drawSequence","svgWidth","svgHeight","getColor","getMostSimilarSequence","drawHistogram","categoryGroupedData","Category","sortedCategories","sortedData","subCategoryCounts","sortedSubCategories","count","nice","tooltipWidth","node","offsetWidth","pageWidth","window","innerWidth","tooltipX","pageX","pageY","subCategoryOrder","amountData","bins","binCounts","bin","filteredData","indexOf","cumulativeHeight","subCategoryData","circleRadius","step","selectedYAxisOption","handler","deep","maxAmount","adjustedAmount","customTicks","generateCustomTicks","janFirst","junFirst","getTime","averageTransactions","averageSubCategories","averageTransactionAmount","averageDailyAmount","groupedData","groups","Map","transaction","set","dailyMetrics","dailyCounts","transactionCount","subCategoryCount","totalTransactions","totalSubCategories","totalAmount","totalDailyAmount","dailyTotal","ElTree","ElScrollbar","TransactionSimilarity","KMeans","TopSimilarList","AlgorithmProcess","CategoryDistribution","AmountDistribution","TimeDistribution","AverageDay","ElAnchor","ElAnchorLink","ElCol","ElSelect","ElOption","ElDropdown","ElDropdownMenu","ElDropdownItem","ElIcon","ArrowDown","$nextTick","$refs","kmeansComponent","error","children","selectedKeys","legendTree","detailVisible","algorithmDescriptions","newAlgorithm","fetchData","selectedKeysBackup","showAllDatesValue","populateLegendData","setCheckedKeys","updateTopSimilarSequences","selectedSequenceDate","newTopSimilarSequences","newListAmounts","sequenceDetails","categoryMapping","categories","self","checkedNodes","checkedKeys","selected","contains","transactionDate","__data__","newMapping","then","allKeys","flatMap","child","subChild","allLabels","h","marginRight","display","root","documentElement","setProperty","clearAll","preventDefault","getAttribute","replace","undefined","scrollTo","behavior","categoryColors","_normalizeStyle","rgbToHex","r","toUpperCase","extractColors","imageSrc","numColors","callback","img","Image","src","crossOrigin","onload","canvas","ctx","getContext","drawImage","colors","positions","pixelData","getImageData","onerror","err","colorPositions","drawImageWithMarkers","getElementById","fillStyle","pos","beginPath","arc","PI","_component_el_calendar","onInput","handleDateChange","header","_component_el_button_group","selectDate","goToCurrentDay","generateDays","action","setFullYear","setMonth","routes","path","component","Page1","Page2","Page3","Page4","redirect","router","createRouter","history","createWebHashHistory","app","createApp","App","use","ElementPlus","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","every","definition","o","defineProperty","enumerable","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}